{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/tinymce.js","webpack:///./resources/js/editor.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/icons/default/index.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/icons/default/icons.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/themes/silver/index.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/themes/silver/theme.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/plugins/paste/index.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/plugins/paste/plugin.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/.pnpm/tinymce@5.4.1/node_modules/tinymce/plugins/link/plugin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","domGlobals","typeOf","x","undefined","Array","isPrototypeOf","constructor","String","eq","f","eqString","y","eqArray","eqa","length","len","eqSortedArray","compareFn","contramap","xs","slice","sort","eqRecord","kx","keys","ky","q","eqAny","tx","indexOf","isEquatableType","noop","compose","fa","fb","args","_i","arguments","apply","constant","identity","curry","fn","initialArgs","restArgs","all","concat","not","die","msg","Error","never","always","none","NONE","isNone","thunk","id","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","or","orThunk","map","each","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","me","v","elementEq","b","Option","from","isType","type","isSimpleType","eq$1","isString","isObject","isArray","isNull","isBoolean","isUndefined","isFunction","isNumber","nativeSlice","nativeIndexOf","nativePush","push","rawIndexOf","ts","contains","pred","eachr","foldr","acc","foldl","find","until","findUntil","findIndex","flatten","reverse","difference","a1","a2","head","last","from$1","each$1","obj","props","k","map$1","tupleMap","tuple","objAcc","internalFilter","onTrue","onFalse","bifilter","filter$1","values","mapToArray","has","isArray$1","each$2","cb","map$2","array","callback","out","item","index","filter$2","indexOf$1","reduce","collection","iteratee","accumulator","thisArg","findIndex$1","predicate","last$1","__assign","assign","__spreadArrays","il","j","jl","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$1","nu$1","info","current","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","edge","chrome","ie","opera","firefox","safari","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","windows","ios","android","linux","osx","solaris","freebsd","chromeos","detect$1","candidates","userAgent","candidate","search","UaString","browsers","browser","oses","os","contains$1","str","substr","startsWith","prefix","start","checkRange","blank","trim","lTrim","rTrim","normalVersionRegex","checkContains","target","uastring","PlatformInfo","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","matchMedia","matches","platform","called","cached","navigator","detect$3","platform$1","webkit","fileApi","URL","createObjectURL","windowsPhone","Env","gecko","mac","iOS","contentEditable","transparentSrc","caretAfter","range","getSelection","documentMode","document","ceFalse","cacheSuffix","container","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp","trim$1","walk","Tools","makeMap","items","delim","split","grep","inArray","hasOwn","prop","extend","exts","ext","name_1","root","sp","scn","de","cn","exec","match","createNS","onCreate","resolve","parent","static","explode","_addCacheSuffix","url","fromDom","node","dom","Element","fromHtml","html","scope","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","doc","elementFromPoint","element","nodeName","nodeType","isType$1","isElement","isText","isDocument","isDocumentFragment","toArray$1","recurse","cur","is$1","selector","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq$2","e1","e2","ieContains","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","contains$2","d1","d2","regularContains","owner","ownerDocument","documentOrOwner","dos","defaultView","parentNode","prevSibling","previousSibling","nextSibling","prevSiblings","nextSiblings","children","child","cs","firstChild","lastChild","isShadowRoot","getRootNode","attachShadow","getStyleContainer","getHead","getShadowHost","host","before","marker","insertBefore","after","append","prepend","appendChild","append$1","elements","empty","textContent","rogue","remove","removeChild","unwrap","wrapper","children$1","inBody","fbc","fab","getShadowRoot","body","left","top","translate","Position","firstDefinedOrZero","viewport","offsetLeft","offsetTop","box","getBoundingClientRect","boxPosition","get$1","_DOC","scrollLeft","documentElement","scrollTop","to","scrollTo","intoView","alignToTop","scrollIntoViewIfNeeded","scrollIntoView","bounds","width","height","right","bottom","getBounds","_win","win","scroll","get$2","clientWidth","clientHeight","visualViewport","Math","max","pageLeft","pageTop","isNodeType","isRestrictedNode","getPrototypeOf","isElement$1","matchNodeNames","names","lowercasedNames","matchStyleValues","computed","getComputedStyle","getPropertyValue","hasAttribute","attrName","isBogus","isTable","tagName","hasContentEditableState","getAttribute","isTextareaOrInput","isText$1","isComment$1","isDocument$1","isDocumentFragment$1","isBr","isContentEditableTrue","isContentEditableFalse","isSupported","style","rawSet","setAttribute","set","setAll","attrs","get$3","remove$1","removeAttribute","get$4","getUnsafeProperty","getRaw","raw","browser$1","firstElement","nodes","hasChild","elm","getPos","rootElm","offsetParent","pos","clientLeft","clientTop","caption","bodyTop","captionTop","captionHeight","offsetHeight","getTableCaptionDeltaY","lazyLookup","lookup","mapToObject","isHeading","isBlock","isInline","isBr$1","isTextBlock","isList","isListItem","isVoid","isTableSection","isTableCell","isWsPreserveElement","isBookmarkNode","trimNode","nodeValue","trimmedLength","previousIsSpan","nextIsSpan","surroundedBySpans","makeMap$1","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","128","130","131","132","133","134","135","136","137","138","139","140","142","145","146","147","148","149","150","151","152","153","154","155","156","158","159","baseEntities","'","reverseEntities","buildEntitiesLookup","radix","chr","entity","fromCharCode","parseInt","namedEntities","encodeRaw","attr","encodeNumeric","charCodeAt","encodeNamed","entities","Entities","encodeAllRaw","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","charAt","innerText","nativeDecode","mapCache","dummyObj","makeMap$2","each$3","extend$1","explode$1","compileElementMap","styles","toUpperCase","Schema","settings","patternElements","customElementsMap","specialElements","createLookupTable","option","defaultValue","extendWith","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","schema","add","attributes","ni","attributesOrder","arrayToMap","join","addAttrs","schemaItem","table","script","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","special","RegExp","patternToRegExp","addValidElements","validElements","ei","el","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","required","splice","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","pattern","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","rule","inline","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","custom_elements","valid_children","extended_valid_elements","dd","dt","li","td","th","tr","tbody","thead","tfoot","legend","area","param","parents","parentsRequired","invalid_elements","getValidStyles","getValidClasses","getBlockElements","getInvalidStyles","getShortEndedElements","getTextBlockElements","getTextInlineElements","getBoolAttrs","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","isValidChild","isValid","attrPatterns","getCustomElements","support","Expr","getText","isXML","tokenize","compile","select","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","contains$3","toHex","hex","val","Styles","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","encodingItems","color","parse","css","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","suffix","noJoin","canCompress","encode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","border","serialize","serializeStyles","styleList","i_1","styleMap","mouseEventRe","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","returnFalse","returnTrue","addEvent","capture","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","fix","originalEvent","data","event","srcElement","defaultTarget","composedPath","getTargetFromShadowDom","pageX","clientX","eventDoc","pageY","clientY","preventDefault","isDefaultPrevented","stopPropagation","isPropagationStopped","cancelBubble","stopImmediatePropagation","isImmediatePropagationStopped","hasIsDefaultPrevented","metaKey","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","events","count","expando","Date","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","evt","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","relatedTarget","func","unbind","ci","eventMap","ex","fire","parentWindow","clean","getElementsByTagName","destroy","cancel","Event","preferredDoc","dirruns","done","classCache","createCache","tokenCache","compilerCache","sortOrder","arr","pop","push_native","indexOf$2","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr","rsibling","rescape","runescape","funescape","_","escaped","escapedWhitespace","high","els","Sizzle","context","results","seed","groups","old","nid","newContext","newSelector","getElementById","getElementsByClassName","qsa","toSelector","testContext","querySelectorAll","qsaError","cache","cacheLength","shift","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","base","dir","checkNonElements","doneName","first","xml","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","relative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","getById","attrId","tmp","className","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","unshift","expr","matchesSelector","ret","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","selectors","createPseudo","excess","unquoted","nodeNameSelector","operator","check","result","what","simple","forward","ofType","nodeIndex","useCache","pseudo","idx","matched","input","lang","elemLang","hash","location","focus","activeElement","hasFocus","href","tabIndex","enabled","disabled","checked","selected","selectedIndex","header","button","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","random","matcherFromGroupMatchers","token","compiled","push$1","slice$1","rquickExpr$1","skipUniques","isDefined","isString$1","createFragment","fragDoc","frag","createDocumentFragment","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","wrap$1","lastParent","newWrapper","cloneNode","numericCssMap","booleanMap","propFix","for","class","readonly","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","init","whiteSpaceRegExp$1","trim$2","each$4","unique","hook","removeAttr","camel","dashed","removeProperty","currentStyle","appendTo","prependTo","replaceWith","content","wrap","wrapAll","wrapInner","contents","clone","addClass","toggleClass","removeClass","state","classState","existingClassName","on","off","trigger","show","hide","closest","offset","sibling","siblingName","firstSibling","next","prev","contentDocument","contentWindow","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","defaults","sub","TreeWalker","startNode","rootNode","prev2","shallow","findSibling","findPreviousNode","startName","exports$1","module$1","define","require","amd","global","EphoxContactWrapper","u","code","1","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","runClearTimeout","Item","nextTick","title","env","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","Promise","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","reject","promise","newValue","then","finale","_unhandledRejectionFn","Handler","reason","prom","remaining","res","race","err","warn","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","4","promisePolyfill","Global","boltExport","requestAnimationFramePromise","nu$3","baseFn","callbacks","nCallback","isReady","cbs","LazyValue","pure","errorReporter","make","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","par","asyncValues","asyncValue","isValue","isError","_opt","_f","onValue","mapError","toOption","message","opt","onError","Result","fromOption","Adt","cases","constructors","adt","acase","keys$1","argLength","branches","branchKeys","reqKey","log","label","params","unite","bothErrors","firstError","secondError","bothValues","promiseObj","asap","immediateFn","catch","wrappedSetTimeout","time","wrappedSetInterval","debounce","timer","stop","Delay","requestAnimationFrame","requestAnimationFrameFunc","vendors","setEditorTimeout","editor","removed","setEditorInterval","throttle","StyleSheetLoader","documentOrShadowRoot","idCount","loadedStates","edos","maxLoadTime","addStyle","load","loadedCallback","errorCallback","link","status","passed","failed","onload","onerror","wait","testCallback","waitCallback","getTime","startTime","waitForWebKitLinkLoaded","styleSheet","styleSheets","ownerNode","owningElement","waitForGeckoLinkLoaded","cssRules","sheet","rel","async","defer","webKitChunks","contentCssCors","crossOrigin","referrerPolicy","loadF","loadAll","urls","success","failure","futures","parts","pass","fail","partition","_setReferrerPolicy","instance","WeakMap","forElement","referenceElement","rootDom","sl","create$1","each$5","grep$1","simpleSelectorRe","whiteSpaceRegExp$2","updateInternalStyleAttr","$elm","rawValue","findNodeIndex","normalized","lastNodeType","DOMUtils","_this","addedStyles","files","counter","styleSheetLoader","boundEvents","ownEvents","$","getRoot","$$","getAttrib","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","attrValue","root_element","getPos$1","getStyle","getSize","w","h","offsetWidth","elms","getParents","collect","selectorVal","_findSib","setAttribs","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","cls","oldElm","replaceChild","isNonEmptyElement","isNamedAnchor","createRng","createRange","rv","getContentEditable","stdMode","boxModel","deep","clone_1","getViewPort","argWin","vp","getRect","size","getParent","getNext","getPrev","createHTML","outHtml","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","parseStyle","cssText","serializeStyle","styleElm","DOM","loadCSS","isHidden","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","ps","rgbVal","isEmpty","brCount","walker","bogusVal","splitElm","replacementElm","bef","aft","pa","setStart","setEnd","extractContents","getContentEditableParent","isChildOf","dumpRng","startContainer","startOffset","endContainer","endOffset","getContext","keepValues","keep_values","keepUrlHook","src","setupAttrHooks","DOMUtils$1","each$6","grep$2","ScriptLoader","states","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","onreadystatechange","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","Cell","initial","currentCode","getLanguageData","I18n","getData","setCode","newCode","getCode","langData","translation","getLangData","textstr","removeContext","isTokenised","values_1","$1","$2","isRtl","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","listener","dependencies","createUrl","baseUrl","dep","resource","addOnUrl","urlString","baseURL","substring","lastIndexOf","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","AddOnManager$1","rate","last$2","read","supports","classList","add$2","clazz","add$1","remove$3","remove$2","add$3","cleanClass","get$5","has$2","descendants","descendants$1","ClosestOrAncestor","ancestor","isRoot","ancestor$1","descendant","querySelector","one","closest$1","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","rng","selection","getRng","getBody","an","newStart","getAttr","has$1","uid","findMarkers","setup","_registry","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","previous","onNodeChange","comparator","copy","annotations","fireNoAnnotation","_a","fireCallbacks","setup$1","registry","serializer","addNodeFilter","spans","span","identifyParserNode","persistent","generate$1","floor","set$1","docDom","fragment","contentElements","clone$1","original","isDeep","TextWalker","isBoundary","direction","TextSeeker","isBlockBoundary","newOffset","backwards","forwards","isZwsp$1","char","trim$3","isElement$2","isText$2","isCaretContainerBlock","isCaretContainerInline","isCaretContainer","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","insertBlock","blockName","br","blockNode","startsWithCaretContainer","endsWithCaretContainer","showCaretContainerBlock","caretContainer","brs","lastBr","lift2","oa","ob","round","clone$2","rect","collapse","toStart","isValidOverflow","overflowY","rect1","rect2","min","isAbove","isBelow","containsXY","getSelectedNode","getNode","extendingChars","isExtendingChar","ch","isContentEditableTrue$1","isContentEditableFalse$1","isBr$2","isText$3","isInvalidTextElement","isAtomicInline","isTable$2","isCaretContainer$1","isCaretCandidate","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate","isInEditable","isElement$3","isCaretCandidate$1","isBlock$1","isFloated","isValidElementCaretCandidate","and","isNotPre","isText$4","isBr$3","resolveIndex","isWhiteSpace","isRange","isHiddenWhiteSpaceRange","isZeroRect","clientRect","clientRects","getClientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","cloneRange","setEndAfter","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","beforeNode","addUniqueAndValidRect","addCharacterOffset","CaretPosition","toRange","isVisible","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","HDirection","CaretPosition$1","trimEmptyTextNode","rangeInsertNode","insertNode","insertFragment","isText$5","isBogus$1","nodeIndex$1","normalizedParent","getChildNodes","equal$1","createPathItem","numTextFragments","normalizedNodeIndex","create$3","outputOffset","path","normalizedTextOffset","resolve$1","paths","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$2","getPoint","point","trimmedOffset","getNormalizedTextOffset","findIndex$2","moveEndPoint","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","bookmark","isCollapsed","end","getLocation","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","moveToBookmark","keep","getBookmark","getCaretBookmark","getRangeBookmark","getUndoBookmark","DOM$1","getBodySetting","getParam","bodyObj","getContentSecurityPolicy","getForcedRootBlock","block","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isElement$4","isText$6","removeNode","setNodeValue","trimCount","trimmedText","removeUnchanged","remove$5","removeElementAndReposition","newPosition","removeTextCaretContainer","removeTextAndReposition","removeAndReposition","removeElementCaretContainer","caretContainerNode","getNodeValue","browser$2","isContentEditableFalse$3","getAbsoluteClientRect","scrollX","scrollY","margin","rootRect","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","contentEditableFalseNodes","deleteData","trimInlineCaretContainers","caretState","caret","startBlink","textNode","splitText","insertInline","getCss","reposition","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$4","isBlockLike","isCaretContainer$2","isCaretContainerBlock$1","isElement$5","isCaretCandidate$2","isForwards","isBackwards","skipCaretContainers","findNode","predicateFn","getParentBlock","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","setStartBefore","setEndBefore","setStartAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$1","normalizeRange","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","expected","isContentEditableFalse$5","isText$7","isElement$6","isBr$4","isCaretCandidate$3","isAtomic$1","isAtomicContentEditableFalse","isEditableCaretCandidate$1","nodeAtIndex","getCaretCandidatePosition","findCaretPosition","startPos","nextNode","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","CaretWalker","Backwards","isBeforeOrStart","position","isAfterOrEnd","isBeforeAfterSameElement","shouldSkipPosition","fromPosition","navigate","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","isCaretNode","getParentCaretContainer","addBogus","tryFindRangePosition","padEmptyCaretContainer","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","resolve$2","isPathBookmark","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","selectNode","resolveIndex$1","isRangeBookmark","getBookmark$1","setRng","isBookmarkNode$1","isNbsp","actual","isWhiteSpace$1","isContent","isNode","moveStart","isInlineBlock","isWhiteSpaceNode","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","ed","replaceVars","vars","isEq","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$1","areSimilarFormats","formatName","otherFormatName","validKeys","filterObj","format","validKey","formatter","fmt1","filteredFmt1","fmt2","filteredFmt2","equal","isBookmarkNode$2","getParents$2","isWhiteSpaceNode$1","isTextBlock$2","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","curFormat","findBlockEndPoint","scopeRoot","findParentContainer","block_expand","expandRng","includeTrailingSpace","expand","clampToExistingChildren","walk$1","exclude","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","parent_1","siblings_1","startPoint","endPoint","getRanges","ranges","rangeCount","getRangeAt","getCellsFromRanges","getSelectedNodes","getCellsFromElementOrRanges","selectedCells","getCellsFromEditor","getSel","getFirstChildren","getLastChildren","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint$1","hasAnyRanges","sel","runOnRanges","executor","fakeSelectionNodes","fakeNodeRng","preserve","fillBookmark","api","getOption","NodeValue","get$7","wrapName","isZeroWidth","isAnnotation","makeAnnotation","eDoc","decorate","_b","getOwnPropertySymbols","propertyIsEnumerable","__rest","master","_c","_d","_e","classes","add$4","annotate","newWrappers","getDoc","finishWrapper","processElements","processElement","processNodes","annotateWithBookmark","undoManager","transact","initialRng","hasFakeSelection","applyWordGrab","selectionRng","Annotator","register","changes","annotationChanged","getAll","directory","markers","nodesAlready","findAll","whiteSpaceRegExp$3","typeLookup","walk$2","isEmptyTextNode$1","insert","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","makeMap$3","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","cdata","comment","pi","doctype","reset","getContent","Serializer","writer","validate","handlers","8","7","10","11","sortedAttrs","elementRule","handler","inner","restoreDataUris","imageId","uris","findEndTagIndex","startIndex","shortEndedElements","tokenRegExp","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","parseInternal","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","stack","filteredUrlAttrs","scriptUriRegExp","parsingMode","processEndTag","valid","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","endIndex","lcHtml","isConditionalComment","endIfIndex","endCommentRegexp","findCommentEndIndex","parseAttribute","val2","val3","attrRule","processAttr","fillAttrsMap","isValidPrefixAttrName","uri","decodeURIComponent","unescape","allow_html_data_urls","isInvalidUri","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","matchText","bogusValue","preserve_cdata","dataImageUri","chunks","extractBase64DataUris","findEndTag","documentFocusInHandler","SaxParser$1","trimInternal","endTagIndex","matchLength","bogusAllRegExp","tempAttrs","trimContentRegExp","trimHtml","getTempAttrs","trimExternal","getContentFromBody","getInner","no_events","emptyRegExp","trimEmptyContents","each$7","ElementUtils","attribs","compareObjects","obj1","obj2","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll","isBeforeImageBlock","isAfterImageBlock","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","hasWhitespacePreserveParent","rootElement","isContent$1","isWhitespace","isBookmark","isBogus$2","isBogusAll$1","isEmpty$1","skipBogus","targetNode","isEmptyNode","removeTrailingBr","allBrs","rawNode","getLastChildren$1","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","parentsUntil$1","rawParent","parents$1","parentsAndSelf","normalize","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwards","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionForward","findCaretPositionForwardsFromElm","findCaretPosOutsideElmAfterDelete","findCaretPosition$1","setSelection","isBlock$2","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","normalizeWhitespace","oc","prevTextOpt","nextTextOpt","prevNode","whitespaceOffset","mergeTextNodes","deleteElement","moveCaret","afterDeletePos","parentBlock","normalizedAfterDeletePos","isInlineElement","setContent","setCursorLocation","paddPos","tableCellRng","deleteAction","removeTable","emptyCells","deleteCellSelection","getClosestCell","getClosestTable","cell","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableCells","partialSelection","startCell","endCell","isWithinSameTable","getCellRangeFromStartTable","getTableSelection","optCellRng","cRng","cells","tableSelection","getTableSelectionFromCellRng","getCellIndex","isSingleCellTableContentSelected","rows","isSingleCellTable","getAction","getSelectedCells","getActionFromRange","isRootFromElement","getCellRng","freefallRtl","deleteCellContents","deleteContents","lastNode","lastBlock","additionalCleanupNodes","deleteTableElement","deleteTableRange","startElm","getParentCaption","action","deleteCellRange","emptyElement","deleteCaptionRange","getParentCell","deleteCaretInsideCaption","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretCells","fromCell","toCell","deleteBetweenCells","isNearTable","deleteCaret","fromPos","isBeforeOrAfterTable","deleteCaretCaption","backspaceDelete","getStart","deleteRange","normalizeBlockSelectionRange","commonAncestorContainer","newEndPos","createRange$1","normalize$1","isListItemPadded","isPadding","trimListItems","getParentLi","findLastOf","caretPos","newCaretPos","findFirstIn","insertAtCaret","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","newPos","beforeRng","afterRng","cloneContents","getSplit","insertMiddle","isTableCell$2","selectionSetContent","isAfterNbsp","insertData","deleteSelectedContent","isTableCellContentSelected","execCommand","insertHtmlAtCaret","details","hasSiblingText","trimOrPadLeftRight","parser","merge","bookmarkHtml","paste","caretElement","parentElement","canHaveChildren","trimNbspAfterDeleteAndPadValue","parserArgs","nonEmptyElements","hasOnlyOneChild","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","isListFragment","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","invalid","validInsertion","textInlineElements","root_1","elementUtils_1","testNode","reduceInlineTextElements","nextRng","parentEditableFalseElm","getContentEditableFalseParent","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","SimRange","soffset","finish","foffset","Situ","situ","adt$1","domRange","exact","Selection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","browser$3","clamp","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","getBookmark$2","readRange","bookmarkToNativeRng","store","newBookmark","FocusManager","isEditorUIElement","registerEditorEvents","throttledStore","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","mouseUpPage","registerPageMouseUp","DOM$2","isUIElement","customSelector","getCustomUiSelector","isEditorUIElement$1","registerEvents","editorManager","focusedEditor","setActive","blurredEditor","getActiveElement","activeEditor","unregisterDocumentEvents","getFocusInElement","getCollapsedNode","normalizeSelection","focusBody","hasElementFocus","hasFocus$1","rawBody","hasInlineFocus","iframeElement","hasIframeFocus","hasEditorOrUiFocus","hasUiFocus","activateEditor","skipFocus","quirks","refreshContentEditable","bookmarkRng","contentEditableHost","getContentEditableHost","focusEditor","traverse","filter$3","nodeFilters","attributeFilters","nodeMatches","attrMatches","name_2","findMatchingNodes","isTreeNode","setEditorHtml","moveSelection","setContentInternal","getNodeFilters","getAttributeFilters","setContentTree","forcedRootBlockName","padd","isRootContent","setContentString","split$1","isEq$1","matchesUnInheritedFormatSelector","formatList","inherit","matchParents","matchNode","matchName","matchItems","itemName","similar","onmatch","matchAll","matchedFormatNames","checkedMap","startElement","canApply","defaultBlock","matchAllOnNode","formatNames","matchSimilar","isVariableValue","field","fieldValues","isVariableFormatName","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","clonedFormatNode","cleanFormatNode","caretTextNode","setup$3","keyCode","disableCaretContainer","isFormatElement","postProcessHooks","filter$4","each$8","addPostProcessHook","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","merger","MCE_ATTR_RE","each$9","isEq$2","isChildOfInlineParent","getContainer","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrap$2","wrapWithSiblings","find$2","removeFormat","compareNode","stylesModified","matchName$1","links","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","removeNode$1","remove$6","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","lastContentEditable","isRemoveBookmarkNode","removeRngStyle","textDecoration","nodeChanged","ceFalseOverride","each$a","isElementNode","findElementSibling","mergeSiblingsNodes","tmpSibling","elementUtils","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","mergeWithChildren","clear_child_styles","clearChildStyles","each$b","applyFormat","setElementFormat","fmt","onformat","styleVal","applyNodeStyle","found","applyRngStyle","nodeSpecific","wrapElm","currentWrapElm","parentName","getChildElementNode","isElementNode$1","childCount","isEmptyTextNode","getChildCount","mergeStyles","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","merge_siblings","mergeSiblings","wordcharRegex","importNode","applyCaretFormat","curSelNode","forced_root_block","fake","postProcess","processRanges","fromElements","tableModel","tableRow","cellPosition","getSpan","isNaN","cellExists","getWidth","row","findElementPos","extractRows","sx","sy","ey","newRows","fromDom$1","tableElm","rowspan","colspan","y2","x2","fillout","skipCellsX","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","subsection","endElement","subTable","getFullySelectedListWrappers","_li","findParentListContainer","listCont","getWrapElements","commonAnchorContainer","wrapElements","listWrappers","allWrappers","listElm","directListWrappers","emptyFragment","getFragmentFromRange","innerElm","wrapped","getTableFragment","selectedTableCells","firstCell","lastCell","fullTableModel","sectionedTableModel","read$1","getSelectionFragment","isCollapsibleWhitespace","getInnerText","bin","trimLeadingCollapsibleText","getSelectedContentInternal","nonRenderedText","parentBlockText","textIndex","getTextContent","tmpElm","contextual","getSerializedContent","getOuterHtml","insertAt","createFragment$1","write","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","removeAt","applyDiff","start1","end1","start2","end2","middle","diag","i2","snake","sum","undoLevelDocument","createFromEditor","trimmedFragments","trimmed","beforeBookmark","createFragmentedLevel","createCompleteLevel","applyToEditor","level","getLevelContent","getCleanLevelContent","implementation","createHTMLDocument","isEq$3","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","isTreeNode$1","runSerializerFiltersOnFragment","makePlainAdaptor","beforeChange","addUndoLevel","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","undo","redo","clear","hasUndo","hasRedo","ignore","extra","callback1","callback2","toggle","getContentInternal","insertContent","getModel","isRtc","plugins","setup$4","editorCast","rtcInstance","rtc","rtcEditor","tinymceEditor","defaultVars","unsupported","_undoManager","_locks","_node","_similar","toggleFormat","_args","_details","getSelectedContent","getRawModel","makeRtcAdaptor","isRemote","getRtcInstanceWithFallback","getRtcInstanceWithError","getContent$1","setContent$1","DOM$3","safeDestroy","remove$7","editorUpload","getElement","save","is_removing","unbindAllNativeEvents","hasHiddenInput","fireRemove","orgDisplay","restoreOriginalStyles","fireDetach","automatic","destroyed","_beforeUnload","theme","form","formElement","_mceOldSubmit","submit","formEventDelegate","restoreForm","contentAreaContainer","editorContainer","bodyElement","targetElm","clearDomReferences","hasOwnProperty$2","deepMerge","objects","curObject","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","resize","normalizePlugins","pluginNames","trimmedPlugins","extractSections","sections","sectionResult","hasSection","getToolbarMode","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","menubar","getExternalPlugins$1","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isMobileDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","mobilePlugins","combinedPlugins","combinePlugins","section","isSectionTheme","combineSettings","defaultSettings","defaultDeviceSettings","mobile","extendedSettings","isOnMobile","sectionSettings","getSection","getEditorSettings","documentBaseUrl","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","font_size_legacy_values","hidden_input","inline_styles","convert_fonts_to_spans","convertURL","getDefaultSettings","getFiltered","output","getParamObject","IconManager","iconPack","icons","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","getBoundingClientRect$1","transpose","isInsideElementContentArea","isEditorAttachedToDom","rawContainer","getContentAreaContainer","NotificationManager","notifications","getImplementation","unimplemented","getNotificationManagerImpl","open","getArgs","closeNotification","notification","otherNotification","spec","progressBar","addNotification","serviceMessage","getServiceMessage","getNotifications","WindowManager","dialogs","getWindowManagerImpl","openUrl","alert","confirm","getParams","setParams","funcBind","addDialog","dialog","fireOpenEvent","closeDialog","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","openDialog","displayNotification","notificationManager","displayError","_skinLoaded","logError","errorType","fireError","createLoadError","pluginLoadError","initError","getContentCssUrls","contentCss","getContentCss","skinUrl","contentCssFile","isContentCssSkinName","documentBaseURI","toAbsolute","api$1","getOffset","parseFloat","aggregate","properties","getOuter","cumulativeInclusions","Dimension","walkUp","navigation","view","rest","Navigation","freeze","__proto__","frameElement","find$3","frames","pathTo","loc","excludeFromDescend","markerInfo","cleanupFun","pageYOffset","pageXOffset","absolute","get$8","cleanup","createMarker","descend","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","withElement","elementMarker","scrollToMarker","viewHeight","intoWindowIfNeeded","viewportBottom","markerTop","markerBottom","largerThanViewport","intoWindow","innerHeight","intoFrame","frameViewHeight","op","viewportBounds","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasCeProperty","fromPoint$1","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","rects","moveToElementText","abs","findClosestIeRange","findParent","moveOutOfContentEditableFalse","getEndpointElement","real","getStart$2","getEnd","skipEmptyTextNodes","orig","getContent$2","isEq$4","rng1","hasParent","findParent$1","hasParentWithName","isTable$3","isTableCell$3","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","setContent$2","contentArgs","setupArgs","cleanContent","prevText","nextText","prependData","oldLength","rngSetContent","createContextualFragment","BookmarkManager","BookmarkManager$1","isXYWithinRange","VK","BACKSPACE","DELETE","DOWN","ENTER","LEFT","RIGHT","SPACEBAR","TAB","UP","END","HOME","modifierPressed","shiftKey","ctrlKey","altKey","metaKeyPressed","isContentEditableFalse$6","isContentEditableTrue$2","ControlSelection","selectedElm","selectedElmGhost","resizeHelper","selectedHandle","startX","startY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","editableDoc","rootDocument","resizeHandles","nw","ne","se","sw","isImage","contextMenuSelectImage","touch","touches","isEventOnImageOutsideRange","getResizeTarget","isResizable","setGhostElmSize","ghostElm","resizeGhostElement","deltaX","deltaY","resizeHelperX","resizeHelperY","screenX","screenY","getResizeImgProportional","display","selectedElmX","selectedElmY","scrollWidth","scrollHeight","fireObjectResizeStart","endGhostResize","wasResizeStarted","setSizeProp","showResizeRect","fireObjectResized","hideResizeRect","unbindResizeHandleEvents","targetWidth","targetHeight","handleElm","unSelectabe","startDrag","updateResizeRect","controlElm","isChildOrEqual","img","disableGeckoResize","isWithinContentEditableFalse","getContentEditableRoot","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","Selection$1","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","matchedSelectors","SelectorChanged","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","anchorNode","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","focusNode","isForward","anchorRange","anchorOffset","focusRange","focusOffset","bookmarkManager","controlSelection","select$1","compareEndPoints","setNode","getNode$1","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFontToSpansFilter","domParser","fontSizes","face","removeAttrs","addFilters","addStrikeToSpanFilter","parseDataUri$1","uriParts","buildBlob","atob","Uint8Array","Blob","uriToBlob","rejectWithError","xhr","XMLHttpRequest","responseType","response","send","blobUriToBlob","imageToBlobInfo","blobCache","base64","blobInfo","getByData","image","blob","getByUri","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","dataUri","ImageScanner","uploadStatus","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","newPromise","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","isEmpty$2","whitespaceElements","isPadded","registerBase64ImageFilter","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","parseDataUri","images_dataimg_filter","imgElem_1","Image","isValidDataImg","blobUri","addAttributeFilter","makeMap$4","each$c","explode$2","extend$2","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","list","fi","fl","isInWhiteSpacePreservedElement","invalidChildren","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","createNode","removeWhitespaceBefore","textNodeNext","textVal","cloneAndExcludeBlocks","isLineBreakNode","newNode","attrFiltersLen","tempNode","isPaddedWithNbsp","newParent","currentNode","nonSplitableElements","textBlockElements","fixed","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","newRel","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","register$2","register$1","hasEventListeners","shouldFireEvent","oldDoc","impl","firePreProcess","preProcess","addTempAttr","htmlParser","toHtml","firePostProcess","postProcess$1","serializeNode","DomSerializer","internalName","register$3","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","addRules","rules","setRules","Serializer$1","domSerializer","Uploader","pendingPromises","defaultHandler","progress","withCredentials","credentials","upload","onprogress","loaded","total","path1","path2","json","JSON","responseText","basePath","formData","FormData","filename","handlerSuccess","handlerFailure","resolvePending","uploadBlobs","blobInfos","openNotification","isPending","pendingUploadBlobInfo","markPending","closeNotification_1","markUploaded","removeFailed","percent","uploadBlobInfo","count$1","uuid","rnd","EditorUpload","uploader","imageScanner","blobUriStatuses","createStatus","hasBlobUri","toBlobInfo","mime","findFirst","cachedBlobInfo","removeByUri","revokeObjectURL","BlobCache","resultUri","getResultUri","urlFilters","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","filteredResult","uploadInfo","shouldReplaceBlobUris","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","getImagesDataImgFilter","dataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","updateAndFireChangeCallbacks","currentFormats","formatChangeData","formatsList","newFormats","remainingFormats","filterRemainingFormats","formatChanged","registeredFormatListeners","formats","setup$5","formatChangeItems","addListeners","removeListeners","FormatRegistry","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","preview","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontFamily","fontsize","fontSize","fontsize_class","blockquote","subscript","superscript","removeformat","get$9","getFormats","unregister","BreakType","each$d","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","getCssText","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","formatChangeState","addShortcut","setup$6","applyFormat$1","removeFormat$1","UndoManager","beforeChange$1","addUndoLevel$1","undo$1","redo$1","clear$1","reset$1","hasUndo$1","hasRedo$1","transact$1","ignore$1","extra$1","isFirstTypedCharacter","addNonTypingUndoLevel","cmd","command","isDirty","modKey","inputType","isInsertTextDataNull","isInsertFromPasteOrDrop","registerEvents$1","addKeyboardShortcuts","nonTypingKeycodes","isKeyboardEvent","isDeleteEvent","setup$7","placeholder","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","firstElementChild","isVisuallyEmpty","firePlaceholderToggle","getTouch","setup$8","startData","longpressFired","debounceLongpress","distX","distY","isFarEnough","isEqualNode","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","moveRel","modify","moveByWord","hasSelectionModifyApi","isText$8","startsWithCaretContainer$1","endsWithCaretContainer$1","createZwsp","insertInline$1","insertBefore$1","insertAfter$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","strongRtl","isInlineTarget","getInlineBoundarySelector","isRtl$1","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","evaluateUntil","fns","Location","rescope","before$4","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","after$3","isValidLocation","readLocation","getName","outside","inside","betweenInlines","fromInline","toInline","block1","block2","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation","findLocationTraverse","setCaretPosition","setSelected","renderCaretLocation","safeRemoveCaretContainer","isAtZwsp","move","isInlineTarget$1","findLocation$1","moveWord","_caret","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","VDirection","flip","positions","walk$3","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastPos","lastRect","newRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil","isAboveFn","isBeflowFn","line","targetClientRect","findUntil$1","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$7","findNode$1","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil$1","includeChildren","closestFakeCaret","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","isContentEditableTrue$3","isContentEditableFalse$8","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","caretRange","isContentEditableFalse$9","getSelectedNode$1","moveToCeFalseHorizontally","getNextPosFn","isBeforeContentEditableFalseFn","rangeIsInContainerBlock","isRangeInCaretContainerBlock","nextCaretPosition","peekCaretPosition","moveToCeFalseVertically","walkerFn","closestNextLineRect","dist1","dist2","contentEditableFalseNode","linePositions","nextLinePositions","caretClientRect","caretPositions","isBelowFn","getClientRect","positionsUntil","exitPreBlock","newBlock","getNextVisualCaretPosition","getPrevVisualCaretPosition","hasForcedRootBlock","textBlock","createTextBlock","moveH","newRange","getHorizontalRange","moveV","down","getVerticalRange","moveToLineEndPoint","isCefPosition","getClosestCell$1","getYAxisValue","isTargetCorner","corners","newCorner","oldCorner","oldDist","sqrt","newDist","findClosestCorner","tds","deflate","getCorners","corner","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","moveToRange","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","getTable","renderBlock","navigateVertically","getClosestAbovePosition","getClosestBelowPosition","moveH$1","moveV$1","isTarget","rangeBefore","insertElement","insertEmptyLine","insertBr","insertBlock$1","isAtFirstOrLastLine","isAtLastLine","isAtFirstLine","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","moveV$2","match$1","patterns","defaultPatterns","matchesEvent","execute","setup$a","executeKeydownOverride","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","containerElm","blockPosition","readFromRange","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","fromBlock","toBlock","insertionPoint","sidelongBlockMerge","getInsertionPoint","parentsAndSelf$1","findInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","backspaceDelete$1","read$3","isRawNodeInTable","isEverythingSelected","noPrevious","noNext","isSelectionInTable","deleteRange$1","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$2","_forward","isBr$5","findBr","parentBlocks","isBeforeBr","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","DeleteAction","moveToElement","moveToPosition","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","isDeleteFromCefDifferentBlocks","getContentEditableAction","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getAncestorCe","getContentEditableRoot$1","backspaceDeleteCaret","selectedNode","read$4","hideFakeCaret","deleteElement$1","backspaceDeleteRange","paddEmptyElement","backspaceDelete$3","deleteContentAndShowCaret","trimEmptyTextNode$1","backspaceDelete$4","deleteCefBoundaryText","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDeleteCollapsed","rescope$1","toPosition","firstPos","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDelete$5","hasOnlyOneChild$1","deleteLastPosition","parentInlines","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteCaret$1","getParentInlines","normalizedFromPos","prevPos","willDeleteLastPositionInElement","backspaceDelete$6","backspaceDelete$7","deleteCaret$2","parseIndentValue","number","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","isReadOnly","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","queryCommandState","unit","styleValue","indentElement","navigateIgnoreEmptyTextNodes","getClosestBlock","isAtBeforeAfterBlockBoundary","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","backspaceDelete$8","setup$b","executeKeydownOverride$1","executeKeyupOverride","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock$2","hasParent$1","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","createNewBlock","newBlockName","tmpRng","hasFirstChild","isEmptyAnchor","emptyBlock","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot$1","editableRoot","applyAttributes","forcedRootBlockAttrs","attrStyles","currentStyles","ruleName","getAllRaw","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","setForcedBlockAttrs","insert$1","parentBlockName","isAfterLastNodeInContainer","clonedNode","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell$4","wrapSelfAndSiblingsInDefaultBlock","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","scrollToBr","brElm","moveSelectionToBr","extraBr","insertBrAtCaret","isControlKey","hasRightSideContent","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$2","anchorLocation","readInlineAnchorLocation","newLineAction","shouldBlockNewLine$1","_shiftKey","getNoNewLineSelector","shouldBlockNewLine","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre$1","shouldPutBrInPre","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","getEditableRoot","match$2","predicates","insert$3","getAction$1","setup$c","handleEnterKeyEvent","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","isInMiddleOfText","getClosestBlock$1","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","isAtLineBoundary","isAtBeginningOfBody","isAtEndOfBody","needsToBeNbspRight","afterPos","needsToBeNbsp","needsToBeNbspLeft","isNbspAt","hasNbsp","normalizeNbspInMiddleOfTextNode","newText","chars","normalizeNbspMiddle","normalizeNbsps","normalizeNbspAtStart","normalizeNbspAtEnd","normalizeNbspsInEditor","insertInlineBoundarySpaceOrNbsp","checkPos","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection$1","setup$d","executeKeydownOverride$2","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","browser$4","setup$f","keypressThrotter","setupIeInput","isComposing","setup$g","executeKeydownOverride$3","registerKeyboardOverrides","setup$e","NodeChange","lastRng","lastPath","nativeRng","fakeRng","isSameElementPath","initialized","currentPath","setup$i","preventSummaryToggle","filterDetails","isTextBlockNode","setup$j","detail","normalizeSelection$1","getAbsolutePosition","calc","bodyPosition","scrollPosition","mousePosition","calculatePosition","getBodyPosition","getScrollPosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","isContentEditableFalse$a","isContentEditableTrue$4","removeElement","start$1","isLeftMouseButtonPressed","ceElm","elmPos","maxX","maxY","relX","relY","ghost","clonedElm","opacity","overflow","padding","boxSizing","createGhost","drop","dragging","targetElement","dragElement","isValidDropTarget","targetClone_1","cloneElm","targetClone","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","throttledPlaceCaretAt","movement","hasDraggableElement","targetPos","applyRelPos","overflowX","moveGhost","move$1","dropHandler","dragEndHandler","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","defaultPrevented","dataTransfer","types","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","isContentEditableTrue$5","isContentEditableFalse$b","getContentEditableRoot$2","SelectionOverrides","selectedContentEditableNode","fakeCaret","realSelectionId","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","normalizeShortEndedElementSelection","setContentEditableSelection","$realSelectionContainer","origTargetClone","nodeElm","removeContentEditableSelection","contentEditableRoot","hasBetterMouseTarget","targetBlock","hasNormalCaretPosition","handleTouchSelect","fakeCaretInfo","clipboardData","realSelectionElement","clearData","setData","outerText","renderFocusCaret","setup$k","Quirks","serializeRng","getAttributeApplyFunction","isSelectionAcrossElements","isGecko","isWebKit","mceInternalDataType","setEditorCommandState","selectAll","shortcuts","disableBackspaceIntoATable","bodyHeight","contentStyles","allRng","allContentsSelected","selectionHtml","internalContent","escape","setMceInternalContent","getMceInternalContent","internal","queryCommandSupported","Range","body_1","blur","template","setAttributeNode","DOM$4","getRootName","removeUndefined","mkParserSettings","moveSelectionToFirstCaretPosition","storeNative","initEditor","bindPendingEventDelegates","fireInit","execCallback","auto_focus","autoFocus","preInit","rtcMode","browser_spellcheck","gecko_spellcheck","spellcheck","firePostRender","directionality","getDirectionality","protect","startContent","contentCssText_1","getStyleSheetLoader","contentCSS","_urls","content_style","appendStyle","initContentBody","skipWrite","visibility","orgVisibility","iframeHTML","hex_colors","force_hex_style_colors","createParser","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","mkSerializerSettings","annotator","_nodeChangeDispatcher","setup$h","setup$9","firePreInit","loadingRtc","setProgressState","DOM$5","getIframeHtml","getDocType","getDocumentBaseUrl","getURI","bodyId","getBodyId","bodyClass","getBodyClass","createIframe","ifr","customAttrs","iframe","frameBorder","allowTransparency","createIframeElement","getIframeAttrs","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","iframeContainer","DOM$6","initPlugin","initializedPlugins","plugin","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","renderThemeFalse","renderThemeFalseIframe","renderThemeUi","renderUI","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","init$2","iconPackName","currentIcons","ui","loadIcons","svgData","icon","addIcon","initIcons","Theme","initTheme","initPlugins","boxInfo","appendContentCssFromSettings","hidden","init$1","DOM$7","hasSkipLoadPrefix","loadLanguage","scriptLoader","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","getIconsUrlMetaFromName","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","cat","urlMeta","iconsLoadError","themeUrl","getThemeUrl","loadTheme","getExternalPlugins","depPlugin","url_2","loadPlugins","render","snapshot","getStyleSheetLoader$1","isInline$1","resetContent","shouldPatchSubmit","triggerSave","windowManager","isEncodingXml","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","set_dirty","ensureIsRoot","closest$2","transform","transformed","ancestor$3","legacyPropNames","getSpecifiedFontProp","getProperty","legacyPropName","getFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","getCaretElement","isRangeAtStartOfNode","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","font","fonts","insertAtCaret$1","processValue","nativeCommand","each$e","map$3","inArray$2","EditorCommands","commands","setupCommands","skip_focus","customCommand","queryCommandValue","addCommands","commandList","addCommand","addQueryStateHandler","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","queryCommandEnabled","align","listParent","fontNameAction","fontSizeAction","hasVisual","anchor","editingHost","selectNodeContents","deleteCommand","forwardDeleteCommand","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","remove$4","setContentEditable","toggleReadOnly","removeFakeSelection","switchOnContentEditableTrue","restoreFakeSelection","isReadOnly$1","registerFilters","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","beforeFire","wrappedCallback","hi","bindingName","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","bubble","dispatcherArgs","DOM$8","getEventTarget","eventName","eventRoot","fireEvent","isListening","isClickEvent","isInAnchor","preventReadOnlyEvents","bindEventDelegate","delegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","activate","deactivate","editorReadOnly","fireSwitchMode","create$5","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","setMode","registerMode","each$f","explode$3","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","shortcut","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","createShortcut","parseShortcut","charCode","access","alt","ctrl","meta","bridge","buttons","menuItems","popups","contextMenus","contextToolbars","sidebars","addButton","addGroupToolbarButton","addToggleButton","addMenuButton","addSplitButton","addMenuItem","addNestedMenuItem","addToggleMenuItem","addAutocompleter","addContextMenu","addContextToolbar","addContextForm","addSidebar","create$6","each$g","trim$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","base_uri","source","isProtocolRelative","protocol","toAbsPath","urlMatch","part","userInfo","port","uriComponents","pathname","setPath","pathMatch","file","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","isSameOrigin","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","DOM$9","extend$3","each$h","resolve$3","ie$1","Editor","loadedCSS","isNotDirty","documentBaseURL","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","modeInstance","callbackLookup","initialContent","oldState","urlconverter_callback","visual_table_class","visual_anchor_class","_scanForImages","DOM$a","explode$4","each$i","extend$4","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinymce","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","targets","initCount","createEditor","forms","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","RangeUtils","normalizedRng","compareRanges","getCaretRangeFromPoint","tasks","resultFns","extendClass","initializing","RangeUtils$1","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","complete","completer","awaiter","round$1","relativePosition","targetW","targetH","create$8","Rect","inflate","findBestRelativePosition","constrainRect","rels","intersect","cropRect","x1","y1","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","each$j","extend$5","Class","_super","mixins","mixin","Mixins","dummy","Methods","Properties","fieldName","Statics","Defaults","member","createMethod","localStorage","min$1","max$1","round$2","JSONUtils","stringify","hexCode","JSONP","XHR","ready","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","extend$6","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","setItem","removeItem","storage","getItem","configurable","publicApi","geom","util","LocalStorage","Color","hue","saturation","brightness","side","chroma","hsvToRgb","toRgb","toHsv","minRGB","maxRGB","rgb2hsv","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders","global$1","SimpleResultType","isNonNullable","isNullable","isArrayOf","num","chunk","findMap","stype","serror","svalue","Value","SimpleResult","errors","hasNonNullableKey","hasOwnProperty$1","baseMerge","strict","defaultedThunk","asOption","asDefaultedOptionThunk","mergeWithThunk","defaulted","fallback","mergeWith","exclude$1","fields","wrapAll$1","keyvalues","kv","consolidate","objs","partitions","partition$2","mergeValues","mergeErrors$1","ResultCombine","mergeValues$1","formatObj","getErrorInfo","strictAccess","missingStrict","fallbackAccess","fallbackThunk","cExtractOne","strength","okey","presence","bundle","av","extract","bundleAsOption","optValue","outcome","ov","optionAccess","optionDefaultedAccess","baseThunk","instantiator","value$1","validator","custom","getSetKeys","objOfOnly","objOf","fieldNames","unsupportedFields","cExtract","_instantiator","arrOf","setOf","validatedKeys","validateKeys","vk","anyValue","arrOfObj","chooseFrom","branch","missingBranch","choose","missingKey","chosen","_anyValue","arrOfObj$1","objFields","valueThunkOf","getDelegate","valueOf","setOf$1","asRaw","errs","extraction","errInfo","formatError","asRawOrDie","es","chooseProcessor","choose$1","anyValue$1","typedValue","expectedType","actualType","string","boolean","functionProcessor","isPostMessageable","every","iter","callbackFn","postMessageable","validateEnum","strict$1","strictOf","strictNumber","strictString","strictStringEnum","strictFunction","strictObjOf","objSchema","strictArrayOfObj","strictArrayOf","optionOf","optionNumber","optionString","optionFunction","optionObjOf","defaulted$1","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedObjOf","state$1","documentPositionContainedBy","isSource","component","simulatedEvent","nu$4","fuse","can","all$1","abort","any","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitionend","selectstart","alloy","tap","postBlur","postPaste","receive","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight","dehighlight","dispatchWith","emitWith","emitExecute","dispatch","getSystem","triggerEvent","dispatchEvent","derive","configs","prevent","runActionExtra","runOnSourceName","redirectToPart","partName","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute","runOnName","getOpt","shallow$1","getHtml","originator","isRecursive","DefaultEvents","idAttr","prefix$1","idAttr$1","writeOnly","writable","generate$2","NoContextApi","getComp","debugInfo","triggerFocus","triggerEscape","build","addToWorld","removeFromWorld","addToGui","removeFromGui","broadcast","broadcastOn","broadcastEvent","isConnected","singleton","cleanParameters","parameters","endsWith","markAsExtraApi","extraName","openBracketIndex","toFunctionAnnotation","premadeTag","premade","comp","makeApi","apiFunction","markAsSketchApi","getApis","NoState","nu$5","readState","byInnerKey","indexKey","chain","nu$6","curryArgs","descHandler","extraArgs","purpose","cHandler","getCurried","behaviourTuple","groupByEvents","behaviours","behaviourEvents","behaviour","nameToHandlers","assemble","rawHandler","fuse$1","tuples","eventOrder","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","missingOrderError","combineGroups","byEventName","assembled","uncurried","toEvents","read$2","supported","isSupported$1","isOpenShadowHost","shadowRoot","internalSet","setProperty","internalRemove","set$2","setAll$1","setOptions","isValidValue","reflow","set$3","renderToDom","definition","subject","innerHtml","domChildren","generateFrom$1","validated","optBlobThunk","config","generateFrom","generate$3","getBehaviours$1","getDomDefinition","bList","bData","defnA","mod","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine","getEvents","baseEvents","combine$1","getMe","systemApi","toInfo","bBlob","getBehaviours","modDefinition","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","buildFromSpec","userSpec","specEvents","build$1","buildSubcomponents","completeSpec","external","extSpec","uids","getPremade","userSpecWithUid","prebuilt","premade$1","get$6","getOuter$1","getOuter$2","fromRawEvent","rawEvent","eventAny","composed","getOriginalEventTarget","kill","mkEvent","binder","useCapture","bounds$1","xy","absolute$1","EventConfiguration","ancestor$2","descendant$1","closest$3","manager","ariaId","unlink","isAriaPartOf","queryElem","find$4","isPartOf","AttributeValue","eventConfig","processEvent","initialTarget","NORMAL","noLogger","LOGGING","logger","sequence","logEventCut","_name","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","finishTime","makeEventLogger","STOP","monitorEvent","menuFields","itemFields","itemSchema","_initSize","tieredMenuMarkers","onPresenceHandler","lines","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","initSize","nu$7","boundsRestriction","adt$2","southeast","southwest","northeast","northwest","south","north","east","west","restrictions","restriction","getRestriction","eastX","middleX","westX","northY","southY","centreY","southeast$1","bubbles","southwest$1","northeast$1","northwest$1","north$1","south$1","east$1","eastEdgeX","west$1","westEdgeX","all$2","allRtl","aboveOrBelow","belowOrAbove","belowOrAboveRtl","loadEvent","bConfig","bState","_simulatedEvent","wrapApi","bName","apiName","markAsBehaviourApi","revokeBehaviour","doCreate","configSchema","schemaSchema","getConfig","wrappedApis","apiF","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","modeSchema","createModes$1","modes","createModes","branchKey","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","Receiving","ActivePosition","posConfig","useFixed","focus$1","ownerDoc","refocus","focused","child_1","oldFocus","newFocus","NuPositionCss","applyPositionCss","addPx","adt$3","positionWithDirection","posName","decision","decisionX","decisionY","decisionRight","decisionBottom","cata","toBox","origin","viewport$1","outerScroll","box$1","anchorBox","cycleBy","adt$4","fit","nofit","attempt","candidateX","candidateY","bubbleOffsets","bubbleLeft","bubbleTop","adjustedBounds","boundsRestrictions","applyRestriction","bubbleOffset","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","boundsY","boundsBottom","boundsX","boundsRight","newY","newX","boundsWidth","boundsHeight","xInBounds","yInBounds","originInBounds","sizeInBounds","deltaW","deltaH","limitX","limitY","calcReposition","upAvailable","downAvailable","maxHeight","cataVertical","westAvailable","eastAvailable","maxWidth","cataHorizontal","classesOn","classesOff","candidateYforTest","layout","options","elementBox","panelWidth","panelHeight","attemptBestFit","newReposition","newDeltaW","newDeltaH","bestNext","attempts","preference","setMaxHeight","absMax","setMax","anchored","available","expandable","defaultOr","dephault","go","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$8","yoffset","getClasses","xDelta","yDelta","alignmentsOn","alignmentsOff","innerNorthwest","innerNortheast","innerNorth","innerSouthwest","innerSoutheast","innerSouth","innerWest","innerEast","onDirection","isLtr","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$1","get$a","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","placer","MakeshiftAnchor","adt$5","adt$6","relativeToNative","finishSitu","setFinish","exactToNative","toRect","adt$7","fromRange","diagnose","rev","doDiagnose","api$2","elementsWithCursorPosition","isCursorPosition","descendantRtl","after$2","makeRange","same","doGetExact","firstRng","getFirstRect$1","getFirstRect","asLtrRange","descendOnce","get$b","adt$8","screen","toFixed","points","sumAsAbsolute","absolute$2","getRootPoint","frame","frameOwner","compOwner","capRect","newLeft","newTop","newWidth","newHeight","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","descendOnce$1","point$1","getAnchorSelection","getExact","modStart","modFinish","SelectionAnchor","selectionBox","rawRect","NodeAnchor","nodeBox","eastX$1","westX$1","northY$1","southY$1","southeast$2","southwest$2","northeast$2","northwest$2","all$3","allRtl$1","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","place","anchoring","placee","overrideOptions","positionWithin","posState","boxElement","boundsBox","positionWithinBounds","anchorage","oldVisibility","getRelativeOrigin","placement","doPlace","vis","PositionApis","getMode","pConfig","_pState","PositionSchema","Positioning","fireDetaching","fireAttaching","attach","replaceChildren","newChildren","childComp","detachChildren","deleted","attach$1","attachWith","insertion","doDetach","detach","parent$1","detachChildren$1","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","newState","onOpen","onClose","isOpen","_sandbox","_sConfig","cloak","_sState","sink","cssKey","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","getState","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$2","receivingChannel","rawSpec","isExtraPart","fireEventInstead","fe","schema$3","receivingChannel$1","doReposition","onLoad","repConfig","repState","onUnload","RepresentApis","setValue","getValue","ActiveRepresenting","resetOnDom","_se","memory","isNotSet","dataset","dataByValue","dataByText","itemString","update","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","manual","setValue$1","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","field$1","forbidden","_v","get$c","dump","augment","SketchBehaviours","adt$9","single","multiple","isSubstituted","scan","compSpec","placeholders","uiType","newSpec","subPlaceholder","substitute","req","valueThunk","childSpecs","substituted","valuesThunk","preprocess","preprocessor","substitutePlaces","ph","replacements","used","substituteAll","adt$a","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine$2","partSpec","partValidated","generate$4","np","doGenerateOne","pname","generateOne","schemas","substitutes","internals","externals","factory","_partSpec","_partValidated","units","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","_k","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","asRawOrDie$1","partSchemas","partUidsSchemas","baseS","composite","specWithUid","supplyUid","partUidsSchema","hasUid","FocusInsideModes","singleSchema","compositeSchema","single$2","rawConfig","extraApis","configFields","single$1","composite$1","partFields","ComposeApis","getCurrent","composeConfig","_composeState","ComposeSchema","Composing","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight$1","isHighlighted","onHighlight","queryTarget","getByIndex","itemClass","getFirst","_hState","getLast","getDelta","dest","getCandidates","HighlightApis","dehighlightAll","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","highlightBy","getHighlighted","getPrevious","HighlightSchema","Highlighting","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","preds","isShift","isControl","isNotShift","classification","reportFocusShifting","prevFocus","focusee","highlights","initialState","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","cyclicField","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","goFromTabstop","stopIndex","cycle","useTabstopAt","isTabstop","cyclic","findCurrent","tabstop","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$4","execute$1","executeConfig","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","useH","use","west$2","moveLeft","moveRight","east$2","useV","north$2","south$2","locateVisible","locate","withGrid","numCols","address","newIndex","column","cycleHorizontal","oldRow","oldColumn","colsInRow","newColumn","cycleVertical","newRow","newCol","schema$5","gridConfig","_gridState","doMove","gridState","identified","handleTab","captureTab","moveNorth","moveSouth","getKeydownRules$1","getKeyupRules$1","FlatgridType","horizontal","tryCycle","schema$6","execute$3","flowConfig","findCurrent$1","focusIn$1","getInitial","moveLeft$1","moveRight$1","doMove$1","flowState","executeOnMove","doEscape$1","getKeyupRules$2","FlowType","_flowState","westMovers","allowVertical","eastMovers","matrix","rowIndex","columnIndex","cycleHorizontal$1","startCol","deltaCol","newColIndex","cycleVertical$1","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$7","focusIn$2","matrixConfig","previousSelector","doMove$2","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","toMatrix","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$3","getKeyupRules$3","MatrixType","schema$8","execute$5","menuConfig","focusIn$3","moveUp$1","moveDown$1","getKeydownRules$4","menuState","moveOnTab","getKeyupRules$4","MenuType","schema$9","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","flatgrid$1","execution","menu","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","replaceConfig","childSpec","replaceState","removee","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","Replacing","appendee","prependee","replaceBy","replaceePred","eventHandlers","events$4","focus$2","focusConfig","onFocus","FocusApis","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","toggleState","ariaInfo","aria","updateClass","set$6","on$1","onLoad$4","ToggleApis","isOn","ActiveToggle","toggleOnExecute","updateExpanded","ToggleSchema","pressed","syncWithExpanded","expanded","Toggling","pointerEvents","onClick","events$7","optAction","onHover","hover","focus$3","schema$a","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$b","schema$c","components$1","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$1","separator","parts$1","itemInfo","builder","fakeFocus","schema$d","grid","movementInfo","rowSelector","focus$4","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","generate$5","menus","expansions","menuPaths","_triggerItem","extractPreparedMenu","prep","LayeredState","primary","getTriggerData","menuValue","getItemByValue","getPreparedMenu","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","refresh","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","extraPath","revPath","menuIndex","collapseItem","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","componentMap","primaryName","makeSketch","nbMenu","buildMenus","toDirectory","getItemValue","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX$1","middleX$1","eastEdgeX$1","northY$2","southY$2","southeast$3","southwest$3","northeast$3","northwest$3","north$3","south$3","global$2","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","record","isSketchSpec","anyInSystem","asSpec","defaultIcon","get$d","getFirst$1","notificationIconMap","warning","Notification","memBannerText","translationProvider","renderPercentBar","renderPercentText","memBannerProgress","updateProgress","updateText","text$1","banner","iconChoices","iconProvider","closeButton","onAction","NotificationManagerImpl","extras","uiMothership","backstage","closeCallback","hideCloseButton","notificationWrapper","shared","providers","getSink","isPositionedAtTop","moveTo","layoutDirection_1","getLayoutDirection","nodeAnchor","anchors","nuText","getEl","prePositionNotifications","firstItem","positionNotifications","ItemResponse","global$3","repeatLeft","create$4","detect$4","stripTriggerChar","triggerCh","findStart","initRange","minChars","findChar","spot","triggerChar","AutocompleterEditorEvents","onKeypress","redirectKeyToItem","getView","isActive","cancelIfNecessary","isMenuOpen","isProcessingAction","global$4","point$2","toLast","TEXT_NODE","toLeaf","ELEMENT_NODE","isStartOfWord","leaf","isPreviousCharContent","getDatabase","database","triggerChars","getTriggerContext","lookupWithContext","fetchOptions","startText","autocompleters","lookupByChar","autocompleter","lookupData","ac","fetch","maxResults","columns","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","popup","stringArray","datasetValues","dv","ToolbarMode","ItemResponse$1","navClass","selectableClass","presetClasses","normal","textClass","activeClass","classForPreset","presets","forMenu","hasIcons","markers$1","menuClasses","dom$1","chunk$1","rowDom","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","commonMenuItemFields","choiceMenuItemSchema","fancyMenuItemSchema","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","selectorClass","columnLength","thisTop","cTop","ceil","namedEvents","SimpleBehaviours","TooltippingSchema","TooltippingState","clearTimer","getTooltip","isShowing","setTooltip","clearTooltip","resetTimer","delay","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","tooltip","Tooltipping","tooltipConfig","tooltipDom","tooltipComponents","global$5","global$6","nativeDisabled","onLoad$5","disableConfig","disableState","disable","enable","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","ActiveDisable","DisableSchema","Disabling","global$7","getHeightSetting","getWidthSetting","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerElement","fixedContainerSelector","useFixedContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyDataSchema","broadcastReadonly","uiComponents","outerContainer","mothership","setupReadonlyModeSwitch","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onSetup","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$8","convertText","updated","segment","renderIcon","iconHtml","renderText","renderStyledText","renderShortcut","renderCheckmark","renderNormalItemStructure","renderIcons","textRender","rtlClass","leftIcon","checkmark","checkMark","domTitle","ariaLabel","htmlContent","renderHtml","shortcutContent","rtlIcon","rtlTransform","renderItemStructure","providersBackstage","fallbackIcon","iconName","needRtlClass","iconContent","itemText","iconSvg","providerBackstage","baseDom","renderColorStructure","tooltipBehaviour","sharedBackstage","tooltipWorker","_tooltip","replaceText","encoded","encodeText","escapedMatchRegex","escapeRegExp","parts$2","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","makeComponents","cellRow","makeLabelText","hexColour","shorthandRegex","longformRegex","isHexString","extractValues","longForm","getLongForm","splitForm","fromRgba","rgbaColour","red","green","blue","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","fromHex","fromStringValues","rgba","fireResizeContent","global$9","choiceItem","defaultColors","colorCache","storageString","localstorage","ColorCache","hasCustomColors","getColors","unmapped","getColorMap","colorMap","colors","canvas","ctx","byteAsHex","colorByte","alphaByte","asHexColor","clearRect","fillStyle","fillRect","getImageData","mapColors","addColor","getColorCols$1","defaultCols","getColorCols","calcCols","applyColor","onChoice","colorPickerDialog","colorOpt","getColors$1","hasCustom","getAdditionalColors","getFetch","setIconColor","splitButtonApi","newColor","pathId","setIconFill","setIconStroke","registerTextColorButton","lastColor","getCurrentColor","currentRgb","rgbaString","rgbMatch","rgbaMatch","fromString","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","getSubmenuItems","fancytype","initialData","colorpicker","getOnSubmit","onSubmit","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","setDisabled","_api","renderChoiceItem","deriveMenuMovement","menuMarkers","FocusMode","fancyMenuItems","inserttable","sizeLabelId","makeCells","memLabel","selectedRow","selectedColumn","selectCells","colorswatch","colorinput","widgetSpec","autocomplete","nested","downwardsCaret","renderSubmenuCaret","toggle$1","fancy","valueOpt","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","createToggleMenuItem","createSeparatorMenuItem","createFancyMenuItem","createAutocompleteItems","createAutocompleterItem","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","hideIfNecessary","lastElement","getAutocompleters","ld","focusMode","ContentFocus","createMenuFrom","doLookup","lookupInfo","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","autocompleterUiApi","bind$3","bind$2","capture$1","fromRawEvent$1","closest$4","DelayedFunction","schedule","monitor","longpress$1","fireIfReady","settingsSchema","rawSettings","tapEvent","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","stopBackspace","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive$2","rawTarget","getTarget","adt$b","stopped","resume","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","_logger","fromExternal","triggerOnUntilStopped","EventRegistry","registerId","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","Registry","readOrTag","tagId","conflict","failOnDuplicate","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","schema$e","parts$3","excludeFactory","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderCollection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","childElm","htmlLines","mapItemName","schema$f","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","dom$2","inputAttributes","inputStyles","inputClasses","Input","HighlightOnOpen","nu$a","make$3","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","run$1","onValidate","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","Coupling","coupled","partType","getAnchor","getHotspot","getAnchorOverrides","open$1","mapFetch","onOpenSync","highlightOnOpen","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","close$1","_onOpenSync","_highlightOnOpen","togglePopup","matchWidth","useMinWidth","buttonWidth","set$4","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox","ariaOwner","sandboxClasses","sandboxBehaviours","sandboxFields","schema$g","parts$4","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","colorButton","_field","hsvColour","fieldsUpdate","sliderUpdate","paletteUpdate","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","SliderParts","getValueFromEvent","spectrum","sliderChangeEvent","getEventSource","isTouchEvent","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","range$2","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","initValue","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue","maxOffset","centerMinEdge","centerMaxEdge","getBounds$1","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$1","sliderValue","findValueOfOffset","handleMovement","moveBy","findPositionOfValue","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","HorizontalModel","sliderVal","setToMin","setToMax","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$2","sliderValue$1","findValueOfOffset$1","handleMovement$1","moveBy$1","findPositionOfValue$1","findOffsetOfValue$2","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange$3","sliderValue$2","handleMovement$2","isVerticalMovement","moveBy$2","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","changeValue","onChange","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","getInitialValue","onInit","resetToMin","resetToMax","sliderFactory","getClass","_thumb","schema$h","getPartName","make$4","formBehaviours","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","rgbFormFactory","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","translatePrefix","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","setValueRgb","onInvalidInput","onValidRgb","hexField","copyRgbToHex","onValidInput","isHexInputEvent","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","paletteFactory","_translate","spectrumPart","thumbPart","setColour","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_slider","setRgba","_apis","setSliderColour","makeFactory","updates","rgbForm","onInvalidHex","sbPalette","paletteRgba","memPalette","memRgb","updatePalette","palette","updateFields","runUpdates","hsvColour$1","fromRgb","newHsvColour","nuHex","calcHex","sliderUpdates","ComposingConfigs","mem","english","translate$1","getEnglishText","global$a","processors","withComp","optInitialValue","setter","RepresentingConfigs","rawProcessors","other","postprocess","renderDropZone","actions","onDrop","transferEvent","handleFiles","onSelect","re","filterByExtension","memInput","accept","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","onFocus$1","targetComp","isPseudoStop","platformNeedsSandboxing","renderIFrame","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","getDynamicSource","tCanvas","get2dContext","drawImage","naturalWidth","getHeight","naturalHeight","Promise$1","dataUriToBlob","mimetype","byteCharacters","bytesLength","slicesCount","byteArrays","sliceIndex","begin","bytes","dataUriToBlobSync","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","blobToCanvas","blobUrl","blobToImage","revokeImageUrl","getCanvas","initialType","toAdjustedDataURL","canvasToDataURL","getType","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","fromCanvas","clamp$1","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","colorFilter","ir","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","applyColorFilter","convoluteFilter","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","applyConvoluteFilter","complexAdjustableColorFilter","matrixAdjustFn","adjust","kernel","colorFn","invert","basicColorFilter","contrast","colorize","adjustR","adjustG","adjustB","adjustColors","sharpen","gamma","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","rotate","angle","translateX","translateY","PI","applyRotate","axis","applyFlip","crop","applyCrop","invert$1","sharpen$1","gamma$1","brightness$1","contrast$1","flip$1","resize$2","newCanvas","resize$1","rotate$1","renderIcon$1","renderIconFromPack","iconsProvider","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayText","displayIcon","separator$1","unwrapReferences","realItems","isMenuItemReference","getFromItem","isExpandingMenuItem","submenuItems","getFromExpandingItem","itemWithValue","generateValueIfRequired","newData","build$2","mainMenu","submenus","getMenuButtonApi","renderMenuButton","getFetch$1","getButton","getMenuItemAction","getMenuItemSetup","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","renderDialogButton","schema$i","coupledPart","selfName","otherName","lock","onLockedChange","parts$5","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","makeRatioConverter","currentFieldText","otherFieldText","cValue","oValue","cSize","oSize","ratioSizeConversion","renderSizeInput","converter","ratioEvent","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","optCurrent","optOther","value1","value2","zoom","back","swap","tempTransform","transformApply","saveState","disable$1","enable$1","external$2","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","createSpacer","createApplyButton","makeCropTransform","crop$1","cropPanelComponents","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","makeResizeTransform","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","colorize$1","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","global$b","global$c","global$d","global$e","global$f","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","handleElement","drag","cursor","docSize","getDocumentSize","runtimeStyle","zIndex","CropRect","currentRect","viewPortRect","dragHelpers","handles","xMul","yMul","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","setInnerRect","repaint","updateElementRect","setRect","relativeRect","blocker","activeHandle","moveAndBlock","toggleVisibility","setClampRect","getInnerRect","setViewPortRect","helper","renderImagePanel","initialUrl","memBg","zoomState","rectState","viewRectState","repaintImg","panelW","panelH","bg","cRect","updateSrc","aImg","lastViewRect","viewRect","zoomFit","currentZoom","newZoom","setButtonEnabled","Delimiter","makeState","blobState","tempState","undoStack","canUndo","canRedo","UndoStack","setBlobState","createState","destroyState","destroyTempState","addBlobState","getBlobState","getTempState","updateTempState","newTempState","addTempState","applyTempState","postApply","currentState","getHistoryStates","undoEnabled","redoEnabled","renderImageTools","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","unblock","editPanel","applyButton","blobManipulate","blobToImageResult","oImg","manipulate","currentUrl","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","attemptSelectOver","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","itemExecute","schema$j","parts$6","previewing","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","nu$c","worker","FutureResult","separator$2","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","getLinkInformation","history","historyTargets","getHistory","errorId","make$6","factories","bar","interpreter","renderBar","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel$2","iframeSpec","makeIframe","checkbox","repBehaviour","toggleCheckboxHandler","makeIcon","memIcons","renderCheckbox","colourPickerFactory","memPicker","picker","dropzone","renderGrid","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","updateHistory","urlEntry","addToHistory","filetype","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","ea","cvalue","htmlpanel","imagetools","renderTh","renderTd","renderTr","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","getNodeAnchor","getAnchors","isToolbarTop","useFixedToolbarContainer","inlineDialog","hasCustomColors$1","getColors$2","getColorCols$2","ColorInputBackstage","isDraggableModal$1","isDraggableModal","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","customFormats","isInlineFormat","isBlockFormat","isSelectorFormat","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","doEnrich","newItems_1","enrichMenu","getStyleItems","enrichSupported","customSpec","newItem","enrichCustom","init$7","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","getElementText","isValidAnchor","isAnchor","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","getTargetElements","hasTitle","LinkTargets","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","getPicker","getFilePickerCallback","getPickerSetting","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","getPickerTypes","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","entry","init$8","contextMenuState","getDockingMode","setDockingMode","HeaderBackstage","interpretWithoutForm","styleselect","isContextMenuOpen","setContextMenuState","expandable$1","setMax$1","schema$k","parts$7","ToolbarGroup","tgroupBehaviours","itemSelector","schema$l","parts$8","Toolbar","getGroupContainer","shell","toolbarBehaviours","setGroups","output$1","within","withinWidth","apportion","parray","toUnit","partition$3","overflower","divide","tryFit","fits","fitLast","fitAll","storedGroups","bGroups","setOverflow","overflowGroup","builtGroups","focusedComp","focusedElm","availableWidth","overflows","schema$m","schema$n","parts$9","schema$o","parts$a","toggledClass","toggle$2","toolbarSandbox","position$2","bounder","setGroups$1","FloatingToolbarButton","makeSandbox$1","getToolbar","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isTransitioning","toggleGrow","ActiveSliding","propertyName","onGrown","SlidingSchema","Sliding","schema$p","parts$b","onClosed","onOpened","refresh$3","SplitSlidingToolbar","_button","overf","doSetGroups","toggleToolbar","toolbarHeightChange","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","headerElem","moreDrawerData","lazyHeader","headerBounds","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","groupToolbarButtonSchema","props_1","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","ReflectingApis","reflectState","ActiveReflecting","reflectingConfig","reflectingState","updateState","renderComponents","newComponents","channel","rawData","ReflectingState","optS","ReflectingSchema","Reflecting","schema$q","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$c","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","rtlIcon$1","rtlTransform$1","renderCommonStructure","getIconName","needsRtlClass","renderCommonToolbarButton","specialisation","itemApi","buttonApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","runOnExecute$1","formApi","getFormApi","generateOne$1","bridged","renderContextToggleButton","renderContextButton","buildInitGroups","findPrimary","mementos","asSpecs","compInSystem","generate$7","ContextForm","getContextToolbarBounds","contentAreaBox","toolbarOrMenubarEnabled","contentBoxWidth","maxViewportWidth","getHorizontalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","matchTargetWith","ctxs","toolbarApi","contextForms","matchStartNode","nodeCandidates","editorCandidates","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchAncestor","scopes","ancestorElem","inNodeScope","findPosition_1","filterByPositionForAncestorNode","categorise","inEditorScope","formNavigators","lookupTable","registerForm","contextForm","launch","registerToolbar","contextToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","generateSelectItems","generateItem","rawItem","si","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","setInitialValue","getComponent","nodeChangeHandler","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","getSpec","updateSelectMenuIcon","alignment","_format","systemStackFonts","splitFonts","getSpec$1","getMatchingValue","getFirstFont","matchOpt","isSystemFontStack","updateSelectMenuText","legacyFontSizes","toPt","precision","factor","getSpec$2","_loop_1","pt","legacy","toLegacy","Space","findNearest","getStyles","getCurrentSelectionParents","onSetupFormatToggle","unbindCell","onActionToggleFormat","getSpec$3","getSpec$4","getFormatItems","flattenedItems","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","buttonComp","renderSplitButton","grouptoolbarbutton","TopToBottom","floating","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","createToolbar","toolbarConfig","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","lookupButton","toolbarItem","prefixes","extractFrom","toolbarGroups","bubbleAlignments$1","anchorOverrides","desktopAnchorSpecLayouts","mobileAnchorSpecLayouts","register$4","registryContextToolbars","contextbar","currentWidth","newContents","oldContents","forwardContents","shouldContextToolbarHide","nodeBounds","diffTop","aTop","aBottom","bTop","bBottom","lastElementBounds","ele","contextToolbarBounds","forceHide","hideOrRepositionIfNecessary","lastAnchor","contextBarEle","wrapInPopDialog","_comp","getScopes","alloySpec","buildToolbar","allButtons","toolbarType","default","buildContextToolbarGroups","buildContextMenuGroups","toolbarKey","launchContext","getAnchorLayout","sElem","launchContextToolbar","rootElem","isOutsideRoot","lookup$1","parts$d","partType$1","schema$r","itemsPart","parts$e","name$2","CustomList","_external","getListContainer","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","getOffsetParent","offsetParent$1","getOrigin","morphAdt","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPosition","revertToOriginal","setInitialPosition","offsetBox_1","_left","_top","_right","_bottom","morphToFixed","getModes","storePrior","winBox","isTop","getMorph","morphToOriginal","morphToStatic","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextInfo","lazyContext","isPartiallyVisible","setVisible","resetInternal","setDocked","getMorphToOriginal","morph","refresh$4","lazyViewport","isDocked","refreshInternal","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","defaultedArrayOf","DockingState","docked","visible","initialBounds","Docking","updateIframeContentFlow","parentElem","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","getBehaviours$2","runOnSinkElement","onDockingSwitch","additionalBehaviours","headerHeight","boxHeight","topBound","focusedElem","activeElm","findFocusedElem","StickyHeader","containerHeader","scrollPos","markerElement","markerPos","markerHeight","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","isDocked$2","getBehaviours$3","StaticHeader","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","schema$s","getPartName$1","make$7","getSlotNames","onSlot","def","slot","doShowing","_key","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","createSidebar","sidepanel","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","fromHtml$2","getAttrs","renderSpinner","lazyThrobber","throbberState","toggleThrobber","timerId","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","sliding","toolbarFactory","renderer","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","getThrobber","focusToolbar","setMenubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","menuData","removedMenuItems","getRemovedMenuItems","removedMenuItem","make$8","fireSkinLoaded$1","fireSkinLoaded","loadSkin","skinUiCss","skin","skinName","getSkinUrl","isSkinDisabled","fireSkinLoadError","fireSkinLoadError$1","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","fireScrollContent","elementLoad","setupEvents","socket","limit","toolbarMode","unbindable","doRevoke","isSet","revocable","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getHeightWithFallback","baseHeight","minHeight","getHeight$1","getWidth$1","baseWidth","minWidth","InlineHeader","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","toolbar_1","toolbarHeight","docHeight","calcMode","verticalDir","setupMode","getTargetPosAndBounds","Inline","uiContainer","getUiContainer","prevPosAndBounds","resizeContent","prevBounds","hasResized","setupEvents$1","registerButtons","_idx","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","register$6","registerMenuItems","toggleUndoRedoState","checkState","onUndoStateChange","register$7","registerMenuItems$1","registerButtons$1","register$a","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","alignNoneToolbarButton","register$5","registerCommands","lastForeColor","lastBackColor","registerToolbarButton","onVisualAid","toggleVisualAidState","registerMenuItems$2","register$8","toggleOutdentState","registerButtons$2","register$9","nu$d","isTouchEvent$1","transposeContentAreaContainer","containerPos","dx","dy","transpose$1","getPointAnchor","fromPageXY","fromClientXY","getSelectionAnchor","getNodeAnchor$1","initAndShow","buildMenu","contextmenu","isTriggeredByKeyboardEvent","anchorSpec","getAnchorSpec","bubbleAlignments$2","getAnchorSpec$1","initAndShow$1","openiOS_1","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","getContextMenu","defaultItems","getMenuItems","isSeparator$1","separator$3","makeContextItem","addContextMenuGroup","groupItems","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","pointerType","isTriggeredByKeyboard","selectedElement","allItems","generateContextMenu","hideEvents","adt$c","subtract","transform$1","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","absolute$3","fixed$1","parseAttrToInt","NaN","getCoords","snapInfo","snapsInfo","leftAttr","topAttr","get$e","moveOrSnap","newCoord","mustSnap","findClosestSnap","findSnap","fixedCoord","set$8","spanned","stopDrag","findMatchingSnap","snaps","sensor","coord1","coord2","withinRange","getSnapPoints","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","repositionTarget","snapPin","instigate","anyComponent","zindex","changeZIndex","discard","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$t","getCurrentCoord","calcNewCoord","optSnaps","currentCoord","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcStartData","dragState","dragMode","dragStartData","getStartData","dlt","onDrag","dragBy","updateStartState","setStartData","MouseData","events$g","stop$1","delayDrop","dragApi","forceDrop","init$c","schema$u","TouchData","getDataFrom","events$h","blockerCell","init$d","mouse","mouseOrTouch","Dragging","dragger","dragEvent","nuData","calculateDelta","calcSnap","selectorOpt","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","tlTds","brTds","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","resize$3","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","isHidden$1","renderElementPath","newPathElements","divider","newPath","updatePath","_btn","newAcc","renderStatusbar","getTextComponents","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","None","Vertical","getResizeType","renderResizeHandlerIcon","getComponents","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","memAnchorBar","throbber","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onWindowScroll","onWindowResize","onEditorResize","setEditorSize","parsedHeight","parsedWidth","getWidthWithFallback","handleToggle","getToolbarGroups","toolbarGroupButtonConfig","toolbarOpt","getUi","broadcastAll","schema$x","basic","parts$f","dragBlockClass","getDragBounds","ModalDialog","dialogBusyEvent","dialogIdleEvent","busyBehaviours","modalEventsId","busyComp","externalBlocker","_blocker","bc","getBusySpec","busySpec","busy","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseButtonFields","dialogButtonFields","normalButtonFields","menuButtonFields","dialogButtonSchema","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","iframeFields","iframeSchema","iframeDataProcessor","inputFields","inputSchema","inputDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","customEditorFields","defaultedPostMsg","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","htmlPanelFields","htmlPanelSchema","imageToolsFields","imageToolsSchema","collectionFields","collectionSchema","collectionDataProcessor","createLabelFields","tableFields","tableSchema","createItemsField","itemSchema$2","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields$1","dialogButtonSchema$1","dialogSchema","tabpanel","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","urlDialogButtonSchema","urlDialogSchema","optionArrayOf","extract$1","internalDialog","dataValidator","DialogManager","redial","toValidValues","renderBodyPanel","memForm","formValue","vals","TabButton","tabButtonBehaviours","schema$y","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$g","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","schema$z","barPart","tabs","viewPart","parts$h","TabSection","changeTabBy","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","allTabs","smartTabHeight","extraEvents","tabviewComp","maxTabHeightOpt","heights","getMaxHeight","_tab","measureHeights","oldHeight","naiveTabHeight","renderTabPanel","storedValue","updateDataWithForm","validData","currentData","setDataOnForm","oldTab","tabMode","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","getEventExtras","lazyDialog","closeWindow","onBlock","blockEvent","bs","onUnblock","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialog","currentDialogInit","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","memButton","makeButton","lookupByName","buttonName","lookup$2","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","prevData","mergedData","newInternalData","dialogState","validateData","tabSection","dialogInit","renderDialog$1","bodySpec","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","outerForm","renderInlineDialog","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","global$g","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","renderIframeBody","iframeUri","iframeDomain","messageHandlerUnbinder","handleMessage","isCustomMessage","onMessage","unbinder","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","isStickyToolbar$1","alertDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","confirmDialog","memFooterYes","footerNo","footerYesButton","openModalUrlDialog","openModalDialog","internalInitialData","openInlineDialog","config$1","refreshDocking","dialogUi","inlineDialogComp","isAlertOrConfirmDialog","windowMgr","firePastePlainTextToggle","clipboard","pasteFormat","togglePlainTextPaste","pasteHtml","pasteText","isMarked","toBlockElements","rootTag","rootAttrs","tagOpen","openContainer","tagClose","paragraphs","shouldPasteDataImages","shouldMergeFormats","getRetainStyleProps","getValidate","getAllowHtmlDataUrls","getPasteDataImages","s1","s2","isMsEdge","isWordContent","isNumericList","convertFakeListsToProperLists","currentListNode","prevListNode","txt","trimListStart","convertParagraphToLi","paragraphNode","listName","_listLevel","removeIgnoredNodes","_listIgnore","nodeText","filterStyles","outputStyles","shouldUseDefaultFilters","retainStyleProperties","spaces","getWordValidElements","shouldConvertWordFakeLists","filterWordContent","processResult","cancelled","filterContent","isWordHtml","preProcessArgs","wordContent","firePastePreProcess","filteredContent","preProcess$1","tempBody","postProcessArgs","firePastePostProcess","postProcessFilter","isAbsoluteUrl","isImageUrl","linkSelection","pasteHtmlFn","createLink","insertImage","createImage","pasteAsText","isSmartPasteEnabled","smartInsertContent","isNewLineChar","pcIsSpace","isNewline","doPaste","pasteHtml$1","internalFlag","unmark","encodedText","toBRs","getDataTransferItems","legacyText","contentType","hasContentType","clipboardContent","mimeType","hasHtmlOrText","pasteImage","imageItem","getImagesReuseFilename","extractFilename","existingBlobInfo","pasteImageData","getAsFile","getImagesFromDataTransfer","blobResults","isKeyboardPasteEvent","registerEventHandlers","pasteBin","keyboardPastePlainTextState","keyboardPasteEvent","insertClipboardContent","isKeyBoardPaste","plainTextMode","isDefaultContent","isPlainTextHtml","ignoreElements","removePasteBinOnKeyUp","ieFake","firePaste","clipboardEvent","getClipboardContent","isBrokenAndroidClipboardEvent","getLastRng","getPasteBinParent","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isExternalPasteBin","isDefault","PasteBin","lastRngCell","pasteBinClone","copyAndRemove","toElm","fromElm","pasteBinClones","dirtyWrappers","cleanWrapper","Clipboard","isWebKitFakeUrl","isDataUri","isPasteInsert","registerEventsAndFilters","setHtml5Clipboard","hasWorkingClipboardApi","setClipboardData","markedHtml","mark","contenteditable","offscreenRange","hasSelectedContent","isTableSelection","rng_1","getCaretRangeFromEvent","setFocusedRange","addPreProcessFilter","filterFunc","removeExplorerBrElementsAfterBlocks","removeWebKitStyles","webKitStyles","webKitStylesSetting","getWebkitStyles","shouldRemoveWebKitStyles","dom_1","node_1","removeUnderlineAndFontInAnchor","makeSetupHandler","pastePlainTextToggleHandler","hasProPlugin","draggingInternallyState","isPasteAsTextEnabled","addPostProcessFilter","setup$2","getPreProcess","getPostProcess","shouldBlockDrop","plainTextContent","dropContent","shouldFilterDrop","content_1","assumeExternalTargets","externalTargets","getDefaultLinkTarget","getTargetList","getRelList","shouldShowLinkTitle","allowUnsafeLinkTarget","getDefaultLinkProtocol","sanitizeWith","extracter","extractValue","sanitizeList","ListOptions","sanitize","createUi","hasRtcPlugin","hasProtocol","getHref","applyRelTargetRules","isUnsafe","removeTargetRules","newRels","addTargetRules","getAnchorElement","isImageFigure","getAnchorText","anchorElm","trimCaretContainers","isLink","hasLinks","isOnlyTextSelected","applyLinkOverrides","linkAttrs","newLinkAttrs","handleExternalTargets","linkDomMutation","attachState","getLinkAttrs","updateLink","linkImageFigure","unwrapOptions","unlinkImageFigure","unlinkDomMutation","fig","persistentText","catalog","hasPersistentText","findTextByValue","DialogChanges","linkSettings","onCatalogChange","catalogs","urlText","urlTitle","onUrlChange","tryEmailTransform","oldData","tryProtocolTransform","defaultLinkProtocol","DialogConfirms","delayedConfirm","AnchorListOptions","anchorNodes","ClassListOptions","getLinkClassList","LinkListOptions","extractor","linkList","getLinkList","parseJson","optItems","RelOptions","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","DialogInfo","linkNode","linkClass","extractFromAnchor","optNode","flags","titleEnabled","collectData","getChangedValue","changedData","pData","handleSubmit","titleText","getInitialData","dialogDelta","makeDialog","createEvent","initMouseEvent","appendClickRemove","getLink","getSelectedLink","gotoLink","targetEl","gotoSelectedLink","toggleActiveState","toggleEnabledState","setupButtons","setupMenuItems","setupContextMenu","onSetupLink","hasContextToolbar","collapseSelectionToEnd","setupContextToolbars","hasOnlyAltModifier","setupGotoLinks","useQuickLink"],"mappings":"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,GAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEF,SAASC,GAASC,EAASC,GAIzB,IAHA,IAEI5zM,EAFA6oL,EAAM,GACNruM,EAAM,IAAI9I,MAAM,IAEXzC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAIwM,EAAI,EAAGA,EAAI,EAAGA,IACrBotM,EAAIptM,GAAKm4N,EAAQn4N,EAAQ,EAAJxM,GAEvB,IAASwM,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1BukB,EAAM,EACN,IAAK,IAAI3mB,EAAI,EAAGA,EAAI,EAAGA,IACrB2mB,GAAO2zM,EAAQl4N,EAAQ,EAAJpC,GAASwvM,EAAIxvM,GAElCmB,EAAIiB,EAAQ,EAAJxM,GAAS+wB,GAGrB,OAAOxlB,EA4GT,SAASq5N,GAAYC,EAAInwC,GACvB,OAAOmwC,EAAGV,WAAWx2L,MAAK,SAAU0uK,GAClC,OAGJ,SAA0BA,EAAQv0M,EAAM4sL,GACtC,IAAI55J,EAAUmnM,GAAa5lB,GAgB3B,IAAIyoB,EAfJ,SAAqBC,EAAY3kO,GAG/B,IAFA,IAAIU,EAAGkB,EAAG0F,EAAGN,EACTutB,EAAOowM,EAAWpwM,KAAMqwM,EAAK5kO,EAAE,GAAI6kO,EAAK7kO,EAAE,GAAI8kO,EAAK9kO,EAAE,G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","file":"/js/editor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 41);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.4.1 (2020-07-08)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf(x);\n      var ty = typeOf(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf$1 = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf$1(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort$1 = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var equal = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray$1 = Array.isArray;\n    var toArray = function (obj) {\n      var array = obj, i, l;\n      if (!isArray$1(obj)) {\n        array = [];\n        for (i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n      }\n      return array;\n    };\n    var each$2 = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return 0;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return 0;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (o.hasOwnProperty(n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return 0;\n            }\n          }\n        }\n      }\n      return 1;\n    };\n    var map$2 = function (array, callback) {\n      var out = [];\n      each$2(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$2(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      var i, l;\n      if (a) {\n        for (i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var i = 0;\n      if (arguments.length < 3) {\n        accumulator = collection[0];\n      }\n      for (; i < collection.length; i++) {\n        accumulator = iteratee.call(thisArg, accumulator, collection[i], i);\n      }\n      return accumulator;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return domGlobals.window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var userAgent = domGlobals.navigator.userAgent;\n    var platform$1 = detect$3();\n    var browser = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser.isEdge();\n    var fileApi = 'FormData' in domGlobals.window && 'FileReader' in domGlobals.window && 'URL' in domGlobals.window && !!domGlobals.URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser.isOpera(),\n      webkit: webkit,\n      ie: browser.isIE() || browser.isEdge() ? browser.version.major : false,\n      gecko: browser.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: domGlobals.window.getSelection && 'Range' in domGlobals.window,\n      documentMode: browser.isIE() ? domGlobals.document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser.current,\n        version: browser.version,\n        isChrome: browser.isChrome,\n        isEdge: browser.isEdge,\n        isFirefox: browser.isFirefox,\n        isIE: browser.isIE,\n        isOpera: browser.isOpera,\n        isSafari: browser.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var is = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray$1(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty$1 = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    var create = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (ext.hasOwnProperty(name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$2(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve = function (n, o) {\n      var i, l;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode = function (s, d) {\n      if (!s || is(s, 'array')) {\n        return s;\n      }\n      return map$2(s.split(d || ','), trim$1);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$1,\n      isArray: isArray$1,\n      is: is,\n      toArray: toArray,\n      makeMap: makeMap,\n      each: each$2,\n      map: map$2,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty$1,\n      extend: extend,\n      create: create,\n      walk: walk,\n      createNS: createNS,\n      resolve: resolve,\n      explode: explode,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var getHead = function (doc) {\n      var b = doc.dom().head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var toArray$1 = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var is$1 = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq$2 = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.documentElement);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter(elements, function (x) {\n          return !eq$2(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray$1(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray$1(element, nextSibling);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom().childNodes.length;\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(domGlobals.Element.prototype.attachShadow) && isFunction(domGlobals.Node.prototype.getRootNode);\n    var getRootNode = supported ? function (e) {\n      return Element.fromDom(e.dom().getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Option.some(r) : Option.none();\n    };\n    var getShadowHost = function (e) {\n      return Element.fromDom(e.dom().host);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      return getShadowRoot(Element.fromDom(dom)).fold(function () {\n        return dom.ownerDocument.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom()) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$1 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var win = doc.defaultView;\n      win.scrollTo(x, y);\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect$3().browser.isSafari();\n      if (isSafari && isFunction(element.dom().scrollIntoViewIfNeeded)) {\n        element.dom().scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom().scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$2 = function (_win) {\n      var win = _win === undefined ? domGlobals.window : _win;\n      return Option.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? domGlobals.window : _win;\n      var doc = win.document;\n      var scroll = get$1(Element.fromDom(doc));\n      return get$2(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left(), scroll.top(), width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left()), Math.max(visualViewport.pageTop, scroll.top()), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$1 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        var i, cssValue;\n        if (isElement$1(node)) {\n          for (i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$1(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus = function (node) {\n      return isElement$1(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll = function (node) {\n      return isElement$1(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable = function (node) {\n      return isElement$1(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$1(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$1 = isNodeType(3);\n    var isComment$1 = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment$1 = isNodeType(11);\n    var isBr = matchNodeNames(['br']);\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Option.from(get$3(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var get$4 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom();\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom().offsetWidth;\n    };\n\n    var browser$1 = detect$3().browser;\n    var firstElement = function (nodes) {\n      return find(nodes, isElement);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$1.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom().offsetTop;\n            var captionTop = caption.dom().offsetTop;\n            var captionHeight = caption.dom().offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0, offsetParent;\n      var doc = body.ownerDocument;\n      var pos;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$4(Element.fromDom(body), 'position') === 'static') {\n          pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x += offsetParent.offsetLeft || 0;\n          y += offsetParent.offsetTop || 0;\n          offsetParent = offsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(Element.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var voids = [\n      'area',\n      'base',\n      'basefont',\n      'br',\n      'col',\n      'frame',\n      'hr',\n      'img',\n      'input',\n      'isindex',\n      'link',\n      'meta',\n      'param',\n      'embed',\n      'source',\n      'wbr',\n      'track'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, constant(true));\n        return lookup.hasOwnProperty(name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock = lazyLookup(blocks);\n    var isTable$1 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline = function (node) {\n      return isElement(node) && !isBlock(node);\n    };\n    var isBr$1 = function (node) {\n      return isElement(node) && name(node) === 'br';\n    };\n    var isTextBlock = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems);\n    var isVoid = lazyLookup(voids);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var surroundedBySpans = function (node) {\n      var previousIsSpan = node.previousSibling && node.previousSibling.nodeName === 'SPAN';\n      var nextIsSpan = node.nextSibling && node.nextSibling.nodeName === 'SPAN';\n      return previousIsSpan && nextIsSpan;\n    };\n    var isBookmarkNode = function (node) {\n      return node && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var trimNode = function (dom, node) {\n      var i, children = node.childNodes;\n      if (isElement$1(node) && isBookmarkNode(node)) {\n        return;\n      }\n      for (i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i]);\n      }\n      if (isDocument$1(node) === false) {\n        if (isText$1(node) && node.nodeValue.length > 0) {\n          var trimmedLength = Tools.trim(node.nodeValue).length;\n          if (dom.isBlock(node.parentNode) || trimmedLength > 0) {\n            return;\n          }\n          if (trimmedLength === 0 && surroundedBySpans(node)) {\n            return;\n          }\n        } else if (isElement$1(node)) {\n          children = node.childNodes;\n          if (children.length === 1 && isBookmarkNode(children[0])) {\n            node.parentNode.insertBefore(children[0], node);\n          }\n          if (children.length || isVoid(Element.fromDom(node))) {\n            return;\n          }\n        }\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = Element.fromTag('div').dom();\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$1(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$3 = Tools.each, extend$1 = Tools.extend, explode$1 = Tools.explode, inArray = Tools.inArray;\n    var split = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split(children);\n        }\n        name = split(name);\n        ni = name.length;\n        while (ni--) {\n          attributesOrder = split([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[name[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        name = split(name);\n        ni = name.length;\n        attributes = split(attributes);\n        while (ni--) {\n          schemaItem = schema[name[ni]];\n          for (i = 0, l = attributes.length; i < l; i++) {\n            schemaItem.attributes[attributes[i]] = {};\n            schemaItem.attributesOrder.push(attributes[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$3(split(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$3(split(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$3(split('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$3(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$1(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    function Schema(settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$1(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', 'td th iframe video audio object ' + 'script pre code', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', 'table', nonEmptyElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$3((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)\\])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          validElements = split(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElements.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElements[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$1(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$3(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$3(split(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$1({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$3(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$1({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-\\.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)\\]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$3(split(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$3(split(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$3(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$3(split('strong/b em/i'), function (item) {\n            item = split(item, '/');\n            elements[item[1]].outputName = item[0];\n          });\n        }\n        each$3(split('ol ul sub sup blockquote span font a table tbody tr strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$3(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$3(split('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$3({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$3(explode$1(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = function () {\n        return validStyles;\n      };\n      var getInvalidStyles = function () {\n        return invalidStyles;\n      };\n      var getValidClasses = function () {\n        return validClasses;\n      };\n      var getBoolAttrs = function () {\n        return boolAttrMap;\n      };\n      var getBlockElements = function () {\n        return blockElementsMap;\n      };\n      var getTextBlockElements = function () {\n        return textBlockElementsMap;\n      };\n      var getTextInlineElements = function () {\n        return textInlineElementsMap;\n      };\n      var getShortEndedElements = function () {\n        return shortEndedElementsMap;\n      };\n      var getSelfClosingElements = function () {\n        return selfClosingElementsMap;\n      };\n      var getNonEmptyElements = function () {\n        return nonEmptyElementsMap;\n      };\n      var getMoveCaretBeforeOnEnterElements = function () {\n        return moveCaretBeforeOnEnterElementsMap;\n      };\n      var getWhiteSpaceElements = function () {\n        return whiteSpaceElementsMap;\n      };\n      var getSpecialElements = function () {\n        return specialElements;\n      };\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = function () {\n        return customElementsMap;\n      };\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    }\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$1(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var deprecated = {\n      keyLocation: 1,\n      layerX: 1,\n      layerY: 1,\n      returnValue: 1,\n      webkitMovementX: 1,\n      webkitMovementY: 1,\n      keyIdentifier: 1,\n      mozPressure: 1\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;\n    };\n    var returnFalse = function () {\n      return false;\n    };\n    var returnTrue = function () {\n      return true;\n    };\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var getTargetFromShadowDom = function (event, defaultTarget) {\n      if (event.composedPath) {\n        var composedPath = event.composedPath();\n        if (composedPath && composedPath.length > 0) {\n          return composedPath[0];\n        }\n      }\n      return defaultTarget;\n    };\n    var fix = function (originalEvent, data) {\n      var name;\n      var event = data || {};\n      for (name in originalEvent) {\n        if (!deprecated[name]) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (!event.target) {\n        event.target = event.srcElement || domGlobals.document;\n      }\n      if (Env.experimentalShadowDom) {\n        event.target = getTargetFromShadowDom(originalEvent, event.target);\n      }\n      if (originalEvent && mouseEventRe.test(originalEvent.type) && originalEvent.pageX === undefined && originalEvent.clientX !== undefined) {\n        var eventDoc = event.target.ownerDocument || domGlobals.document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event.preventDefault = function () {\n        event.isDefaultPrevented = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.preventDefault) {\n            originalEvent.preventDefault();\n          } else {\n            originalEvent.returnValue = false;\n          }\n        }\n      };\n      event.stopPropagation = function () {\n        event.isPropagationStopped = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.stopPropagation) {\n            originalEvent.stopPropagation();\n          } else {\n            originalEvent.cancelBubble = true;\n          }\n        }\n      };\n      event.stopImmediatePropagation = function () {\n        event.isImmediatePropagationStopped = returnTrue;\n        event.stopPropagation();\n      };\n      if (hasIsDefaultPrevented(event) === false) {\n        event.isDefaultPrevented = returnFalse;\n        event.isPropagationStopped = returnFalse;\n        event.isImmediatePropagationStopped = returnFalse;\n      }\n      if (typeof event.metaKey === 'undefined') {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      addEvent(win, 'load', readyHandler);\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in domGlobals.document.documentElement;\n        this.hasFocusIn = 'onfocusin' in domGlobals.document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = domGlobals.window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = 0;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$1(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix(null, args);\n        event.type = name;\n        event.target = target;\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains$3, expando = 'sizzle' + -new Date(), preferredDoc = domGlobals.window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf$2 = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document) {\n        setDocument(context);\n      }\n      context = context || document;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains$3(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {\n        return document;\n      }\n      document = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains$3 = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains$3(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains$3(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf$2.call(sortInput, a) - indexOf$2.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf$2.call(sortInput, a) - indexOf$2.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document) {\n        setDocument(context);\n      }\n      return contains$3(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf$2.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = domGlobals.window.location && domGlobals.window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf$2.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf$2.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = domGlobals.document, push$1 = Array.prototype.push, slice$1 = Array.prototype.slice;\n    var rquickExpr$1 = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString$1 = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString$1(sourceItem)) {\n        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$1 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    var trim$2 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    var each$4 = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep = function (array, callback) {\n      var out = [];\n      each$4(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = domGlobals.document;\n        }\n        if (isString$1(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr$1.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push$1.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString$1(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push$1.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$1(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$1(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$4(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$2((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$4(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event.fire(this, name.type, name);\n          } else {\n            Event.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return new DomQuery(slice$1.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push$1,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$4,\n      trim: trim$2,\n      grep: grep,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$4({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$4({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var TreeWalker = function () {\n      function TreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      TreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      TreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      TreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      TreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      TreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      TreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return TreeWalker;\n    }();\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise = module$1.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Option.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$4 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$4,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    var promise = function () {\n      function bind(fn, thisArg) {\n        return function () {\n          fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof domGlobals.setImmediate === 'function' && domGlobals.setImmediate || function (fn) {\n        domGlobals.setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var i, requestAnimationFrameFunc = domGlobals.window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (callback) {\n        domGlobals.window.setTimeout(callback, 0);\n      };\n      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = domGlobals.window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return domGlobals.setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return domGlobals.setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return domGlobals.clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return domGlobals.clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        domGlobals.clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        domGlobals.clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = domGlobals.document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            domGlobals.clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    function StyleSheetLoader(documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = Element.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append(getStyleContainer(edos), element);\n      };\n      var load = function (url, loadedCallback, errorCallback) {\n        var link, style, state;\n        var resolve = function (status) {\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          var callbacks = state.passed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          resolve(2);\n        };\n        var failed = function () {\n          var callbacks = state.failed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          resolve(3);\n        };\n        var isOldWebKit = function () {\n          var webKitChunks = domGlobals.navigator.userAgent.match(/WebKit\\/(\\d*)/);\n          return !!(webKitChunks && parseInt(webKitChunks[1], 10) < 536);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (new Date().getTime() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var styleSheet, i = styleSheets.length, owner;\n            while (i--) {\n              styleSheet = styleSheets[i];\n              owner = styleSheet.ownerNode ? styleSheet.ownerNode : styleSheet.owningElement;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n          }, waitForWebKitLinkLoaded);\n        };\n        var waitForGeckoLinkLoaded = function () {\n          wait(function () {\n            try {\n              var cssRules = style.sheet.cssRules;\n              passed();\n              return !!cssRules;\n            } catch (ex) {\n            }\n          }, waitForGeckoLinkLoaded);\n        };\n        url = Tools._addCacheSuffix(url);\n        if (!loadedStates[url]) {\n          state = {\n            passed: [],\n            failed: []\n          };\n          loadedStates[url] = state;\n        } else {\n          state = loadedStates[url];\n        }\n        if (loadedCallback) {\n          state.passed.push(loadedCallback);\n        }\n        if (errorCallback) {\n          state.failed.push(errorCallback);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        link = doc.dom().createElement('link');\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        link.id = 'u' + idCount++;\n        link.async = false;\n        link.defer = false;\n        var startTime = new Date().getTime();\n        if (settings.contentCssCors) {\n          link.crossOrigin = 'anonymous';\n        }\n        if (settings.referrerPolicy) {\n          set(Element.fromDom(link), 'referrerpolicy', settings.referrerPolicy);\n        }\n        if ('onload' in link && !isOldWebKit()) {\n          link.onload = waitForWebKitLinkLoaded;\n          link.onerror = failed;\n        } else {\n          if (domGlobals.navigator.userAgent.indexOf('Firefox') > 0) {\n            style = doc.dom().createElement('style');\n            style.textContent = '@import \"' + url + '\"';\n            waitForGeckoLinkLoaded();\n            addStyle(Element.fromDom(style));\n            return;\n          }\n          waitForWebKitLinkLoaded();\n        }\n        addStyle(Element.fromDom(link));\n        link.href = url;\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par$1(map(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    }\n\n    var create$1 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom();\n        return Option.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$1();\n\n    var each$5 = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var whiteSpaceRegExp$2 = /^[ \\t\\r\\n]*$/;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    function DOMUtils(doc, settings) {\n      var _this = this;\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = domGlobals.window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(Element.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$5(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || !node.nodeType || node.nodeType === 9) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$5(node, function (elm, i) {\n            if (elm) {\n              if (typeof elm === 'string') {\n                elm = get(elm);\n              }\n              result.push(func.call(scope, elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : _this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$5(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (attrs.hasOwnProperty(key) && attrs[key] !== null && typeof attrs[key] !== 'undefined') {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (url) {\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          DOMUtils.DOM.loadCSS(url);\n          return;\n        }\n        if (!url) {\n          url = '';\n        }\n        var head = doc.getElementsByTagName('head')[0];\n        each$5(url.split(','), function (url) {\n          url = Tools._addCacheSuffix(url);\n          if (files[url]) {\n            return;\n          }\n          files[url] = true;\n          var link = create('link', __assign(__assign({\n            rel: 'stylesheet',\n            type: 'text/css',\n            href: url\n          }, settings.contentCssCors ? { crossOrigin: 'anonymous' } : {}), settings.referrerPolicy ? { referrerPolicy: settings.referrerPolicy } : {}));\n          head.appendChild(link);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$1(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$5(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$5(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$1(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new TreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$1(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var r = createRng(), bef, aft, pa;\n        if (parentElm && splitElm) {\n          r.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          r.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          bef = r.extractContents();\n          r = createRng();\n          r.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          r.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          aft = r.extractContents();\n          pa = parentElm.parentNode;\n          pa.insertBefore(trimNode(self, bef), parentElm);\n          if (replacementElm) {\n            pa.insertBefore(replacementElm, parentElm);\n          } else {\n            pa.insertBefore(splitElm, parentElm);\n          }\n          pa.insertBefore(trimNode(self, aft), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        return events.bind(target, name, func, scope || self);\n      };\n      var unbind = function (target, name, func) {\n        var i;\n        if (Tools.isArray(target)) {\n          i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        }\n        if (boundEvents.length > 0 && (target === doc || target === win)) {\n          i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n              events.unbind(item[0], item[1], item[2]);\n            }\n          }\n        }\n        return events.unbind(target, name, func);\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$1(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        while (node) {\n          if (parent === node) {\n            return true;\n          }\n          node = node.parentNode;\n        }\n        return false;\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, function () {\n        return self;\n      });\n      return self;\n    }\n    (function (DOMUtils) {\n      DOMUtils.DOM = DOMUtils(domGlobals.document);\n      DOMUtils.nodeIndex = findNodeIndex;\n    }(DOMUtils || (DOMUtils = {})));\n    var DOMUtils$1 = DOMUtils;\n\n    var DOM = DOMUtils$1.DOM;\n    var each$6 = Tools.each, grep$2 = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM;\n        var elm;\n        var done = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onreadystatechange = elm.onload = elm = null;\n          }\n          success();\n        };\n        var error = function () {\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof domGlobals.console !== 'undefined' && domGlobals.console.log) {\n              domGlobals.console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = domGlobals.document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (domGlobals.document.getElementsByTagName('head')[0] || domGlobals.document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        if (state === undefined) {\n          this.queue.push(url);\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$6(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep$2(scripts);\n          scripts.length = 0;\n          each$6(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$6(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$1(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$1(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      var translated = function (text) {\n        return text;\n      };\n      if (isEmpty(text)) {\n        return translated('');\n      }\n      if (isRaw(text)) {\n        return translated(toString(text.raw));\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return translated(removeContext(substitued));\n      }\n      return translated(removeContext(getLangData(text)));\n    };\n    var isRtl = function () {\n      return getLanguageData().bind(function (items) {\n        return get(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add,\n      translate: translate,\n      isRtl: isRtl,\n      hasCode: hasCode\n    };\n\n    function AddOnManager() {\n      var _this = this;\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = _this.urls[pluginName];\n        each(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has(lookup, name) && state === 'added') {\n          callback();\n        } else if (has(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    }\n    (function (AddOnManager) {\n      AddOnManager.PluginManager = AddOnManager();\n      AddOnManager.ThemeManager = AddOnManager();\n    }(AddOnManager || (AddOnManager = {})));\n    var AddOnManager$1 = AddOnManager;\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read = function (element, attr) {\n      var value = get$3(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$5 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$5(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is$1(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$1(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = Element.fromDom(rng.startContainer);\n      var root = Element.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child(start, rng.startOffset).getOr(start);\n      var closest = closest$1(newStart, selector, function (n) {\n        return eq$2(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Option.some(get$3(c, property));\n        } else {\n          return Option.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement(elem) && has$2(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = Element.fromDom(editor.getBody());\n      return descendants$1(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = Element.fromDom(editor.getBody());\n      var markers = descendants$1(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each(markers, function (m) {\n        var uid = get$3(m, dataAnnotationId());\n        var nodesAlready = directory.hasOwnProperty(uid) ? directory[uid] : [];\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: Cell(Option.none())\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = callbackMap.hasOwnProperty(name) ? callbackMap[name] : initData();\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map(elements, function (elem) {\n                return elem.dom();\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last$2(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort$1(keys(callbackMap));\n        each(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Option.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.set(Option.none());\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!prev.is(uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(Option.some(uid));\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$1 = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Option.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$2 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return annotations.hasOwnProperty(name) ? Option.from(annotations[name]).map(function (a) {\n          return a.settings;\n        }) : Option.none();\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add$4 = function (element, classes) {\n      each(classes, function (x) {\n        add$3(element, x);\n      });\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var get$6 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set$1 = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new TreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$1(next) && !isBoundary(next));\n        return Option.from(next).filter(isText$1);\n      };\n      return {\n        current: function () {\n          return Option.from(walker.current()).filter(isText$1);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr(node) || isContentEditableFalse(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$1(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Option.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var ZWSP = zeroWidth;\n    var isZwsp$1 = isZwsp;\n    var trim$3 = removeZwsp;\n\n    var isElement$2 = isElement$1;\n    var isText$2 = isText$1;\n    var isCaretContainerBlock = function (node) {\n      if (isText$2(node)) {\n        node = node.parentNode;\n      }\n      return isElement$2(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$2(node) && isZwsp$1(node.data);\n    };\n    var isCaretContainer = function (node) {\n      return isCaretContainerBlock(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr(node.firstChild);\n    };\n    var insertInline = function (node, before) {\n      var sibling;\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP);\n      var parentNode = node.parentNode;\n      if (!before) {\n        sibling = node.nextSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        sibling = node.previousSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !isText$1(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !isText$1(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = domGlobals.document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[0] === ZWSP;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[node.data.length - 1] === ZWSP;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock(range.startContainer);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Option.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Option.some(a) : Option.none();\n    };\n\n    var round = Math.round;\n    var clone$2 = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round(rect.left),\n        top: round(rect.top),\n        bottom: round(rect.bottom),\n        right: round(rect.right),\n        width: round(rect.width),\n        height: round(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone$2(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove = function (rect1, rect2) {\n      if (rect1.bottom - rect1.height / 2 < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode = function (container, offset) {\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        if (offset >= container.childNodes.length) {\n          offset = container.childNodes.length - 1;\n        }\n        container = container.childNodes[offset];\n      }\n      return container;\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isContentEditableTrue$1 = isContentEditableTrue;\n    var isContentEditableFalse$1 = isContentEditableFalse;\n    var isBr$2 = isBr;\n    var isText$3 = isText$1;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object'\n    ]);\n    var isTable$2 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer;\n    var isCaretCandidate = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$3(node)) {\n        if (isInvalidTextElement(node.parentNode)) {\n          return false;\n        }\n        return true;\n      }\n      return isAtomicInline(node) || isBr$2(node) || isTable$2(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$1(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$1(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$1(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from$1(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$1(elm);\n      }, false) !== true;\n    };\n    var isAtomic = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate = function (node, root) {\n      return isCaretCandidate(node) && isInEditable(node, root);\n    };\n\n    var isElement$3 = isElement$1;\n    var isCaretCandidate$1 = isCaretCandidate;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$1, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$1;\n    var isBr$3 = isBr;\n    var nodeIndex = DOMUtils$1.nodeIndex;\n    var resolveIndex = getNode;\n    var createRange = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils$1.DOM.createRng();\n    };\n    var isWhiteSpace = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      var text;\n      if (isWhiteSpace(range.toString()) && isNotPre(container.parentNode) && isText$1(container)) {\n        text = container.data;\n        if (isWhiteSpace(text[offset - 1]) || isWhiteSpace(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone$2(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$1(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$2(clientRects[0]);\n      } else {\n        clientRect = clone$2(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var beforeNode, node;\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), true));\n          }\n        }\n      };\n      if (isText$4(caretPosition.container())) {\n        addCharacterOffset(caretPosition.container(), caretPosition.offset());\n        return clientRects;\n      }\n      if (isElement$3(caretPosition.container())) {\n        if (caretPosition.isAtEnd()) {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n          }\n        } else {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n            return clientRects;\n          }\n          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    function CaretPosition(container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    }\n    (function (CaretPosition) {\n      CaretPosition.fromRangeStart = function (range) {\n        return CaretPosition(range.startContainer, range.startOffset);\n      };\n      CaretPosition.fromRangeEnd = function (range) {\n        return CaretPosition(range.endContainer, range.endOffset);\n      };\n      CaretPosition.after = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node) + 1);\n      };\n      CaretPosition.before = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node));\n      };\n      CaretPosition.isAbove = function (pos1, pos2) {\n        return lift2(head(pos2.getClientRects()), last(pos1.getClientRects()), isAbove).getOr(false);\n      };\n      CaretPosition.isBelow = function (pos1, pos2) {\n        return lift2(last(pos2.getClientRects()), head(pos1.getClientRects()), isBelow).getOr(false);\n      };\n      CaretPosition.isAtStart = function (pos) {\n        return pos ? pos.isAtStart() : false;\n      };\n      CaretPosition.isAtEnd = function (pos) {\n        return pos ? pos.isAtEnd() : false;\n      };\n      CaretPosition.isTextPosition = function (pos) {\n        return pos ? isText$1(pos.container()) : false;\n      };\n      CaretPosition.isElementPosition = function (pos) {\n        return CaretPosition.isTextPosition(pos) === false;\n      };\n    }(CaretPosition || (CaretPosition = {})));\n    var CaretPosition$1 = CaretPosition;\n\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$1(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode(dom, node.previousSibling);\n      trimEmptyTextNode(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Option.from(frag.firstChild);\n      var lastChild = Option.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment$1(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$5 = isText$1;\n    var isBogus$1 = isBogus;\n    var nodeIndex$1 = DOMUtils$1.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus$1(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus$1(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$5(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal$1 = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal$1(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$5(node) && isText$5(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal$1(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$5(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$3 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$5(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil(root, container);\n      parents = filter$2(parents, not(isBogus));\n      path = path.concat(map$2(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$5(node) || !isText$5(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$5(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$5(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$5(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition$1(container, offset);\n    };\n    var resolve$1 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        value = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!value) {\n          return null;\n        }\n        if (value[1] === 'text()') {\n          value[1] = '#text';\n        }\n        return resolvePathItem(result, value[1], parseInt(value[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$5(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex$1(container) + 1;\n        } else {\n          offset = nodeIndex$1(container);\n        }\n        return CaretPosition$1(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$1(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$1(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      return bookmark;\n    };\n    var findIndex$2 = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$1(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint(rng, true);\n      moveEndPoint(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$1(node)) {\n        node = getNode(node, offset);\n        if (isContentEditableFalse$2(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer(node)) {\n        if (isText$1(node) && isCaretContainerBlock(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$2(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$3(selection.dom.getRoot(), CaretPosition$1.fromRangeStart(rng)),\n        end: create$3(selection.dom.getRoot(), CaretPosition$1.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$3, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$1 = DOMUtils$1.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return bodyObj.hasOwnProperty(editor.id) ? bodyObj[editor.id] : defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', constant(true), 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString(contentCss)) {\n        return map(contentCss.split(','), trim);\n      } else if (isArray(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      return editor.getParam('object_resizing');\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$1.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline$1 = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins');\n    };\n    var getExternalPlugins = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n\n    var isElement$4 = isElement$1;\n    var isText$6 = isText$1;\n    var removeNode = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var getNodeValue = function (node) {\n      try {\n        return node.nodeValue;\n      } catch (ex) {\n        return '';\n      }\n    };\n    var setNodeValue = function (node, text) {\n      if (text.length === 0) {\n        removeNode(node);\n      } else {\n        node.nodeValue = text;\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$3(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$5(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        setNodeValue(caretContainer, text);\n        return CaretPosition$1(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf(from$1(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition$1(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$5(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$6(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition$1.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$5 = function (caretContainerNode) {\n      if (isElement$4(caretContainerNode) && isCaretContainer(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode(caretContainerNode);\n        }\n      }\n      if (isText$6(caretContainerNode)) {\n        var text = trim$3(getNodeValue(caretContainerNode));\n        setNodeValue(caretContainerNode, text);\n      }\n    };\n\n    var browser$2 = detect$3().browser;\n    var isContentEditableFalse$3 = isContentEditableFalse;\n    var isTableCell$1 = function (node) {\n      return isElement$1(node) && /^(TD|TH)$/i.test(node.tagName);\n    };\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var docElm, scrollX, scrollY, margin, rootRect;\n      if (root.tagName === 'BODY') {\n        docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var node, sibling, i, data;\n      var contentEditableFalseNodes = descendants$1(Element.fromDom(root), '*[contentEditable=false]');\n      for (i = 0; i < contentEditableFalseNodes.length; i++) {\n        node = contentEditableFalseNodes[i].dom();\n        sibling = node.previousSibling;\n        if (endsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = Cell(Option.none());\n      var cursorInterval, caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var clientRect, rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock(caretBlock, element, before);\n          clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(clientRect).appendTo(root)[0];\n          lastVisualCaret.set(Option.some({\n            caret: caret,\n            element: element,\n            before: before\n          }));\n          lastVisualCaret.get().each(function (caretState) {\n            if (before) {\n              DomQuery(caretState.caret).addClass('mce-visual-caret-before');\n            }\n          });\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isContentEditableFalse$3(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$5(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.get().each(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.set(Option.none());\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = null;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.get().each(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isFakeCaretTarget = function (node) {\n      return isContentEditableFalse$3(node) || isTable(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$4 = isContentEditableFalse;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer$2 = isCaretContainer;\n    var isCaretContainerBlock$1 = isCaretContainerBlock;\n    var isElement$5 = isElement$1;\n    var isCaretCandidate$2 = isCaretCandidate;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock$1(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new TreeWalker(node, rootNode);\n      if (isBackwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.prev, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.next, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock(caretPosition1.container(), rootNode) === getParentBlock(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$5(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock(node1, root) === getParentBlock(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var sibling, siblingName;\n      if (left) {\n        siblingName = 'previousSibling';\n      } else {\n        siblingName = 'nextSibling';\n      }\n      while (node && node !== root) {\n        sibling = node[siblingName];\n        if (isCaretContainer$2(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$4(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$2(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$1 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node, container, location;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock(container)) {\n        if (!isElement$5(container)) {\n          container = container.parentNode;\n        }\n        location = container.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$1(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$1(container)) {\n        if (isCaretContainer$2(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$1(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Option.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$4);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Option.from(pos.getNode()).map(Element.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Option.from(pos.getNode(true)).map(Element.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$5 = isContentEditableFalse;\n    var isText$7 = isText$1;\n    var isElement$6 = isElement$1;\n    var isBr$4 = isBr;\n    var isCaretCandidate$3 = isCaretCandidate;\n    var isAtomic$1 = isAtomic;\n    var isEditableCaretCandidate$1 = isEditableCaretCandidate;\n    var getParents = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate$3(node.previousSibling) && !isText$7(node.previousSibling)) {\n          return CaretPosition$1.before(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate$3(node.nextSibling) && !isText$7(node.nextSibling)) {\n          return CaretPosition$1.after(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$4(node)) {\n          return CaretPosition$1.before(node);\n        }\n        return CaretPosition$1.after(node);\n      }\n      return CaretPosition$1.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate$3(nextSibling)) {\n        if (isText$7(nextSibling)) {\n          return CaretPosition$1(nextSibling, 0);\n        } else {\n          return CaretPosition$1.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition(HDirection.Forwards, CaretPosition$1.after(nextNode), root);\n      }\n    };\n    var findCaretPosition = function (direction, startPos, root) {\n      var node, nextNode, innerNode;\n      var caretPosition;\n      if (!isElement$6(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition$1.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition$1.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate$3(root.lastChild) && isElement$6(root.lastChild)) {\n          return isBr$4(root.lastChild) ? CaretPosition$1.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$7(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition$1(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition$1(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate$3(nextNode)) {\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, innerNode.data.length);\n                }\n                return CaretPosition$1.after(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, nextNode.data.length);\n            }\n            return CaretPosition$1.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate$3(nextNode)) {\n            if (isBr$4(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, 0);\n                }\n                return CaretPosition$1.before(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, 0);\n            }\n            return CaretPosition$1.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode(node, direction, constant(true), root, true);\n        if (isEditableCaretCandidate$1(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode(node, direction, isEditableCaretCandidate$1, root);\n      var rootContentEditableFalseElm = last$1(filter(getParents(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition$1.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition$1.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition$1.before(start) : CaretPosition$1.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr(node) ? CaretPosition$1.before(node) : CaretPosition$1.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition$1.isTextPosition(from) && !CaretPosition$1.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition$1.isTextPosition(position) && isBr(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Option.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Option.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Option.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$1(startNode)) {\n        return Option.some(CaretPosition$1(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate(startNode)) {\n          return Option.some(forward ? CaretPosition$1.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$1(node) && node.id === CARET_ID;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return typeof bookmark.start === 'string';\n    };\n    var isRangeBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$1(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$1(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$1(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(function () {\n        return false;\n      }, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$1(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$1(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$1(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            if (suffix === 'start') {\n              container = prev;\n              offset = idx;\n            } else {\n              container = prev;\n              offset = idx;\n            }\n          }\n        }\n        return Option.some(CaretPosition$1(container, offset));\n      } else {\n        return Option.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Option.some(rng);\n      } else {\n        return Option.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex$1 = function (dom, bookmark) {\n      return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$2 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Option.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex$1(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Option.some(bookmark.rng);\n        }\n      }\n      return Option.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$2(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$1(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is$2 = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is$2(nbsp);\n    var isWhiteSpace$1 = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace$1(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer, walker, node, nodes;\n      if (rng.startContainer === rng.endContainer) {\n        if (isInlineBlock(rng.startContainer.childNodes[rng.startOffset])) {\n          return;\n        }\n      }\n      if (container.nodeType === 1) {\n        nodes = container.childNodes;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3 && !isWhiteSpaceNode(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (node.nodeType === 1 || !isWhiteSpaceNode(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode = function (node) {\n      return node && isText$1(node) && /^([\\t \\r\\n]+|)$/.test(node.nodeValue);\n    };\n    var isEmptyTextNode = function (node) {\n      return node && isText$1(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (typeof value !== 'string') {\n        value = value(vars);\n      } else if (vars) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$1 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get(format, key).exists(function (field) {\n            var fieldValues = isArray(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$1(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n\n    var isBookmarkNode$2 = isBookmarkNode$1;\n    var getParents$2 = getParents$1;\n    var isWhiteSpaceNode$1 = isWhiteSpaceNode;\n    var isTextBlock$2 = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return node.nodeName === 'BR' && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$1(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace$1(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Option.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode$2(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Option.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Option.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Option.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, format, rng, container, siblingName) {\n      if (isText$1(container) && container.nodeValue.length === 0 && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$2(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < format.length; y++) {\n          var curFormat = format[y];\n          if ('collapsed' in curFormat && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, format, container, siblingName) {\n      var node;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      if (!format[0].wrapper) {\n        node = dom.getParent(container, format[0].block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$1(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock$2(editor, node);\n        }, scopeRoot);\n      }\n      if (node && format[0].wrapper) {\n        node = getParents$2(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var findParentContainer = function (dom, format, startContainer, startOffset, endContainer, endOffset, start) {\n      var container, parent, sibling;\n      container = parent = start ? startContainer : endContainer;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$1(container) && !isWhiteSpaceNode$1(container)) {\n        if (start ? startOffset > 0 : endOffset < container.nodeValue.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!format[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          if (!isBookmarkNode$2(sibling) && !isWhiteSpaceNode$1(sibling) && !isBogusBr(sibling)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var expandRng = function (editor, rng, format, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      if (isElement$1(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode(startContainer, startOffset);\n        if (isText$1(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$1(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$1(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isBookmarkNode$2(startContainer.parentNode) || isBookmarkNode$2(startContainer)) {\n        startContainer = isBookmarkNode$2(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$1(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isBookmarkNode$2(endContainer.parentNode) || isBookmarkNode$2(endContainer)) {\n        endContainer = isBookmarkNode$2(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$1(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (format[0].inline || format[0].block_expand) {\n        if (!format[0].inline || (!isText$1(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n        }\n        if (!format[0].inline || (!isText$1(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n        }\n      }\n      if (format[0].selector && format[0].expand !== false && !format[0].inline) {\n        startContainer = findSelectorEndPoint(dom, format, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, format, rng, endContainer, 'nextSibling');\n      }\n      if (format[0].block || format[0].selector) {\n        startContainer = findBlockEndPoint(editor, format, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, format, endContainer, 'nextSibling');\n        if (format[0].block) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$1(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$1(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var clampToExistingChildren = function (container, index) {\n      var childNodes = container.childNodes;\n      if (index >= childNodes.length) {\n        index = childNodes.length - 1;\n      } else if (index < 0) {\n        index = 0;\n      }\n      return childNodes[index] || container;\n    };\n    var getEndChild = function (container, index) {\n      return clampToExistingChildren(container, index - 1);\n    };\n    var walk$1 = function (dom, rng, callback) {\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var exclude = function (nodes) {\n        var node;\n        node = nodes[0];\n        if (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n          nodes.splice(0, 1);\n        }\n        node = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        do {\n          if (node.parentNode === root) {\n            return node;\n          }\n          node = node.parentNode;\n        } while (node);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = clampToExistingChildren(startContainer, startOffset);\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getEndChild(endContainer, endOffset);\n      }\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      for (var node = startContainer; node; node = node.parentNode) {\n        if (node === endContainer) {\n          return walkBoundary(startContainer, ancestor, true);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      for (var node = endContainer; node; node = node.parentNode) {\n        if (node === startContainer) {\n          return walkBoundary(endContainer, ancestor);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [Element.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter(getSelectedNodes(ranges), isTableCell);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants$1(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), Element.fromDom(editor.getBody()));\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$1(sc)) {\n        return so === 0 ? Option.some(Element.fromDom(sc)) : Option.none();\n      } else {\n        return Option.from(sc.childNodes[so]).map(Element.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$1(ec)) {\n        return eo === ec.data.length ? Option.some(Element.fromDom(ec)) : Option.none();\n      } else {\n        return Option.from(ec.childNodes[eo - 1]).map(Element.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find(getFirstChildren(elm), curry(eq$2, startNode));\n        var end = find(getLastChildren(elm), curry(eq$2, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint$1 = function (dom, rng, node, start) {\n      var root = node, walker = new TreeWalker(node, root);\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      do {\n        if (node.nodeType === 3 && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (nonEmptyElementsMap[node.nodeName] && !/^(TD|TH)$/.test(node.nodeName)) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each(fakeSelectionNodes, function (elem) {\n          var node = elem.dom();\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$7 = function (element) {\n      return api.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText(elem) && get$7(elem) === zeroWidth;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: true }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate$1('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = Element.fromTag('span', eDoc);\n      add$3(master, annotation());\n      set(master, '' + dataAnnotationId(), uid);\n      set(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll(master, attributes);\n      add$4(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = Cell(Option.none());\n      var finishWrapper = function () {\n        wrapper.set(Option.none());\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(Option.some(nu));\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map(nodes, Element.fromDom);\n        processElements(elems);\n      };\n      walk$1(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set$1(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom());\n          selection.select(wrapper.dom());\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$2();\n      setup$1(editor, registry);\n      var changes = setup(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Option.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$1(directory, function (elems) {\n            return map(elems, function (elem) {\n              return elem.dom();\n            });\n          });\n        }\n      };\n    };\n\n    var whiteSpaceRegExp$3 = /^[ \\t\\r\\n]*$/;\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$2 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      if (!whiteSpaceRegExp$3.test(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var Node = function () {\n      function Node(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      Node.create = function (name, attrs) {\n        var node = new Node(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$1(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      Node.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      Node.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$1(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      Node.prototype.clone = function () {\n        var self = this;\n        var clone = new Node(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      Node.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      Node.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      Node.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      Node.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      Node.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      Node.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      Node.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      Node.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode$1(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      };\n      Node.prototype.walk = function (prev) {\n        return walk$2(this, null, prev);\n      };\n      return Node;\n    }();\n\n    var makeMap$3 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$3(settings.indent_before || '');\n      var indentAfter = makeMap$3(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var Serializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          var name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n          if (!handler) {\n            name = node.name;\n            isEmpty = node.shortEnded;\n            attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              sortedAttrs = [];\n              sortedAttrs.map = {};\n              elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (i = 0, l = attrs.length; i < l; i++) {\n                  attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;]+;base64,([a-z0-9\\+\\/=]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate$1('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join('')\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(new RegExp(result.prefix + '_[0-9]+', 'g'), function (imageId) {\n        return get(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n      if (matches) {\n        return Option.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Option.none();\n      }\n    };\n\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var isInvalidUri = function (settings, uri) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return settings.allow_svg_data_urls === false && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findEndTagIndex = function (schema, html, startIndex) {\n      var count = 1, index, matches;\n      var shortEndedElements = schema.getShortEndedElements();\n      var tokenRegExp = /<([!?\\/])?([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\/|\\s+)>/g;\n      tokenRegExp.lastIndex = index = startIndex;\n      while (matches = tokenRegExp.exec(html)) {\n        index = tokenRegExp.lastIndex;\n        if (matches[1] === '/') {\n          count--;\n        } else if (!matches[1]) {\n          if (matches[2] in shortEndedElements) {\n            continue;\n          }\n          count++;\n        }\n        if (count === 0) {\n          break;\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    function SaxParser(settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var noop = function () {\n      };\n      settings = settings || {};\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return get(base64Extract.uris, value).getOr(value);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (match, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/|\\\\s+)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, parseAttribute);\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    }\n    (function (SaxParser) {\n      SaxParser.findEndTag = findEndTagIndex;\n    }(SaxParser || (SaxParser = {})));\n    var SaxParser$1 = SaxParser;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var content = html;\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var endTagIndex, index, matchLength, matches;\n      var schema = serializer.schema;\n      content = trimHtml(serializer.getTempAttrs(), content);\n      var shortEndedElements = schema.getShortEndedElements();\n      while (matches = bogusAllRegExp.exec(content)) {\n        index = bogusAllRegExp.lastIndex;\n        matchLength = matches[0].length;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser$1.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$3(content);\n    };\n    var trimExternal = trimInternal;\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var content;\n      args.format = format;\n      args.get = true;\n      args.getInner = true;\n      if (!args.no_events) {\n        editor.fire('BeforeGetContent', args);\n      }\n      if (args.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = trim$3(body.innerText || body.textContent);\n      } else if (args.format === 'tree') {\n        return editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      if (args.format !== 'text' && !isWsPreserveElement(Element.fromDom(body))) {\n        args.content = Tools.trim(content);\n      } else {\n        args.content = content;\n      }\n      if (!args.no_events) {\n        editor.fire('GetContent', args);\n      }\n      return args.content;\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Option.from(editor.getBody()).fold(constant(args.format === 'tree' ? new Node('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$7 = Tools.each;\n    var ElementUtils = function (dom) {\n      this.compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$7(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (obj1.hasOwnProperty(name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (obj2.hasOwnProperty(name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Option.from(pos.container()).filter(isText$1).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace$1);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace$1);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$1(container) && container.data.length === 0;\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Option.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return node.nodeName === 'IMG' && get$4(Element.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse(node) && !isBogusAll(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeTable = matchesElementPosition(true, isTable);\n    var isAfterTable = matchesElementPosition(false, isTable);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, selector, isRoot).isSome();\n    };\n\n    var hasWhitespacePreserveParent = function (rootNode, node) {\n      var rootElement = Element.fromDom(rootNode);\n      var startNode = Element.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq$2, rootElement));\n    };\n    var isWhitespace = function (rootNode, node) {\n      return isText$1(node) && /^[ \\t\\r\\n]*$/.test(node.data) && hasWhitespacePreserveParent(rootNode, node) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$1(node) && node.nodeName === 'A' && node.hasAttribute('name');\n    };\n    var isContent$1 = function (rootNode, node) {\n      return isCaretCandidate(node) && isWhitespace(rootNode, node) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$2 = hasAttribute('data-mce-bogus');\n    var isBogusAll$1 = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var node, brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new TreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll$1(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$2(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(targetNode, node)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$1 = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom(), skipBogus);\n    };\n\n    var getLastChildren$1 = function (elm) {\n      var children = [];\n      var rawNode = elm.dom();\n      while (rawNode) {\n        children.push(Element.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants$1(elm, 'br');\n      var brs = filter(getLastChildren$1(elm).slice(-1), isBr$1);\n      if (allBrs.length === brs.length) {\n        each(brs, remove);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append(elm, Element.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock(elm) && isBr$1(lastChild) && isBlock(lastChildPrevSibling)) {\n            remove(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil$1 = function (start, root, predicate) {\n      if (contains$2(root, start)) {\n        return dropLast(parents(start, function (elm) {\n          return predicate(elm) || eq$2(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents$1 = function (start, root) {\n      return parentsUntil$1(start, root, constant(false));\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents$1(start, root));\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace$1(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length;\n      var isStartOfContent = offset === 0;\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      return normalize(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      return normalize(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace) {\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      prevNode.appendData(nextNode.data);\n      remove(Element.fromDom(nextNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(prevNode, whitespaceOffset);\n      }\n      return prevNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition$1.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition$1.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition$1(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$1(node) ? CaretPosition$1(node, 0) : CaretPosition$1.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$1(node) ? CaretPosition$1(node, node.data.length) : CaretPosition$1.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.previousSibling)) {\n        return Option.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Option.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.nextSibling)) {\n        return Option.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Option.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition$1.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition$1.after(elm));\n      }, Option.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition$1.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition$1.before(elm));\n      }, Option.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition$1 = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition$1(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom() === rawNode;\n      };\n    };\n    var isBlock$2 = function (editor, elm) {\n      return elm && editor.schema.getBlockElements().hasOwnProperty(name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty$1(elm)) {\n        var br = Element.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append(elm, br);\n        return Option.some(CaretPosition$1.before(br.dom()));\n      } else {\n        return Option.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText);\n      var nextTextOpt = nextSibling(elm).filter(isText);\n      remove(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom(), nextNode = next.dom();\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition$1(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom(), elm.dom().length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom(), 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom());\n      var parentBlock = ancestor(elm, curry(isBlock$2, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection(editor, forward, Option.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      { removeTable: ['element'] },\n      { emptyCells: ['cells'] },\n      {\n        deleteCellSelection: [\n          'rng',\n          'cell'\n        ]\n      }\n    ]);\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq$2(root, cur);\n      };\n    };\n    var getClosestCell = function (container, isRoot) {\n      return closest$1(Element.fromDom(container), 'td,th', isRoot);\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$1(cell, 'table', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq$2(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq$2(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom().rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getTableCells = function (table) {\n      return descendants$1(table, 'td,th');\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (table) {\n        return last(getTableCells(table)).map(function (endCell) {\n          return tableCellRng(cellRng.start, endCell);\n        });\n      });\n    };\n    var partialSelection = function (isRoot, rng) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return rng.collapsed ? Option.none() : lift2(startCell, endCell, tableCellRng).fold(function () {\n        return startCell.fold(function () {\n          return endCell.bind(function (endCell) {\n            return getClosestTable(endCell, isRoot).bind(function (table) {\n              return head(getTableCells(table)).map(function (startCell) {\n                return tableCellRng(startCell, endCell);\n              });\n            });\n          });\n        }, function (startCell) {\n          return getClosestTable(startCell, isRoot).bind(function (table) {\n            return last(getTableCells(table)).map(function (endCell) {\n              return tableCellRng(startCell, endCell);\n            });\n          });\n        });\n      }, function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng) ? Option.none() : getCellRangeFromStartTable(cellRng, isRoot);\n      });\n    };\n    var isWithinSameTable = function (isRoot, cellRng) {\n      return getTableFromCellRng(cellRng, isRoot).isSome();\n    };\n    var getTableSelectionFromCellRng = function (cellRng, isRoot) {\n      return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n        return tableSelection(cellRng, table, getTableCells(table));\n      });\n    };\n    var getTableSelection = function (optCellRng, rng, isRoot) {\n      return optCellRng.filter(function (cellRng) {\n        return isExpandedCellRng(cellRng) && isWithinSameTable(isRoot, cellRng);\n      }).orThunk(function () {\n        return partialSelection(isRoot, rng);\n      }).bind(function (cRng) {\n        return getTableSelectionFromCellRng(cRng, isRoot);\n      });\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex(cells, function (x) {\n        return eq$2(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.filter(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      }).map(function (cellRng) {\n        return cellRng.start;\n      });\n    };\n    var getAction = function (tableSelection) {\n      return getSelectedCells(tableSelection).map(function (selected) {\n        var cells = tableSelection.cells;\n        return selected.length === cells.length ? deleteAction.removeTable(tableSelection.table) : deleteAction.emptyCells(selected);\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      return isSingleCellTableContentSelected(optCellRng, rng, isRoot).map(function (cell) {\n        return deleteAction.deleteCellSelection(rng, cell);\n      }).orThunk(function () {\n        return getTableSelection(optCellRng, rng, isRoot).bind(getAction);\n      });\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Option.some(root);\n      });\n    };\n    var emptyCells = function (editor, cells) {\n      each(cells, fillWithPaddingBr);\n      editor.selection.setCursorLocation(cells[0].dom(), 0);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell) {\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = Element.fromDom(editor.dom.getParent(lastNode.dom(), editor.dom.isBlock));\n      if (isEmpty$1(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        editor.selection.setCursorLocation(lastBlock.dom(), 0);\n      }\n      if (!eq$2(cell, lastBlock)) {\n        var additionalCleanupNodes = parent(lastBlock).is(cell) ? [] : siblings(lastBlock);\n        each(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq$2(node, lastBlock) && !contains$2(node, lastBlock)) {\n            remove(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteTableElement, editor), curry(emptyCells, editor), curry(deleteCellContents, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange = function (editor, startElm) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      var selectedCells = getCellsFromEditor(editor);\n      return selectedCells.length !== 0 ? emptyCells(editor, selectedCells) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find(parentsAndSelf(elm, rootElm), isTableCell);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find(parentsAndSelf(elm, rootElm), function (elm) {\n        return name(elm) === 'caption';\n      });\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, Element.fromDom(to.getNode())).map(function (toCell) {\n          return eq$2(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom(), 0);\n      return Option.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom()).bind(function (first) {\n        return lastPositionIn(fromCaption.dom()).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, Element.fromDom(to.getNode())).map(function (toCaption) {\n        return eq$2(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Option.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty$1(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return isEmpty$1(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).map(function (pos) {\n        return isNearTable(forward, pos);\n      }).getOr(false);\n    };\n    var deleteCaret = function (editor, forward, startElm) {\n      var rootElm = Element.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete = function (editor, forward) {\n      var startElm = Element.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret(editor, forward, startElm) : deleteRange(editor, startElm);\n    };\n\n    var createRange$1 = function (sc, so, ec, eo) {\n      var rng = domGlobals.document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition$1.fromRangeStart(rng);\n      var endPos = CaretPosition$1.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange$1(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize$1 = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems$1 = function (elm) {\n      return Tools.grep(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition$1.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition$1.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems$1(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var isAfterNbsp = function (container, offset) {\n      return isText$1(container) && container.nodeValue[offset - 1] === nbsp;\n    };\n    var trimOrPadLeftRight = function (rng, html) {\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      var hasSiblingText = function (siblingName) {\n        return container[siblingName] && container[siblingName].nodeType === 3;\n      };\n      if (isText$1(container)) {\n        if (offset > 0) {\n          html = html.replace(/^&nbsp;/, ' ');\n        } else if (!hasSiblingText('previousSibling')) {\n          html = html.replace(/^ /, '&nbsp;');\n        }\n        if (offset < container.length) {\n          html = html.replace(/&nbsp;(<br>|)$/, ' ');\n        } else if (!hasSiblingText('nextSibling')) {\n          html = html.replace(/(&nbsp;| )(<br>|)$/, '&nbsp;');\n        }\n      }\n      return html;\n    };\n    var trimNbspAfterDeleteAndPadValue = function (rng, value) {\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      if (isText$1(container) && rng.collapsed) {\n        if (container.data[offset] === nbsp) {\n          container.deleteData(offset, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value += ' ';\n          }\n        } else if (container.data[offset - 1] === nbsp) {\n          container.deleteData(offset - 1, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value = ' ' + value;\n          }\n        }\n      }\n      return value;\n    };\n\n    var isTableCell$2 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$2);\n        return cell === endCell && hasAllContentsSelected(Element.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var selectionSetContent = function (editor, content) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      if (rng.collapsed && isAfterNbsp(container, offset) && isText$1(container)) {\n        container.insertData(offset - 1, ' ');\n        container.deleteData(offset, 1);\n        rng.setStart(container, offset);\n        rng.setEnd(container, offset);\n        editor.selection.setRng(rng);\n      }\n      editor.selection.setContent(content);\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          selectionSetContent(editor, value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Option.from(dom.getParent(elm, 'td,th')).map(Element.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody(), elementUtils_1 = new ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          for (var testNode = node.parentNode; testNode && testNode !== root_1; testNode = testNode.parentNode) {\n            if (textInlineElements[node.nodeName.toLowerCase()] && elementUtils_1.compare(testNode, node)) {\n              dom.remove(node, true);\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom, selection = editor.selection;\n      var node2;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (editor.dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      editor.selection.scrollIntoView(marker);\n      var parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (node && node.nodeType === 3) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          node2 = marker.nextSibling;\n          if (node2 && node2.nodeType === 3) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$2(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize$1(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$2);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, Element.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode, rootNode, args;\n      var marker, rng, node;\n      var selection = editor.selection, dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = Serializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;&#x200B;</span>';\n      args = {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      };\n      args = editor.fire('BeforeSetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n        value = trimNbspAfterDeleteAndPadValue(editor.selection.getRng(), value);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret(serializer, dom, editor.selection.getRng(), fragment);\n        editor.selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        selectionSetContent(editor, bookmarkHtml);\n        parentNode = selection.getNode();\n        rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(editor.dom, editor.selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var getDocument = function () {\n      return Element.fromDom(domGlobals.document);\n    };\n\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom();\n      return element.dom() === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Option.from(root.dom().activeElement).map(Element.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: constant(start),\n        soffset: constant(soffset),\n        finish: constant(finish),\n        foffset: constant(foffset)\n      };\n    };\n    var SimRange = { create: create$4 };\n\n    var adt = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$3 = adt.before;\n    var on = adt.on;\n    var after$2 = adt.after;\n    var Situ = {\n      before: before$3,\n      on: on,\n      after: after$2,\n      cata: cata,\n      getStart: getStart\n    };\n\n    var adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$1.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$1.domRange;\n    var relative = adt$1.relative;\n    var exact = adt$1.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$3 = detect$3().browser;\n    var clamp = function (offset, element) {\n      var max = isText(element) ? get$7(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return Selection.range(rng.start(), clamp(rng.soffset(), rng.start()), rng.finish(), clamp(rng.foffset(), rng.finish()));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom()) && (contains$2(root, elm) || eq$2(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start()) && isOrContains(root, rng.finish());\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$3.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return Selection.range(Element.fromDom(r.startContainer), r.startOffset, Element.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Option.none() : Option.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark$2 = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom()).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = domGlobals.document.createRange();\n      try {\n        rng.setStart(bookmark.start().dom(), bookmark.soffset());\n        rng.setEnd(bookmark.finish().dom(), bookmark.foffset());\n        return Option.some(rng);\n      } catch (_) {\n        return Option.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark$2(Element.fromDom(editor.getBody())) : Option.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = Element.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Option.from(rng) : Option.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Option.none();\n      return bookmark.bind(function (x) {\n        return validate(Element.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils$1.DOM.bind(domGlobals.document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils$1.DOM.unbind(domGlobals.document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect$3().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$2 = DOMUtils$1.DOM;\n    var isEditorUIElement$1 = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$2.getParent(elm, function (elm) {\n        return isEditorUIElement$1(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function () {\n      try {\n        return domGlobals.document.activeElement;\n      } catch (ex) {\n        return domGlobals.document.body;\n      }\n    };\n    var registerEvents = function (editorManager, e) {\n      var editor = e.editor;\n      register(editor);\n      editor.on('focusin', function () {\n        var self = this;\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== self) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: self });\n          }\n          editorManager.setActive(self);\n          editorManager.focusedEditor = self;\n          self.fire('focus', { blurredEditor: focusedEditor });\n          self.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        var self = this;\n        Delay.setEditorTimeout(self, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(self, getActiveElement()) && focusedEditor === self) {\n            self.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          var target = e.target;\n          if (activeEditor && target.ownerDocument === domGlobals.document) {\n            if (target !== domGlobals.document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n              activeEditor.fire('blur', { focusedEditor: null });\n              editorManager.focusedEditor = null;\n            }\n          }\n        };\n        DOM$2.bind(domGlobals.document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$2.unbind(domGlobals.document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$2 = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Option.from(getNode(rng.startContainer, rng.startOffset)).map(Element.fromDom) : Option.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Option.some(node);\n        } else if (contains$2(root, node) === false) {\n          return Option.some(root);\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var normalizeSelection = function (editor, rng) {\n      getFocusInElement(Element.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom());\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus(Element.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(Element.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      return active().filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom()) && isUIElement(editor, elem.dom());\n      }).isSome();\n    };\n    var hasFocus$1 = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus$1(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      skipFocus ? activateEditor(editor) : focusEditor(editor);\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (nodeMatches.hasOwnProperty(name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (attrMatches.hasOwnProperty(name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$3 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each(matches, function (match) {\n        each(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof Node;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus$1(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html) {\n      editor.dom.setHTML(editor.getBody(), html);\n      moveSelection(editor);\n    };\n    var setContentString = function (editor, body, content, args) {\n      var forcedRootBlockName, padd;\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = Serializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(Element.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$3(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = Serializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(Element.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setContentInternal = function (editor, content, args) {\n      args.format = args.format ? args.format : defaultFormat;\n      args.set = true;\n      args.content = isTreeNode(content) ? '' : content;\n      if (!isTreeNode(content) && !args.no_events) {\n        editor.fire('BeforeSetContent', args);\n        content = args.content;\n      }\n      return Option.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, args) : setContentString(editor, body, content, args);\n      });\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split$1 = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$1(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$1(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$1(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var isEq$1 = isEq;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].inherit === false && ed.dom.is(node, formatList[i].selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return matchNode(editor, node, name, vars);\n    };\n    var matchName = function (dom, node, format) {\n      if (isEq$1(node, format.inline)) {\n        return true;\n      }\n      if (isEq$1(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var key, value;\n      var items = format[itemName];\n      var i;\n      if (format.onmatch) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (typeof items.length === 'undefined') {\n          for (key in items) {\n            if (items.hasOwnProperty(key)) {\n              if (itemName === 'attributes') {\n                value = dom.getAttrib(node, key);\n              } else {\n                value = getStyle(dom, node, key);\n              }\n              if (similar && !value && !format.exact) {\n                return;\n              }\n              if ((!similar || format.exact) && !isEq$1(value, normalizeStyleValue(dom, replaceVars(items[key], vars), key))) {\n                return;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return format;\n            }\n          }\n        }\n      }\n      return format;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var format, i, x, classes;\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (i = 0; i < formatList.length; i++) {\n          format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            if (classes = format.classes) {\n              for (x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, classes[x])) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match = function (editor, name, vars, node) {\n      if (node) {\n        return matchParents(editor, node, name, vars);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var startNode, parents, i, x, selector;\n      var dom = editor.dom;\n      if (formatList) {\n        startNode = editor.selection.getStart();\n        parents = getParents$1(dom, startNode);\n        for (x = formatList.length - 1; x >= 0; x--) {\n          selector = formatList[x].selector;\n          if (!selector || formatList[x].defaultBlock) {\n            return true;\n          }\n          for (i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var ZWSP$1 = ZWSP, CARET_ID$1 = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP$1 || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new TreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$1(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = Element.fromTag('span');\n      setAll(caretContainer, {\n        'id': CARET_ID$1,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append(caretContainer, Element.fromText(ZWSP$1));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP$1) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement(editor, false, Element.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(Element.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID$1)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(Element.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter(keys(formatter.get()), function (formatName) {\n        return formatName !== 'removeformat' && formatName !== name;\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Option.some(clonedFormatNode);\n      } else {\n        return Option.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split$1(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP$1) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom());\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split$1(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom();\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP$1) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$3 = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom());\n      before(Element.fromDom(targetNode), caretContainer);\n      remove(Element.fromDom(targetNode));\n      return CaretPosition$1(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return inlineElements.hasOwnProperty(name(element)) && !isCaretNode(element.dom()) && !isBogus(element.dom());\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom()) && isCaretContainerEmpty(element.dom());\n    };\n\n    var postProcessHooks = {}, filter$4 = filter$2, each$8 = each$2;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess = function (name, editor) {\n      each$8(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$8(filter$4(filter$4(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$9 = Tools.each;\n    var isEq$2 = isEq;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$1(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$1(container) && start && offset >= container.nodeValue.length) {\n        container = new TreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$1(container) && !start && offset === 0) {\n        container = new TreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$2 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = Element.fromDom(node);\n      var wrapper = Element.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append$1(wrapper, siblings);\n      if (next) {\n        before(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after(start, wrapper);\n        append(wrapper, start);\n      }\n      return wrapper.dom();\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isEq$2(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return isElement$1(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find$2 = function (dom, node, next, inc) {\n      node = getNonWhiteSpaceSibling(node, next, inc);\n      return !node || (node.nodeName === 'BR' || dom.isBlock(node));\n    };\n    var removeNode$1 = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (format.block) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find$2(dom, node, false) && !find$2(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find$2(dom, node, true) && !find$2(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\n              each(from$1(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$2(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = 0;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (format.selector && format.inline && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormat = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName$1(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return false;\n      }\n      var elm = node;\n      if (format.inline && format.remove === 'all' && isArray(format.preserve_attributes)) {\n        var attrsToPreserve = filter(dom.getAttribs(elm), function (attr) {\n          return contains(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          ed.dom.rename(node, 'span');\n          return true;\n        }\n      }\n      if (format.remove !== 'all') {\n        each$9(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$9(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$9(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return false;\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode$1(ed, elm, format);\n        return true;\n      }\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each(getParents$1(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            if (removeFormat(editor, formatList[i], vars, clone, clone)) {\n              clone = 0;\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n        }\n      }\n      return container;\n    };\n    var remove$6 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$1(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var process = function (node) {\n        var lastContentEditable, hasContentEditableState;\n        if (isElement$1(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from$1(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          for (var i = 0; i < formatList.length; i++) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$1(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, true);\n        if (format.split) {\n          expandedRng = split$1(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Option.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Option.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$2(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$2(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$1(dom, newRng, function (nodes) {\n              each(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$1(dom, expandedRng, function (nodes) {\n          each(nodes, function (node) {\n            process(node);\n            var textDecorations = [\n              'underline',\n              'line-through',\n              'overline'\n            ];\n            each(textDecorations, function (decoration) {\n              if (isElement$1(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n                removeFormat(ed, {\n                  deep: false,\n                  exact: true,\n                  inline: 'span',\n                  styles: { textDecoration: decoration }\n                }, null, node);\n              }\n            });\n          });\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        return;\n      }\n      if (!selection.isCollapsed() || !format.inline || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (format.inline && match(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n    };\n\n    var each$a = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$1(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      var sibling;\n      for (sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$1(sibling) && sibling.nodeValue.length !== 0) {\n          return node;\n        }\n        if (isElement$1(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var sibling, tmpSibling;\n      var elementUtils = new ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (sibling = prev.nextSibling; sibling && sibling !== next;) {\n            tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var processChildElements = function (node, filter, process) {\n      each$a(node.childNodes, function (node) {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (format.inline === 'sub' || format.inline === 'sup') {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        node = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        node = mergeSiblingsNodes(dom, node, getNonWhiteSpaceSibling(node, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$a(dom.select(selector, node), function (node) {\n          if (isElementNode(node)) {\n            each$a(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$a(formatList, function (format) {\n        each$a(editor.dom.select(format.inline, node), function (child) {\n          if (!isElementNode(child)) {\n            return;\n          }\n          removeFormat(editor, format, vars, child, format.exact ? child : null);\n        });\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$b = Tools.each;\n    var isElementNode$1 = function (node) {\n      return node && node.nodeType === 1 && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus(node);\n    };\n    var applyFormat = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var rng;\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom, selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        fmt = fmt || format;\n        if (elm) {\n          if (fmt.onformat) {\n            fmt.onformat(elm, fmt, vars, node);\n          }\n          each$b(fmt.styles, function (value, name) {\n            dom.setStyle(elm, name, replaceVars(value, vars));\n          });\n          if (fmt.styles) {\n            var styleVal = dom.getAttrib(elm, 'style');\n            if (styleVal) {\n              dom.setAttrib(elm, 'data-mce-style', styleVal);\n            }\n          }\n          each$b(fmt.attributes, function (value, name) {\n            dom.setAttrib(elm, name, replaceVars(value, vars));\n          });\n          each$b(fmt.classes, function (value) {\n            value = replaceVars(value, vars);\n            if (!dom.hasClass(elm, value)) {\n              dom.addClass(elm, value);\n            }\n          });\n        }\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        if (!format.selector) {\n          return false;\n        }\n        each$b(formatList, function (format) {\n          if ('collapsed' in format && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var applyRngStyle = function (dom, rng, bookmark, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = dom.create(wrapName);\n        setElementFormat(wrapElm);\n        walk$1(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentName = node.parentNode.nodeName.toLowerCase();\n            if (isElement$1(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isEq(nodeName, 'br')) {\n              currentWrapElm = 0;\n              if (format.block) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = 0;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && format.block && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              node = dom.rename(node, wrapName);\n              setElementFormat(node);\n              newWrappers.push(node);\n              currentWrapElm = 0;\n              return;\n            }\n            if (format.selector) {\n              var found = applyNodeStyle(formatList, node);\n              if (!format.inline || found) {\n                currentWrapElm = 0;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && node.nodeType === 3 && node.nodeValue.length === 1 && node.nodeValue.charCodeAt(0) === 65279) && !isCaretNode(node) && (!format.inline || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = 0;\n              each$b(Tools.grep(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = 0;\n            }\n          };\n          each$b(nodes, process);\n        });\n        if (format.links === true) {\n          each$b(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$b(Tools.grep(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$b(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$b(node.childNodes, function (node) {\n              if (!isEmptyTextNode(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var getChildElementNode = function (root) {\n            var child = false;\n            each$b(root.childNodes, function (node) {\n              if (isElementNode$1(node)) {\n                child = node;\n                return false;\n              }\n            });\n            return child;\n          };\n          var mergeStyles = function (node) {\n            var clone;\n            var child = getChildElementNode(node);\n            if (child && !isBookmarkNode$1(child) && matchName(dom, child, format)) {\n              clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n            }\n            return clone || node;\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (format.inline || format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride && dom.is(node, formatList[i].selector)) {\n            setElementFormat(node, formatList[i]);\n            return;\n          }\n        }\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), null, true);\n            }\n          } else {\n            applyRngStyle(dom, node, null, true);\n          }\n        } else {\n          if (!isCollapsed || !format.inline || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            if (!ed.settings.forced_root_block && formatList[0].defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat(ed, formatList[0].defaultBlock);\n            }\n            selection.setRng(normalize$1(selection.getRng()));\n            preserve(selection, true, function (bookmark) {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess(name, ed);\n      }\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$6(editor, name, vars, node);\n      } else {\n        applyFormat(editor, name, vars, node);\n      }\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: constant(element),\n        width: constant(width),\n        rows: constant(rows)\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: constant(element),\n        cells: constant(cells)\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: constant(x),\n        y: constant(y)\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$3(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows();\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells();\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows();\n      var cells = rows[y] ? rows[y].cells() : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells().length > acc ? row.cells().length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows();\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells();\n        for (var x = 0; x < cells.length; x++) {\n          if (eq$2(cells[x], element)) {\n            return Option.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Option.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows();\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells();\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element(), slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x(), sy = startPos.y();\n      var ex = endPos.x(), ey = endPos.y();\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element(), getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element());\n      var tableBody = Element.fromTag('tbody');\n      append$1(tableBody, rows);\n      append(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map(table.rows(), function (row) {\n        var cells = map(row.cells(), function (cell) {\n          var td = deep(cell);\n          remove$1(td, 'colspan');\n          remove$1(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element());\n        append$1(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom$1 = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each(descendants$1(tableElm, 'tr'), function (tr, y) {\n        each(descendants$1(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element(), getWidth(table.rows()), table.rows());\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          return [\n            Element.fromTag('li'),\n            Element.fromTag(name(listCont))\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap$3 = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = Element.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter(parents, function (elm) {\n        return isInline(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap$3(Element.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$1(cell, 'table', curry(eq$2, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom$1(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$1 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace$1(text.charAt(index));\n    };\n    var getInnerText = function (bin) {\n      var text = trim$3(bin.innerText);\n      return Env.browser.isIE() ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getTextContent = function (editor) {\n      return Option.from(editor.selection.getRng()).map(function (rng) {\n        var bin = editor.dom.add(editor.getBody(), 'div', {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin);\n        var nonRenderedText = trim$3(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n          var parentBlockText = getInnerText(parentBlock);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex !== -1) {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          } else {\n            return text;\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$1(Element.fromDom(editor.getBody()), ranges).dom() : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.get = true;\n      args.format = format;\n      args.selection = true;\n      args = editor.fire('BeforeGetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('GetContent', args);\n        return args.content;\n      }\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        args.getInner = true;\n        var content = getSerializedContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          args.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', args);\n          return args.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$1(elm)) {\n        return elm.outerHTML;\n      } else if (isText$1(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment$1(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment$1 = function (html) {\n      var node;\n      var container = domGlobals.document.createElement('div');\n      var frag = domGlobals.document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment$1(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm) {\n      return filter(map(from$1(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map(from$1(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var undoLevelDocument = Cell(Option.none());\n    var lazyTempDocument = function () {\n      return undoLevelDocument.get().getOrThunk(function () {\n        var doc = domGlobals.document.implementation.createHTMLDocument('undo');\n        undoLevelDocument.set(Option.some(doc));\n        return doc;\n      });\n    };\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments = read$2(editor.getBody());\n      var trimmedFragments = bind(fragments, function (html) {\n        var trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      var content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, { format: 'raw' });\n      }\n      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = Element.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each(descendants$1(elm, '*[data-mce-bogus]'), unwrap);\n      return get$6(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$3 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(Option.some(getUndoBookmark(editor.selection)));\n      }\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$3(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      editor.fire('AddUndo', args);\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('change', args);\n      }\n      return level;\n    };\n    var clear = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$3(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var isTreeNode$1 = function (content) {\n      return content instanceof Node;\n    };\n    var runSerializerFiltersOnFragment = function (editor, fragment) {\n      filter$3(editor.serializer.getNodeFilters(), editor.serializer.getAttributeFilters(), fragment);\n    };\n    var createDummyUndoLevel = function () {\n      return {\n        type: 'complete',\n        fragments: [],\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange(editor, locks, beforeBookmark);\n          },\n          addUndoLevel: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          apply: function (name, vars, node) {\n            return applyFormat(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$6(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Option.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (tinymceEditor, rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var unsupported = die('Unimplemented feature for rtc');\n      var ignore = noop;\n      return {\n        undoManager: {\n          beforeChange: ignore,\n          addUndoLevel: unsupported,\n          undo: function () {\n            rtcEditor.undo();\n            return createDummyUndoLevel();\n          },\n          redo: function () {\n            rtcEditor.redo();\n            return createDummyUndoLevel();\n          },\n          clear: unsupported,\n          reset: unsupported,\n          hasUndo: function () {\n            return rtcEditor.hasUndo();\n          },\n          hasRedo: function () {\n            return rtcEditor.hasRedo();\n          },\n          transact: function (_undoManager, _locks, fn) {\n            rtcEditor.transact(fn);\n            return createDummyUndoLevel();\n          },\n          ignore: unsupported,\n          extra: unsupported\n        },\n        formatter: {\n          apply: function (name, vars, _node) {\n            return rtcEditor.applyFormat(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return rtcEditor.removeFormat(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return rtcEditor.toggleFormat(name, defaultVars(vars));\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            if (format === 'html' || format === 'tree') {\n              var fragment = rtcEditor.getContent();\n              var serializer = Serializer({ inner: true });\n              runSerializerFiltersOnFragment(tinymceEditor, fragment);\n              return format === 'tree' ? fragment : serializer.serialize(fragment);\n            } else {\n              return makePlainAdaptor(tinymceEditor).editor.getContent(args, format);\n            }\n          },\n          setContent: function (content, _args) {\n            var fragment = isTreeNode$1(content) ? content : tinymceEditor.parser.parse(content, {\n              isRootContent: true,\n              insert: true\n            });\n            rtcEditor.setContent(fragment);\n            return content;\n          },\n          insertContent: function (value, _details) {\n            var fragment = isTreeNode$1(value) ? value : tinymceEditor.parser.parse(value, { insert: true });\n            rtcEditor.insertContent(fragment);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            if (format === 'html' || format === 'tree') {\n              var fragment = rtcEditor.getSelectedContent();\n              var serializer = Serializer({});\n              runSerializerFiltersOnFragment(tinymceEditor, fragment);\n              return format === 'tree' ? fragment : serializer.serialize(fragment);\n            } else {\n              return makePlainAdaptor(tinymceEditor).selection.getContent(format, args);\n            }\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Option.some(rtcEditor.getRawModel());\n          }\n        }\n      };\n    };\n    var isRtc = function (editor) {\n      return has(editor.plugins, 'rtc');\n    };\n    var setup$4 = function (editor) {\n      var editorCast = editor;\n      return get(editor.plugins, 'rtc').fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Option.none();\n      }, function (rtc) {\n        return Option.some(rtc.setup().then(function (rtcEditor) {\n          editorCast.rtcInstance = makeRtcAdaptor(editor, rtcEditor);\n          return rtcEditor.isRemote;\n        }));\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.addUndoLevel(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo$1 = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset$1 = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo$1 = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact$1 = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore$1 = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var applyFormat$1 = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat$1 = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var getContent = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n\n    var defaultFormat$1 = 'html';\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat$1;\n      return getContent(editor, args, format);\n    };\n\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent(editor, content, args);\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n\n    var DOM$3 = DOMUtils$1.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$3.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Option.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$3.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove$7 = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$3.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$3.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var deep$1 = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$2.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep$1);\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect$3().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map(isString(pluginNames) ? pluginNames.split(' ') : [], trim);\n      return filter(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter(plugins, curry(contains, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = sections.hasOwnProperty(name) ? sections[name] : {};\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return sectionResult.sections().hasOwnProperty(name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get(settings, 'toolbar_mode').orThunk(function () {\n        return get(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins$1 = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile') ? filterLegacyMobilePlugins(mobilePlugins) : isMobileDevice && hasSection(sectionResult, 'mobile') ? mobilePlugins : desktopPlugins;\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins$1(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      return combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Option.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has$1 = function (id) {\n        return has(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has$1\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom();\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$4(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect$1 = function (elm) {\n      return elm.dom().getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect$1(elm);\n      var deltaX = inline ? clientRect.left + elm.dom().clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom().clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = Element.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Option.from(node).map(Element.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(function (container) {\n        return contains$2(owner(container), container);\n      }).getOr(false);\n    };\n\n    function NotificationManagerImpl() {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    }\n\n    function NotificationManager(editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Option.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec) {\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        return find(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n          });\n          addNotification(notification);\n          reposition();\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = function () {\n        return notifications;\n      };\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            });\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    }\n\n    var PluginManager = AddOnManager$1.PluginManager;\n\n    var ThemeManager = AddOnManager$1.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          return f ? f.apply(scope, arguments) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Option.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        getImplementation().alert(message, funcBind(scope ? scope : this, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        getImplementation().confirm(message, funcBind(scope ? scope : this, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      domGlobals.console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = domGlobals.window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArrays([message], x));\n        } else {\n          console.log.apply(console, __spreadArrays([message], x));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      var contentCss = getContentCss(editor);\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map(contentCss, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor));\n    };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$4(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$4(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$8 = function (element) {\n      return api$1.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var element = doc.dom() === domGlobals.document ? Option.none() : Option.from(doc.dom().defaultView.frameElement);\n      return element.map(Element.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$3 = function (element) {\n      var doc = Element.fromDom(domGlobals.document);\n      var scroll = get$1(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left(),\n          top: b.top + loc.top()\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return Position(r.left + offset.left() + scroll.left(), r.top + offset.top() + scroll.top());\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText(last)) {\n            return {\n              element: last,\n              offset: get$7(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$8(element);\n      return {\n        element: element,\n        bottom: pos.top() + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = Element.fromHtml('<span data-mce-bogus=\"all\">' + ZWSP + '</span>');\n      before(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(Element.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom(),\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$1(doc).top();\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = Element.fromDom(editor.getBody());\n      var doc = Element.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(Element.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = Element.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(Element.fromDom(startElement), Element.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left(), pos.top(), doc);\n      } else {\n        var y = pos.top() - viewHeight + marker.height;\n        to(pos.left(), y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top();\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom().defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom().defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$3(marker.element);\n      var viewportBounds = getBounds(domGlobals.window);\n      if (op.top() < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top() > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue(node) || isContentEditableFalse(node);\n    };\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse(findParent(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint$1 = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (doc.caretRangeFromPoint) {\n        rng = doc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Option.from(container).map(Element.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement(elm) ? Option.some(elm) : parent(elm).filter(isElement);\n      }).map(function (elm) {\n        return elm.dom();\n      }).getOr(root);\n    };\n    var getStart$2 = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$1(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode$1 = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart$2(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new TreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select$1 = function (dom, node, content) {\n      return Option.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint$1(dom, rng, node, true);\n          moveEndPoint$1(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var getContent$2 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var isEq$4 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent = function (node, rootNode, predicate) {\n      return findParent$1(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable$3 = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$3 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer(node) && hasParent(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new TreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Option.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new TreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Option.none();\n        }\n        if (isText$1(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Option.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Option.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Option.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Option.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Option.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$1(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer(container)) {\n        return Option.none();\n      }\n      if (isElement$1(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer(node)) {\n              return Option.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$3(node)) {\n              return Option.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$1(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$3(container)) {\n            return Option.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer(container)) {\n            return Option.none();\n          }\n          if (container.hasChildNodes() && isTable$3(container) === false) {\n            node = container;\n            var walker = new TreeWalker(container, body);\n            do {\n              if (isContentEditableFalse(node) || isCaretContainer(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$1(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$3(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$1(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$1(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$1(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Option.some(CaretPosition(container, offset)) : Option.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Option.none() : Option.some(normRng);\n    };\n\n    var prependData = function (target, data) {\n      target.insertData(0, data);\n    };\n    var removeEmpty = function (text) {\n      if (text.dom().length === 0) {\n        remove(text);\n        return Option.none();\n      }\n      return Option.some(text);\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Option.from(fragment.firstChild).map(Element.fromDom);\n      var lastChild = Option.from(fragment.lastChild).map(Element.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText).bind(removeEmpty);\n      lift2(prevText, firstChild.filter(isText), function (prev, start) {\n        prependData(start.dom(), prev.dom().data);\n        remove(prev);\n      });\n      lift2(nextText, lastChild.filter(isText), function (next, end) {\n        var oldLength = end.dom().length;\n        end.dom().appendData(next.dom().data);\n        rng.setEnd(end.dom(), oldLength);\n        remove(next);\n      });\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var node = editor.parser.parse(args.content, __assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, args));\n        return Serializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$2 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var contentArgs = setupArgs(args, content);\n      if (!contentArgs.no_events) {\n        contentArgs = editor.fire('BeforeSetContent', contentArgs);\n        if (contentArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', contentArgs);\n          return;\n        }\n      }\n      args.content = cleanContent(editor, contentArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(args.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!contentArgs.no_events) {\n        editor.fire('SetContent', contentArgs);\n      }\n    };\n\n    function BookmarkManager(selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    }\n    (function (BookmarkManager) {\n      BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n    }(BookmarkManager || (BookmarkManager = {})));\n    var BookmarkManager$1 = BookmarkManager;\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$1(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$6 = isContentEditableFalse;\n    var isContentEditableTrue$2 = isContentEditableTrue;\n    var getContentEditableRoot = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$2(node) || isContentEditableFalse$6(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var ControlSelection = function (selection, editor) {\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = domGlobals.document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTarget = function (elm) {\n        return editor.dom.is(elm, 'figure.image') ? elm.querySelector('img') : elm;\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (selector === false || Env.iOS) {\n          return false;\n        }\n        if (typeof selector !== 'string') {\n          selector = 'table,img,figure.image,div';\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        return is$1(Element.fromDom(elm), selector);\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        dom.setStyles(getResizeTarget(ghostElm), {\n          width: width,\n          height: height\n        });\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if (isImage(selectedElm) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        var setSizeProp = function (name, value) {\n          if (value) {\n            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {\n              dom.setStyle(getResizeTarget(selectedElm), name, value);\n            } else {\n              dom.setAttrib(getResizeTarget(selectedElm), name, '' + value);\n            }\n          }\n        };\n        if (wasResizeStarted) {\n          setSizeProp('width', width);\n          setSizeProp('height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        hideResizeRect();\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = getResizeTarget(selectedElm).clientWidth;\n              startH = getResizeTarget(selectedElm).clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              handle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              selectedElmGhost = selectedElm.cloneNode(true);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = false;\n              selectedElmGhost.unSelectabe = true;\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute('data-mce-selected');\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        selectedElm.setAttribute('data-mce-selected', '1');\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute('data-mce-selected');\n        }\n        each$1(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute('data-mce-selected');\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$6(getContentEditableRoot(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$1(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, false);\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && callbackMap.hasOwnProperty(selector)) {\n        var newCallbacks = filter(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                Tools.each(parents, function (node) {\n                  if (dom.is(node, selector)) {\n                    if (!currentSelectors[selector]) {\n                      Tools.each(callbacks, function (callback) {\n                        callback(true, {\n                          node: node,\n                          selector: selector,\n                          parents: parents\n                        });\n                      });\n                      currentSelectors[selector] = callbacks;\n                    }\n                    matchedSelectors[selector] = callbacks;\n                    return false;\n                  }\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$2(Element.fromDom(node.ownerDocument), Element.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var Selection$1 = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (!node) {\n          moveEndPoint$1(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        } else {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$2(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$2(editor, content, args);\n      };\n      var getStart = function (real) {\n        return getStart$2(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select = function (node, content) {\n        select$1(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        if (!win) {\n          return null;\n        }\n        var doc = win.document;\n        if (typeof doc === 'undefined' || doc === null) {\n          return null;\n        }\n        if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n          }\n        } catch (ex) {\n        }\n        rng = processRanges(editor, [rng])[0];\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode = function () {\n        return getNode$1(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        if (!sel || !sel.anchorNode || !sel.focusNode) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(sel.anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(sel.focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize$2(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint$1(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition$1.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager$1(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$1 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr = new domGlobals.XMLHttpRequest();\n          xhr.open('GET', url, true);\n          xhr.responseType = 'blob';\n          xhr.onload = function () {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr.onerror = rejectWithError;\n          xhr.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = domGlobals.atob(data);\n      } catch (e) {\n        return Option.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Option.some(new domGlobals.Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri$1(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new domGlobals.Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri$1(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri$1(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from$1(elm.getElementsByTagName('img')) : [];\n    };\n    function ImageScanner(uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = constant(true);\n        }\n        var images = filter(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    }\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new Node('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new Node('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty$2 = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (blockElements[node.name] || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return img.attr('data-mce-bogus');\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || img.attr('data-mce-placeholder');\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new domGlobals.Image();\n        imgElem_1.src = img.attr('src');\n        each$1(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Option.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each(nodes, processImage);\n        });\n      }\n    };\n    var register$2 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName !== 'br') {\n                    break;\n                  }\n                  if (prevName === 'br') {\n                    node = null;\n                    break;\n                  }\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new Node('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new Node('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node, classList, ci, className, classValue;\n          var validClasses = schema.getValidClasses();\n          var validClassesMap, valid;\n          while (i--) {\n            node = nodes[i];\n            classList = node.attr('class').split(' ');\n            classValue = '';\n            for (ci = 0; ci < classList.length; ci++) {\n              className = classList[ci];\n              valid = false;\n              validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var makeMap$4 = Tools.makeMap, each$c = Tools.each, explode$2 = Tools.explode, extend$2 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i;\n        var sibling, nextNode;\n        var nonSplitableElements = makeMap$4('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        for (ni = 0; ni < nodes.length; ni++) {\n          node = nodes[ni];\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap(node);\n            continue;\n          }\n          parents = [node];\n          for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent) {\n            parents.push(parent);\n          }\n          if (parent && parents.length > 1) {\n            parents.reverse();\n            newParent = currentNode = filterNode(parents[0].clone());\n            for (i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = filterNode(parents[i].clone());\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty$2(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty$2(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new Node('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new Node('div', 1)));\n            } else {\n              if (specialElements[node.name]) {\n                node.empty().remove();\n              } else {\n                node.unwrap();\n              }\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var i, name, list;\n        name = node.name;\n        if (name in nodeFilters) {\n          list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        i = attributeFilters.length;\n        while (i--) {\n          name = attributeFilters[i].name;\n          if (name in node.attributes.map) {\n            list = matchedAttributes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[name] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$c(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (nodeFilters.hasOwnProperty(name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$c(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var isInWhiteSpacePreservedElement;\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$2(makeMap$4('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        isInWhiteSpacePreservedElement = whiteSpaceElements.hasOwnProperty(args.context) || whiteSpaceElements.hasOwnProperty(settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, next, rootBlockNode;\n          var trim = function (rootBlockNode) {\n            if (rootBlockNode) {\n              node = rootBlockNode.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlockNode.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new Node(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var textNode, textNodeNext, textVal, sibling;\n          var blockElements = schema.getBlockElements();\n          for (textNode = node.prev; textNode && textNode.type === 3;) {\n            textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var name;\n          var output = {};\n          for (name in input) {\n            if (name !== 'li' && name !== 'p') {\n              output[name] = input[name];\n            }\n          }\n          return output;\n        };\n        var parser = SaxParser$1({\n          validate: validate,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var newNode, attrFiltersLen, attrName, parent;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              parent = children[node.name];\n              if (parent && children[newNode.name] && !parent[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling, tempNode;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                tempNode = node.parent;\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n                node = tempNode;\n                return;\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new Node(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!matchedNodes.hasOwnProperty(name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$2(exports, settings);\n      register$1(exports, settings);\n      return exports;\n    };\n\n    var register$3 = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, value;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Option.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp$1(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var i = nodes.length, node, value, type;\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        while (i--) {\n          node = nodes[i];\n          value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var doc, oldDoc;\n      var dom = editor.dom;\n      node = node.cloneNode(true);\n      var impl = domGlobals.document.implementation;\n      if (impl.createHTMLDocument) {\n        doc = impl.createHTMLDocument('');\n        Tools.each(node.nodeName === 'BODY' ? node.childNodes : [node], function (node) {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (node.nodeName !== 'BODY') {\n          node = doc.body.firstChild;\n        } else {\n          node = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: node }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return node;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess$1 = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$3(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(Element.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = Serializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess$1(editor, args, content);\n    };\n    var DomSerializer = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils$1.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register$3(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: function (rules) {\n          schema.addValidElements(rules);\n        },\n        setRules: function (rules) {\n          schema.setValidElements(rules);\n        },\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: function () {\n          return tempAttrs;\n        },\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var Serializer$1 = function (settings, editor) {\n      var domSerializer = DomSerializer(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    function Uploader(uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new domGlobals.XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, error) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: error\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          var noop = function () {\n          };\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error) {\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              if (!notification) {\n                notification = openNotification();\n              }\n              notification.progressBar.value(percent);\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    }\n\n    function UploadStatus () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    }\n\n    var count$1 = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count$1++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, filename) {\n        if (isString(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(name + '.' + mimeToExt(o.blob.type)),\n          blob: constant(o.blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || domGlobals.URL.createObjectURL(o.blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            domGlobals.URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each(cache, function (cachedBlobInfo) {\n          domGlobals.URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', 'src=\"' + replacementUrl + '\"');\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var openNotification = function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = Uploader(uploadStatus, {\n            url: getImageUploadUrl(editor),\n            basePath: getImageUploadBasePath(editor),\n            credentials: getImagesUploadCredentials(editor),\n            handler: getImagesUploadHandler(editor)\n          });\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {\n            var filteredResult = map(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                replaceImageUriInView(image, uploadInfo.url);\n              } else if (uploadInfo.error) {\n                uploadError(editor, uploadInfo.error);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          each(result, function (resultItem) {\n            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n            resultItem.image.src = resultItem.blobInfo.blobUri();\n            resultItem.image.removeAttribute('data-mce-src');\n          });\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var setup$5 = function (registeredFormatListeners, editor) {\n      var currentFormats = Cell({});\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, currentFormats, registeredFormatListeners.get());\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, currentFormats, formatChangeData) {\n      var formatsList = keys(currentFormats.get());\n      var newFormats = {};\n      var matchedFormats = {};\n      var parents = filter(getParents$1(editor.dom, elm), function (node) {\n        return node.nodeType === 1 && !node.getAttribute('data-mce-bogus');\n      });\n      each$1(formatChangeData, function (data, format) {\n        Tools.each(parents, function (node) {\n          if (editor.formatter.matchNode(node, format, {}, data.similar)) {\n            if (formatsList.indexOf(format) === -1) {\n              each(data.callbacks, function (callback) {\n                callback(true, {\n                  node: node,\n                  format: format,\n                  parents: parents\n                });\n              });\n              newFormats[format] = data.callbacks;\n            }\n            matchedFormats[format] = data.callbacks;\n            return false;\n          }\n          if (matchesUnInheritedFormatSelector(editor, node, format)) {\n            return false;\n          }\n        });\n      });\n      var remainingFormats = filterRemainingFormats(currentFormats.get(), matchedFormats, elm, parents);\n      currentFormats.set(__assign(__assign({}, newFormats), remainingFormats));\n    };\n    var filterRemainingFormats = function (currentFormats, matchedFormats, elm, parents) {\n      return bifilter(currentFormats, function (callbacks, format) {\n        if (!has(matchedFormats, format)) {\n          each(callbacks, function (callback) {\n            callback(false, {\n              node: elm,\n              format: format,\n              parents: parents\n            });\n          });\n          return false;\n        } else {\n          return true;\n        }\n      }).t;\n    };\n    var addListeners = function (registeredFormatListeners, formats, callback, similar) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        if (!formatChangeItems[format]) {\n          formatChangeItems[format] = {\n            similar: similar,\n            callbacks: []\n          };\n        }\n        formatChangeItems[format].callbacks.push(callback);\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        formatChangeItems[format].callbacks = filter(formatChangeItems[format].callbacks, function (c) {\n          return c !== callback;\n        });\n        if (formatChangeItems[format].callbacks.length === 0) {\n          delete formatChangeItems[format];\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar) {\n      if (registeredFormatListeners.get() === null) {\n        setup$5(registeredFormatListeners, editor);\n      }\n      addListeners(registeredFormatListeners, formats, callback, similar);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var get$9 = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function () {\n            return true;\n          },\n          onformat: function (elm, fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    function FormatRegistry(editor) {\n      var formats = {};\n      var get = function (name) {\n        return name ? formats[name] : formats;\n      };\n      var has$1 = function (name) {\n        return has(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (typeof name !== 'string') {\n            Tools.each(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray(format)) {\n              format = [format];\n            }\n            Tools.each(format, function (format) {\n              if (typeof format.deep === 'undefined') {\n                format.deep = !format.selector;\n              }\n              if (typeof format.split === 'undefined') {\n                format.split = !format.selector || format.inline;\n              }\n              if (typeof format.remove === 'undefined' && format.selector && !format.inline) {\n                format.remove = 'none';\n              }\n              if (format.selector && format.inline) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (typeof format.classes === 'string') {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get$9(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get,\n        has: has$1,\n        register: register,\n        unregister: unregister\n      };\n    }\n\n    var each$d = Tools.each;\n    var dom = DOMUtils$1.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get(format, 'preview');\n        if (previewOpt.is(false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$d(format.styles, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setStyle(previewElm, name, value);\n        }\n      });\n      each$d(format.attributes, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setAttrib(previewElm, name, value);\n        }\n      });\n      each$d(format.classes, function (value) {\n        value = removeVars(value);\n        if (!dom.hasClass(previewElm, value)) {\n          dom.addClass(previewElm, value);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$d(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$6 = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$6(editor);\n      setup$3(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat$1(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat$1(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: curry(match, editor),\n        matchAll: curry(matchAll, editor),\n        matchNode: curry(matchNode, editor),\n        canApply: curry(canApply, editor),\n        formatChanged: curry(formatChanged, editor, formatChangeState),\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var registerEvents$1 = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd !== 'undo' && cmd !== 'redo' && cmd !== 'mcerepaint') {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd !== 'undo' && cmd !== 'redo' && cmd !== 'mcerepaint') {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$3(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = Cell(Option.none());\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange$1(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo$1(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo$1(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear$1(editor, undoManager, index);\n        },\n        reset: function () {\n          reset$1(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo$1(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo$1(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact$1(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore$1(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra$1(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents$1(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty$1(Element.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Option.none();\n      }\n      return Option.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x());\n      var distY = Math.abs(touch.clientY - data.y());\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$8 = function (editor) {\n      var startData = Cell(Option.none());\n      var longpressFired = Cell(false);\n      var debounceLongpress = last$2(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: constant(touch.clientX),\n            y: constant(touch.clientY),\n            target: constant(e.target)\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(Option.some(data));\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Option.none());\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target().isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return blockElements.hasOwnProperty(node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$1(node)) {\n        return true;\n      } else if (isElement$1(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents$1(Element.fromDom(node), Element.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom());\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$1(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$1(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus$1(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$9 = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition$1(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition$1.fromRangeEnd(rng) : CaretPosition$1.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var isText$8 = isText$1;\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[0] === ZWSP;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[node.data.length - 1] === ZWSP;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP);\n    };\n    var insertBefore$1 = function (node) {\n      if (isText$8(node.previousSibling)) {\n        if (endsWithCaretContainer$1(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP);\n          return node.previousSibling;\n        }\n      } else if (isText$8(node)) {\n        if (startsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter$1 = function (node) {\n      if (isText$8(node.nextSibling)) {\n        if (startsWithCaretContainer$1(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP);\n          return node.nextSibling;\n        }\n      } else if (isText$8(node)) {\n        if (endsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline$1 = function (before, node) {\n      return before ? insertBefore$1(node) : insertAfter$1(node);\n    };\n    var insertInlineBefore = curry(insertInline$1, true);\n    var insertInlineAfter = curry(insertInline$1, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$1(pos.container())) {\n        return insertInline$1(before, pos.container());\n      } else {\n        return insertInline$1(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$5(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$5(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition$1(text, 1);\n          } else {\n            return CaretPosition$1(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$5(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition$1(text, text.length - 1);\n          } else {\n            return CaretPosition$1(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$5(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, 1));\n      });\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$1(Element.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl$1 = function (element) {\n      return DOMUtils$1.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter(DOMUtils$1.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Option.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock(node1, rootNode);\n      var block2 = getParentBlock(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$1(container.nextSibling)) {\n            return CaretPosition$1(container.nextSibling, 0);\n          } else {\n            return CaretPosition$1.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition$1(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$1(container.previousSibling)) {\n            return CaretPosition$1(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition$1.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition$1(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Option.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before$4 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Option.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Option.some(Location.start(inline)) : Option.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Option.some(Location.end(inline)) : Option.none();\n      });\n    };\n    var after$3 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Option.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl$1(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before$4,\n        start,\n        end,\n        after$3\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq$5 = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(constant(true), function (fromLocation) {\n        return !isEq$5(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Option.some, Location.start), Option.none, compose(Option.some, Location.after), Option.none);\n      } else {\n        return location.fold(Option.none, compose(Option.some, Location.before), Option.none, compose(Option.some, Location.end));\n      }\n    };\n    var findLocation = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    var prevLocation = curry(findLocation, false);\n    var nextLocation = curry(findLocation, true);\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation$1 = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map(descendants$1(Element.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom();\n      });\n      var selectedInlines = filter(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter(elms, isInlineTarget);\n      each(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition$1.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter(elms, isInlineTarget);\n        each(inlines, function (_inline) {\n          var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move = function (editor, caret, forward) {\n      return function () {\n        return isInlineBoundariesEnabled(editor) ? findLocation$1(editor, caret, forward).isSome() : false;\n      };\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return function () {\n        return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n      };\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk$3 = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start, nextPos;\n      var positions = [];\n      while (currentPos) {\n        nextPos = walk$3(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Option.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Option.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Option.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Option.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map(clientRects, function (clientRect) {\n          clientRect = clone$2(clientRect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$1(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$1(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil$1 = function (direction, root, predicateFn, node) {\n      while (node = findNode(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var i, clientRect, clientRects;\n        clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (i = 0; i < clientRects.length; i++) {\n          clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil$1(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil, VDirection.Up, isAbove, isBelow);\n    var downUntil = curry(walkUntil, VDirection.Down, isBelow, isAbove);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn, isBelowFn, isAboveFn, caretPosition;\n      var result = [];\n      var line = 0, clientRect;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow;\n        isAboveFn = isAbove;\n        caretPosition = CaretPosition$1.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove;\n        isAboveFn = isBelow;\n        caretPosition = CaretPosition$1.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        clientRect = getClientRect(caretPosition);\n        if (isAboveFn(clientRect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(clientRect, last$1(result))) {\n          line++;\n        }\n        clientRect = clone$2(clientRect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$7 = isContentEditableFalse;\n    var findNode$1 = findNode;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInsideX(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$7(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil$1 = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode$1(startNode, direction, isEditableCaretCandidate, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode$1(node, direction, isEditableCaretCandidate, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil$1(VDirection.Up, root, curry(collect, isAbove), targetNodeRect.node, includeChildren);\n      walkUntil$1(VDirection.Down, root, curry(collect, isBelow), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter(from$1(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        var includeChildren = !isTable(closestNodeRect.node);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var isContentEditableTrue$3 = isContentEditableTrue;\n    var isContentEditableFalse$8 = isContentEditableFalse;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView);\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return null;\n      }\n      return getNodeRange(node);\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition$1.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isContentEditableFalse$8(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isContentEditableFalse$8(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$8(node) || isContentEditableTrue$3(node);\n      });\n      if (isContentEditableFalse$8(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return null;\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      if (!range || !range.collapsed) {\n        return range;\n      }\n      var caretRange = renderCaretAtRange(editor, range, scrollIntoView);\n      if (caretRange) {\n        return caretRange;\n      }\n      return range;\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse;\n    var getSelectedNode$1 = getSelectedNode;\n    var moveToCeFalseHorizontally = function (direction, editor, getNextPosFn, range) {\n      var forwards = direction === HDirection.Forwards;\n      var isBeforeContentEditableFalseFn = forwards ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      if (!range.collapsed) {\n        var node = getSelectedNode$1(range);\n        if (isContentEditableFalse$9(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, true);\n        }\n      }\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeContentEditableFalseFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        if (rangeIsInContainerBlock) {\n          return range;\n        }\n        return null;\n      }\n      if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, true);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, true);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaret(editor, nextCaretPosition.toRange(), true);\n      }\n      return null;\n    };\n    var moveToCeFalseVertically = function (direction, editor, walkerFn, range) {\n      var closestNextLineRect, dist1, dist2, contentEditableFalseNode;\n      contentEditableFalseNode = getSelectedNode$1(range);\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter(linePositions, isLine(1));\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      if (isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode();\n      }\n      if (isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode(true);\n      }\n      if (!caretClientRect) {\n        return null;\n      }\n      var clientX = caretClientRect.left;\n      closestNextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (closestNextLineRect) {\n        if (isContentEditableFalse$9(closestNextLineRect.node)) {\n          dist1 = Math.abs(clientX - closestNextLineRect.left);\n          dist2 = Math.abs(clientX - closestNextLineRect.right);\n          return showCaret(direction, editor, closestNextLineRect.node, dist1 < dist2, true);\n        }\n      }\n      if (contentEditableFalseNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), contentEditableFalseNode);\n        closestNextLineRect = findClosestClientRect(filter(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n        closestNextLineRect = last$1(filter(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n      }\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var pre, caretPos, newBlock;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        if (direction === 1) {\n          caretPos = getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        } else {\n          caretPos = getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        }\n        if (!caretPos) {\n          newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var newRange;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseHorizontally(direction, editor, getNextPosFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var getVerticalRange = function (editor, down) {\n      var newRange;\n      var direction = down ? 1 : -1;\n      var walkerFn = down ? downUntil : upUntil;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseVertically(direction, editor, walkerFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var moveH = function (editor, forward) {\n      return function () {\n        var newRng = getHorizontalRange(editor, forward);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var moveV = function (editor, down) {\n      return function () {\n        var newRng = getVerticalRange(editor, down);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var isCefPosition = function (forward) {\n      return function (pos) {\n        return forward ? isAfterContentEditableFalse(pos) : isBeforeContentEditableFalse(pos);\n      };\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      return function () {\n        var from = forward ? CaretPosition$1.fromRangeEnd(editor.selection.getRng()) : CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        var result = forward ? getPositionsUntilNextLine(editor.getBody(), from) : getPositionsUntilPreviousLine(editor.getBody(), from);\n        var to = forward ? last(result.positions) : head(result.positions);\n        return to.filter(isCefPosition(forward)).fold(constant(false), function (pos) {\n          editor.selection.setRng(pos.toRange());\n          return true;\n        });\n      };\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone$2(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Option.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Option.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Option.none());\n    };\n    var getClosestCell$1 = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants$1(Element.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom();\n      });\n      var corners = filter(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove$1 = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow$1 = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell$1, getBottomValue, isAbove$1);\n    var getClosestCellBelow = curry(getClosestCell$1, getTopValue, isBelow$1);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.map(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      }).getOr(false);\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition$1.fromRangeStart(rng);\n      return positionIn(!forward, table).map(function (pos) {\n        return pos.isEqual(caretPos);\n      }).getOr(false);\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        var newRng = showCaret(direction, editor, table, !forward, true);\n        moveToRange(editor, newRng);\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition$1.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition$1.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$1(node) && node.nodeName === 'TABLE' ? Option.some(node) : Option.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = Element.fromTag(forcedRootBlock);\n          setAll(element, getForcedRootBlockAttrs(editor));\n          append(element, Element.fromTag('br'));\n          if (down) {\n            after(Element.fromDom(table), element);\n          } else {\n            before(Element.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom(), 0);\n          rng.setEnd(element.dom(), 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition$1.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var moveH$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateHorizontally(editor, forward, table);\n          });\n        }).getOr(false);\n      };\n    };\n    var moveV$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateVertically(editor, forward, table, td);\n          });\n        }).getOr(false);\n      };\n    };\n\n    var isTarget = function (node) {\n      return contains(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = domGlobals.document.createRange();\n      rng.setStartBefore(target.dom());\n      rng.setEndBefore(target.dom());\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = Element.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock$1 = function (root, forward, blockName, attrs) {\n      var block = Element.fromTag(blockName);\n      var br = Element.fromTag('br');\n      setAll(block, attrs);\n      append(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock$1(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq$2, root);\n      return closest(Element.fromDom(pos.container()), isBlock, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom(), pos) : isAtFirstLine(root.dom(), pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = Element.fromDom(editor.getBody());\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      return function () {\n        if (editor.selection.isCollapsed()) {\n          return moveCaretToNewEmptyLine(editor, forward);\n        } else {\n          return false;\n        }\n      };\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var executeKeydownOverride = function (editor, caret, evt) {\n      var os = detect$3().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: moveH(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: moveH$1(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH$1(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$1(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$1(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: move(editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: move(editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: moveNextWord(editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: movePrevWord(editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$2(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$2(editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$a = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, caret, evt);\n        }\n      });\n    };\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq$2(rootNode, Element.fromDom(elm.dom().parentNode));\n      };\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      return contains$2(rootNode, elm) ? closest(elm, function (element) {\n        return isTextBlock(element) || isListItem(element);\n      }, isBeforeRoot(rootNode)) : Option.none();\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).map(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          }).getOr(false);\n        } else {\n          return prevPosition(elm, normalizedFromPos).map(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          }).getOr(false);\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = Element.fromDom(rootNode);\n      var containerElm = Element.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq$2(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq$2(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable = function (blockBoundary) {\n      return isContentEditableFalse(blockBoundary.from.block.dom()) === false && isContentEditableFalse(blockBoundary.to.block.dom()) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr(blockPosition.position.getNode()) && isEmpty$1(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom()).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Option.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition$1.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable(blockBoundary);\n      });\n    };\n    var read$3 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Option.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex(children$1, isBlock).fold(function () {\n        return children$1;\n      }, function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each(children, remove);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find(parents.reverse(), function (element) {\n        return isEmpty$1(element);\n      }).each(remove);\n    };\n    var isEmptyBefore = function (el) {\n      return filter(prevSiblings(el), function (el) {\n        return !isEmpty$1(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty$1(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom());\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$1(fromBlock)) {\n        before(insertionPoint, Element.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom(), CaretPosition$1.before(insertionPoint.dom()));\n      each(extractChildren(fromBlock), function (child) {\n        before(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty$1(toBlock)) {\n        remove(toBlock);\n        if (isEmpty$1(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom());\n      }\n      var position = lastPositionIn(toBlock.dom());\n      each(extractChildren(fromBlock), function (child) {\n        append(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Option.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$2(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Option.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom()).map(function (position) {\n        return position.getNode();\n      }).map(Element.fromDom).filter(isBr$1).each(remove);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$1 = function (editor, forward) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var position = read$3(rootNode.dom(), forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, Element.fromDom(rng.startContainer)), getParentBlock$1(rootNode, Element.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq$2(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = Element.fromDom(rawNode);\n      var isRoot = curry(eq$2, root);\n      return ancestor(node, isTableCell, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom(), CaretPosition$1.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom(), CaretPosition$1.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$2 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isBr$5 = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$1);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter(parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom(), pos).filter(isBr$5);\n    };\n    var isBeforeBr = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$1) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$1) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isCompoundElement = function (node) {\n      return isTableCell(Element.fromDom(node)) || isListItem(Element.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$1(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline(Element.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(constant(false), inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(Element.fromDom(root), Element.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty$1(blockElm) ? DeleteAction.remove(blockElm.dom()) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Option.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Option.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Option.none();\n        } else if (forward && isContentEditableFalse(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse(elm.nextSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse(elm.previousSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Option.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Option.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Option.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Option.none();\n        } else {\n          return Option.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Option.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read$4 = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition$1.fromRangeStart(normalizedRange);\n      var rootElement = Element.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement(editor, forward, Element.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition$1.before(element) : CaretPosition$1.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Option.from(getContentEditableRoot$1(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse).fold(function () {\n        var result = read$4(editor.getBody(), forward, editor.selection.getRng()).map(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n        return result.getOr(false);\n      }, function () {\n        return true;\n      });\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each(descendants$1(rootElement, '.mce-offscreen-selection'), remove);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(Element.fromDom(editor.getBody()));\n          deleteElement(editor, forward, Element.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, function () {\n          return true;\n        });\n      }\n      return false;\n    };\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue(node) || isContentEditableFalse(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var paddEmptyElement = function (editor) {\n      var br;\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), editor.selection.getNode());\n      if (isContentEditableTrue(ceRoot) && editor.dom.isBlock(ceRoot) && editor.dom.isEmpty(ceRoot)) {\n        br = editor.dom.create('br', { 'data-mce-bogus': '1' });\n        editor.dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        editor.selection.setRng(CaretPosition$1.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$3 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$1(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      var caretRange = showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true);\n      if (range.collapsed) {\n        var deleteRange = range.cloneRange();\n        if (forward) {\n          deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n        } else {\n          deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n        }\n        deleteRange.deleteContents();\n      } else {\n        range.deleteContents();\n      }\n      editor.selection.setRng(caretRange);\n      trimEmptyTextNode$1(editor.dom, node);\n      return true;\n    };\n    var deleteCefBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$1(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var isBeforeContentEditableFalseFn = forward ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      return deleteCefBoundaryText(editor, forward);\n    };\n\n    var rangeFromPositions = function (from, to) {\n      var range = domGlobals.document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).map(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        }).getOr(true);\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).map(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        }).getOr(false);\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition$1.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope$1(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Option.some(inside(location))), Option.none, constant(Option.some(outside(location))), Option.none);\n        } else {\n          return location.fold(Option.none, constant(Option.some(outside(location))), Option.none, constant(Option.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        if (fromLocation.isSome() && toLocation.isSome()) {\n          return findRootInline(isInlineTarget$1, rootNode, from).map(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement(editor, forward, Element.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          }).getOr(false);\n        } else {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          }).getOr(false);\n        }\n      });\n    };\n    var backspaceDelete$5 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex(parents, isBlock).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild$1 = function (elm) {\n      return children(elm).length === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map(filter(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom();\n      });\n      if (formatNodes.length === 0) {\n        deleteElement(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom(), formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = Element.fromDom(editor.getBody());\n      var startElm = Element.fromDom(editor.selection.getStart());\n      var parentInlines = filter(getParentInlines(rootElm, startElm), hasOnlyOneChild$1);\n      return last(parentInlines).map(function (target) {\n        var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom()) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Option.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).map(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      }).getOr(false);\n    };\n    var backspaceDelete$7 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var isEditable$1 = function (target) {\n      return closest(target, function (elm) {\n        return isContentEditableTrue(elm.dom()) || isContentEditableFalse(elm.dom());\n      }).exists(function (elm) {\n        return isContentEditableTrue(elm.dom());\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$1(element) ? 'margin' : 'padding';\n      var suffix = get$4(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, Element.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom());\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).map(isListComponent).getOr(false);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter(map(editor.selection.getSelectedBlocks(), Element.fromDom), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable$1(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom());\n      });\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock = function (root, pos) {\n      return find(parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n        return getClosestBlock(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom()) === false && contains$2(fromBlock, Element.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom(), pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var backspaceDelete$8 = function (editor, _caret, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition$1.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(Element.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$b = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new TreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$1(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock$2 = function (editor) {\n      return Option.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock$2(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock$2(editor).filter(function (elm) {\n        return isListItem(Element.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var hasParent$1 = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$1(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n      }\n      dom.remove(parentBlock);\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each(descendants(Element.fromDom(fragment), isText), function (text) {\n        var rawNode = text.dom();\n        rawNode.nodeValue = trim$3(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell$4 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$1(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$1(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$1(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      Option.from(forcedRootBlockAttrs.style).map(editor.dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(Element.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        editor.dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Option.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Option.from(node.className).map(function (currentClasses) {\n        return filter(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter(currentClasses, function (clazz) {\n          return !contains(attrClasses, clazz);\n        });\n        var newClasses = __spreadArrays(attrClasses, filteredClasses);\n        editor.dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$1(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains(appliedAttrs, attrs);\n      });\n      editor.dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot$1(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell$4(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$1 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$1(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$1(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new TreeWalker(container, parentBlock);\n        if (isText$1(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$1(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$1(node) && !/^[ \\t\\r\\n]*$/.test(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$1(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$1(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot$1(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new TreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var scrollToBr = function (dom, selection, brElm) {\n      var marker = dom.create('span', {}, '&nbsp;');\n      brElm.parentNode.insertBefore(marker, brElm);\n      selection.scrollIntoView(marker);\n      dom.remove(marker);\n    };\n    var moveSelectionToBr = function (dom, selection, brElm, extraBr) {\n      var rng = dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      selection.setRng(rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      scrollToBr(dom, selection, brElm);\n      moveSelectionToBr(dom, selection, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = Element.fromTag('br');\n      before(Element.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after(Element.fromDom(inline), Element.fromTag('br'));\n      }\n      var br = Element.fromTag('br');\n      after(Element.fromDom(inline), br);\n      scrollToBr(editor.dom, editor.selection, br.dom());\n      moveSelectionToBr(editor.dom, editor.selection, br.dom(), false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr$1 = function (pos) {\n      return isBr(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr$1(CaretPosition$1.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition$1.after(startNode)).map(function (pos) {\n          return isBr(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(constant(false), isAnchorLink, isAnchorLink, constant(false));\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$2 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock$2(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$1(Element.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine$1 = function (editor, _shiftKey) {\n      return shouldBlockNewLine(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre$1 = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match$2 = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Option.some(action) : Option.none();\n      };\n    };\n    var getAction$1 = function (editor, evt) {\n      return evaluateUntil([\n        match$2([shouldBlockNewLine$1], newLineAction.none()),\n        match$2([inSummaryBlock()], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false)\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true)\n        ], newLineAction.br()),\n        match$2([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([inListBlock(true)], newLineAction.block()),\n        match$2([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match$2([isBrMode(true)], newLineAction.br()),\n        match$2([inBrContext], newLineAction.br()),\n        match$2([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert$3 = function (editor, evt) {\n      getAction$1(editor, evt).fold(function () {\n        insert$2(editor, evt);\n      }, function () {\n        insert$1(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert$3(editor, event);\n      });\n    };\n    var setup$c = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$1(container)) {\n        container.insertData(offset, text);\n        return Option.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = Element.fromText(text);\n          if (pos.isAtEnd()) {\n            after(elm, textNode);\n          } else {\n            before(elm, textNode);\n          }\n          return CaretPosition(textNode.dom(), text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      var parentBlocks = filter(parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest(elm, isElement);\n      }).exists(function (elm) {\n        return isPreValue(get$4(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom(), pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom(), pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$1(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      var afterPos = leanRight(pos);\n      if (isInPre(afterPos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, afterPos) || isAfterBlock(root, afterPos) || isBeforeBr(root, afterPos) || hasSpaceAfter(root, afterPos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, pos);\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$1(container) && contains$1(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Option.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Option.some(pos) : Option.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom(), CaretPosition$1.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom(), CaretPosition$1.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection$1 = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection$1(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride$2 = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$d = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, evt);\n        }\n      });\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(Element.fromDom(editor.getBody()), '*[data-mce-caret]').fold(constant(null), function (elm) {\n        return elm.dom();\n      });\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$e = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var browser$4 = detect$3().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser$4.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$f = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var executeKeydownOverride$3 = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: moveToLineEndPoint(editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: moveToLineEndPoint(editor, false)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$g = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$e(editor);\n      setup$a(editor, caret);\n      setup$b(editor, caret);\n      setup$c(editor);\n      setup$d(editor);\n      setup$f(editor);\n      setup$g(editor);\n    };\n    var setup$h = function (editor) {\n      if (!isRtc(editor)) {\n        registerKeyboardOverrides(editor);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$i = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$1(node) && isTextBlock(Element.fromDom(node));\n    };\n    var normalizeSelection$1 = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize$1(rng));\n    };\n    var setup$j = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection$1(editor);\n        }\n      });\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$a = isContentEditableFalse, isContentEditableTrue$4 = isContentEditableTrue;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$a(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$a(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var clonedElm = elm.cloneNode(true);\n      editor.dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      editor.dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = editor.dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      editor.dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      editor.dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var hasDraggableElement = function (state) {\n      return state.element;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start$1 = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find(editor.dom.getParents(e.target), or(isContentEditableFalse$a, isContentEditableTrue$4)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.element = ceElm;\n            state.screenX = e.screenX;\n            state.screenY = e.screenY;\n            state.maxX = (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2;\n            state.maxY = (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2;\n            state.relX = e.pageX - elmPos.x;\n            state.relY = e.pageY - elmPos.y;\n            state.width = ceElm.offsetWidth;\n            state.height = ceElm.offsetHeight;\n            state.ghost = createGhost(editor, ceElm, state.width, state.height);\n          }\n        }\n      };\n    };\n    var move$1 = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      return function (e) {\n        var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (hasDraggableElement(state) && !state.dragging && movement > 10) {\n          var args = editor.fire('dragstart', { target: state.element });\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          var targetPos = applyRelPos(state, calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n          throttledPlaceCaretAt(e.clientX, e.clientY);\n        }\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            var targetClone_1 = cloneElement(state.element);\n            var args = editor.fire('drop', {\n              targetClone: targetClone_1,\n              clientX: e.clientX,\n              clientY: e.clientY\n            });\n            if (!args.isDefaultPrevented()) {\n              targetClone_1 = args.targetClone;\n              editor.undoManager.transact(function () {\n                removeElement(state.element);\n                editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n        }\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        if (state.dragging) {\n          editor.fire('dragend');\n        }\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.dragging = false;\n      state.element = null;\n      removeElement(state.ghost);\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = {};\n      var pageDom = DOMUtils$1.DOM;\n      var rootDocument = domGlobals.document;\n      var dragStartHandler = start$1(state, editor);\n      var dragHandler = move$1(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$a(realTarget) || isContentEditableFalse$a(editor.dom.getContentEditableParent(realTarget))) {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.defaultPrevented) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils$1.DOM;\n        var dom = editor.dom;\n        var doc = domGlobals.document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$k = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(domGlobals.document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, editor.selection.getRng(), false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var isContentEditableTrue$5 = isContentEditableTrue;\n    var isContentEditableFalse$b = isContentEditableFalse;\n    var getContentEditableRoot$2 = function (editor, node) {\n      var root = editor.getBody();\n      while (node && node !== root) {\n        if (isContentEditableTrue$5(node) || isContentEditableFalse$b(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var SelectionOverrides = function (editor) {\n      var isBlock = function (node) {\n        return editor.dom.isBlock(node);\n      };\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus$1(editor);\n      });\n      var realSelectionId = 'sel-' + editor.dom.uniqueId();\n      var selectedContentEditableNode;\n      var isFakeSelectionElement = function (elm) {\n        return editor.dom.hasClass(elm, 'mce-offscreen-selection');\n      };\n      var getRealSelectionElement = function () {\n        var container = editor.dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          editor.selection.setRng(range);\n        }\n      };\n      var getRange = function () {\n        return editor.selection.getRng();\n      };\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          editor.selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          editor.selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            setRange(renderCaretAtRange(editor, range, false));\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot$2(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$b(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue$5(contentEditableRoot)) {\n              if (editor.dom.isChildOf(contentEditableRoot, editor.selection.getNode())) {\n                removeContentEditableSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', function () {\n          removeContentEditableSelection();\n        });\n        editor.on('ResizeWindow FullscreenStateChanged', function () {\n          return fakeCaret.reposition();\n        });\n        var handleTouchSelect = function (editor) {\n          editor.on('tap', function (e) {\n            var contentEditableRoot = getContentEditableRoot$2(editor, e.target);\n            if (isContentEditableFalse$b(contentEditableRoot)) {\n              e.preventDefault();\n              setContentEditableSelection(selectNode(editor, contentEditableRoot));\n            }\n          }, true);\n        };\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition$1.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isBeforeContentEditableFalse(newPos) && !isAfterContentEditableFalse(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = editor.dom.getParent(node1, editor.dom.isBlock);\n          var block2 = editor.dom.getParent(node2, editor.dom.isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = editor.dom.getParent(targetNode, editor.dom.isBlock);\n          var caretBlock = editor.dom.getParent(caretNode, editor.dom.isBlock);\n          if (targetBlock && editor.dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse$b(getContentEditableRoot$2(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        handleTouchSelect(editor);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !editor.dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot$2(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$b(contentEditableRoot)) {\n              e.preventDefault();\n              setContentEditableSelection(selectNode(editor, contentEditableRoot));\n            } else {\n              removeContentEditableSelection();\n              if (!(isContentEditableTrue$5(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, editor.selection.getRng())) {\n                hideFakeCaret();\n                editor.selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeContentEditableSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(e.target, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          switch (e.keyCode) {\n          default:\n            if (isContentEditableFalse$b(editor.selection.getNode())) {\n              e.preventDefault();\n            }\n            break;\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedContentEditableNode) {\n            if (!selectedContentEditableNode.parentNode) {\n              selectedContentEditableNode = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedContentEditableNode);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setContentEditableSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(rng.startContainer.parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(rng.startContainer.parentNode)) {\n            removeContentEditableSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText);\n            }\n          }\n        });\n        init(editor);\n        setup$k(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer(node) || startsWithCaretContainer(node) || endsWithCaretContainer(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = editor.dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setContentEditableSelection = function (range, forward) {\n        var node;\n        var $ = editor.$;\n        var dom = editor.dom;\n        var $realSelectionContainer, startContainer, startOffset, caretPosition, targetClone, origTargetClone;\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            if (forward === false) {\n              caretPosition = getNormalizedRangeEndPoint(-1, rootNode, range);\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(-1, caretPosition.getNode(true), false, false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(-1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n            } else {\n              caretPosition = getNormalizedRangeEndPoint(1, rootNode, range);\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(1, caretPosition.getNode(true), false, false);\n              }\n            }\n          }\n          return null;\n        }\n        startContainer = range.startContainer;\n        startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse$b(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          node = startContainer.childNodes[startOffset];\n        }\n        if (!isContentEditableFalse$b(node)) {\n          return null;\n        }\n        targetClone = origTargetClone = node.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: node,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        $realSelectionContainer = descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom()]);\n        });\n        targetClone = e.targetClone;\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        range = editor.dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          range.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          range.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          range.setStart($realSelectionContainer[0].firstChild, 1);\n          range.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = editor.selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(range);\n        var nodeElm = Element.fromDom(node);\n        each(descendants$1(Element.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq$2(nodeElm, elm)) {\n            remove$1(elm, 'data-mce-selected');\n          }\n        });\n        if (!editor.dom.getAttrib(node, 'data-mce-selected')) {\n          node.setAttribute('data-mce-selected', '1');\n        }\n        selectedContentEditableNode = node;\n        hideFakeCaret();\n        return range;\n      };\n      var removeContentEditableSelection = function () {\n        if (selectedContentEditableNode) {\n          selectedContentEditableNode.removeAttribute('data-mce-selected');\n          descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove);\n          selectedContentEditableNode = null;\n        }\n        descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove);\n        selectedContentEditableNode = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedContentEditableNode = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var inputMethodFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!domGlobals.Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (domGlobals.document.activeElement === domGlobals.document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint$1(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = function () {\n      };\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      removeBlockQuoteOnBackSpace();\n      emptyEditorWhenDeleting();\n      if (!Env.windowsPhone) {\n        normalizeSelection();\n      }\n      if (isWebKit) {\n        inputMethodFocus();\n        selectControlElements();\n        setDefaultBlockType();\n        blockFormSubmitInsideEditor();\n        disableBackspaceIntoATable();\n        removeAppleInterchangeBrs();\n        if (Env.iOS) {\n          restoreFocusOnKeyDown();\n          bodyHeight();\n          tapLinksAndImages();\n        } else {\n          selectAll();\n        }\n      }\n      if (Env.ie >= 11) {\n        bodyHeight();\n        disableBackspaceIntoATable();\n      }\n      if (Env.ie) {\n        selectAll();\n        disableAutoUrlDetect();\n        ieInternalDragAndDrop();\n      }\n      if (isGecko) {\n        removeHrOnBackspace();\n        focusBody();\n        removeStylesWhenDeletingAcrossBlockElements();\n        setGeckoEditingOptions();\n        addBrAfterLastLinks();\n        showBrokenImageIcon();\n        blockCmdArrowNavigation();\n        disableBackspaceIntoATable();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$4 = DOMUtils$1.DOM;\n    var appendStyle = function (editor, text) {\n      var head = Element.fromDom(editor.getDoc().head);\n      var tag = Element.fromTag('style');\n      set(tag, 'type', 'text/css');\n      append(tag, Element.fromText(text));\n      append(head, tag);\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$1(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign({}, mkParserSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before,\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new Node('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader = function (editor) {\n      return editor.inline ? DOM$4.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var preInit = function (editor, rtcMode) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$4.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      if (rtcMode === false) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      getStyleSheetLoader(editor).loadAll(editor.contentCSS, function (_) {\n        initEditor(editor);\n      }, function (_urls) {\n        initEditor(editor);\n      });\n      if (settings.content_style) {\n        appendStyle(editor, settings.content_style);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$4.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = domGlobals.document;\n        editor.contentWindow = domGlobals.window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$4.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils$1(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = Serializer$1(mkSerializerSettings(editor), editor);\n      editor.selection = Selection$1(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$8(editor);\n      setup$i(editor);\n      if (!isRtc(editor)) {\n        setup$j(editor);\n      }\n      setup$h(editor);\n      setup$9(editor);\n      setup$7(editor);\n      firePreInit(editor);\n      setup$4(editor).fold(function () {\n        preInit(editor, false);\n      }, function (loadingRtc) {\n        editor.setProgressState(true);\n        loadingRtc.then(function (rtcMode) {\n          editor.setProgressState(false);\n          preInit(editor, rtcMode);\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils$1.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (domGlobals.document.domain !== domGlobals.window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + domGlobals.document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = Element.fromTag('iframe');\n      setAll(iframe, customAttrs);\n      setAll(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$3(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var title = editor.editorManager.translate('Rich Text Area. Press ALT-0 for help.');\n      var ifr = createIframeElement(editor.id, title, o.height, getIframeAttrs(editor)).dom();\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$6 = DOMUtils$1.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$1(loadIcons, function (svgData, icon) {\n        if (!has(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$6.create('div');\n      DOM$6.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var init$2 = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var boxInfo = renderThemeUi(editor);\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$7 = DOMUtils$1.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !ThemeManager.urls.hasOwnProperty(theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Option.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Option.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Option.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Option.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init$2(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init$2(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader$1 = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$7.unbind(domGlobals.window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$7.bind(domGlobals.window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = Element.fromDom(editor.getElement());\n      var snapshot = clone(element);\n      editor.on('remove', function () {\n        eachr(element.dom().attributes, function (attr) {\n          return remove$1(element, attr.name);\n        });\n        setAll(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader$1(element, editor);\n      if (!isInline$1(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$7.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$7.insertAfter(DOM$7.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$7.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$7.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : constant(false);\n    };\n    var ancestor$3 = function (scope, transform, isRoot) {\n      var element = scope.dom();\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest$2 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Option.none() : ancestor$3(scope, transform, stop);\n      });\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq$2(Element.fromDom(rootElm), elm);\n      };\n      return closest$2(Element.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Option.from(DOMUtils$1.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Option.from(elm).map(Element.fromDom).filter(isElement).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom()).or(getComputedFontProp(propName, element.dom()));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$1(container) ? container.parentNode : container;\n      });\n    };\n    var isRangeAtStartOfNode = function (rng, root) {\n      return rng.startContainer === root && rng.startOffset === 0;\n    };\n    var getCaretElement = function (editor) {\n      return Option.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        return isRangeAtStartOfNode(rng, root) ? Option.none() : Option.from(editor.selection.getStart(true));\n      });\n    };\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9\\.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return getFontFamily(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return getFontFamily(editor.getBody(), caretElement);\n      });\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return getFontSize(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return getFontSize(editor.getBody(), caretElement);\n      });\n    };\n\n    var processValue = function (value) {\n      var details;\n      if (typeof value !== 'string') {\n        details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret$1 = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor) {\n      if (backspaceDelete$8(editor)) {\n        return;\n      } else if (backspaceDelete$3(editor, false)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor)) {\n        return;\n      } else if (backspaceDelete$6(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor) {\n      if (backspaceDelete$3(editor, true)) {\n        return;\n      } else if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor)) {\n        return;\n      } else if (backspaceDelete$6(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n\n    var each$e = Tools.each;\n    var map$3 = Tools.map, inArray$2 = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n          self.editor.focus();\n        } else {\n          restore(self.editor);\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$e(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        var self = this;\n        type = type || 'exec';\n        each$e(commandList, function (callback, command) {\n          each$e(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value ? { value: value } : undefined);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': function () {\n          },\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$e('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, value);\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret$1(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert$3(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': function () {\n          },\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'delete': function () {\n            deleteCommand(editor);\n          },\n          'forwardDelete': function () {\n            forwardDeleteCommand(editor);\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$2(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var nodes = editor.selection.isCollapsed() ? [editor.dom.getParent(editor.selection.getNode(), editor.dom.isBlock)] : editor.selection.getSelectedBlocks();\n            var matches = map$3(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray$2(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has$2(elm, cls) && state === false) {\n        remove$4(elm, cls);\n      } else if (state) {\n        add$3(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, state);\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom().contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$1(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Option.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = Element.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly$1(editor)) {\n          each(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly$1(editor)) {\n          each(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var isInAnchor = function (editor, target) {\n      return editor.dom.getParent(target, 'a') !== null;\n    };\n    var preventReadOnlyEvents = function (editor, e) {\n      var target = e.target;\n      if (isClickEvent(e) && !VK.metaKeyPressed(e) && isInAnchor(editor, target)) {\n        e.preventDefault();\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly$1(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly$1(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        name = name.toLowerCase();\n        args = args || {};\n        args.type = name;\n        if (!args.target) {\n          args.target = this.scope;\n        }\n        if (!args.preventDefault) {\n          args.preventDefault = function () {\n            args.isDefaultPrevented = always;\n          };\n          args.stopPropagation = function () {\n            args.isPropagationStopped = always;\n          };\n          args.stopImmediatePropagation = function () {\n            args.isImmediatePropagationStopped = always;\n          };\n          args.isDefaultPrevented = never;\n          args.isPropagationStopped = never;\n          args.isImmediatePropagationStopped = never;\n        }\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(args);\n        }\n        var handlers = this.bindings[name];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.once) {\n              this.off(name, callback.func);\n            }\n            if (args.isImmediatePropagationStopped()) {\n              args.stopPropagation();\n              return args;\n            }\n            if (callback.func.call(this.scope, args) === false) {\n              args.preventDefault();\n              return args;\n            }\n          }\n        }\n        return args;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        var handlers, names, i;\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = { func: callback };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = this.bindings[name];\n            if (!handlers) {\n              handlers = this.bindings[name] = [];\n              this.toggleEvent(name, true);\n            }\n            if (prepend) {\n              handlers.unshift(wrappedCallback);\n            } else {\n              handlers.push(wrappedCallback);\n            }\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        var i, handlers, names, hi;\n        if (name) {\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = this.bindings[name];\n            if (!name) {\n              each$1(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                hi = handlers.length;\n                while (hi--) {\n                  if (handlers[hi].func === callback) {\n                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));\n                    this.bindings[name] = handlers;\n                  }\n                }\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[name];\n              }\n            }\n          }\n        } else {\n          each$1(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$8 = DOMUtils$1.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$8.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly$1(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly$1(editor)) {\n        preventReadOnlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$1(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$8.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$8.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$8.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$1(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        domGlobals.console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            domGlobals.console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$5 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly$1(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$f = Tools.each, explode$3 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$f(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          cmdFunc = function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          cmdFunc = function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        }\n        each$f(explode$3(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, cmdFunc, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.parseShortcut = function (pattern) {\n        var key;\n        var shortcut = {};\n        each$f(explode$3(pattern.toLowerCase(), '+'), function (value) {\n          if (value in modifierNames) {\n            shortcut[value] = true;\n          } else {\n            if (/^[0-9]{2,}$/.test(value)) {\n              shortcut.keyCode = parseInt(value, 10);\n            } else {\n              shortcut.charCode = value.charCodeAt(0);\n              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n            }\n          }\n        });\n        var id = [shortcut.keyCode];\n        for (key in modifierNames) {\n          if (shortcut[key]) {\n            id.push(key);\n          } else {\n            shortcut[key] = false;\n          }\n        }\n        shortcut.id = id.join(',');\n        if (shortcut.access) {\n          shortcut.alt = true;\n          if (Env.mac) {\n            shortcut.ctrl = true;\n          } else {\n            shortcut.shift = true;\n          }\n        }\n        if (shortcut.meta) {\n          if (Env.mac) {\n            shortcut.meta = true;\n          } else {\n            shortcut.ctrl = true;\n            shortcut.meta = false;\n          }\n        }\n        return shortcut;\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$3(pattern, '>'), this.parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$6 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$6();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var each$g = Tools.each, trim$4 = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim$4(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(domGlobals.document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$g(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$g(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var DOM$9 = DOMUtils$1.DOM;\n    var extend$3 = Tools.extend, each$h = Tools.each;\n    var resolve$3 = Tools.resolve;\n    var ie$1 = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils$1.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager$1.languageLoad = this.settings.language_load;\n        AddOnManager$1.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined\n        };\n        var self = this;\n        var modeInstance = create$5(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        focus(this, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus$1(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve$3(scope) : 0;\n          callback = resolve$3(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$9.show(self.getContainer());\n            DOM$9.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie$1 && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$9.hide(self.getContainer());\n            DOM$9.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$9.getParent(self.id, 'form')) {\n            each$h(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent$1(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent$1(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent$1(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent$1(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$9.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$9.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        var self = this;\n        var settings = self.settings;\n        var dom = self.dom;\n        var cls;\n        elm = elm || self.getBody();\n        if (self.hasVisual === undefined) {\n          self.hasVisual = settings.visual;\n        }\n        each$h(dom.select('table,a', elm), function (elm) {\n          var value;\n          switch (elm.nodeName) {\n          case 'TABLE':\n            cls = settings.visual_table_class || 'mce-item-table';\n            value = dom.getAttrib(elm, 'border');\n            if ((!value || value === '0') && self.hasVisual) {\n              dom.addClass(elm, cls);\n            } else {\n              dom.removeClass(elm, cls);\n            }\n            return;\n          case 'A':\n            if (!dom.getAttrib(elm, 'href')) {\n              value = dom.getAttrib(elm, 'name') || elm.id;\n              cls = settings.visual_anchor_class || 'mce-item-anchor';\n              if (value && self.hasVisual) {\n                dom.addClass(elm, cls);\n              } else {\n                dom.removeClass(elm, cls);\n              }\n            }\n            return;\n          }\n        });\n        self.fire('VisualAid', {\n          element: elm,\n          hasVisual: self.hasVisual\n        });\n      };\n      Editor.prototype.remove = function () {\n        remove$7(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM$a = DOMUtils$1.DOM;\n    var explode$4 = Tools.explode, each$i = Tools.each, extend$4 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$i(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = domGlobals.document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '4.1',\n      releaseDate: '2020-07-08',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(domGlobals.document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = domGlobals.document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && domGlobals.document.currentScript) {\n            var src = domGlobals.document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$2(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$1(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager$1.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get(elm, 'name').filter(function (name) {\n              return !DOM$a.get(name);\n            }).getOrThunk(DOM$a.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM$a.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$i(settings.types, function (type) {\n              targets = targets.concat(DOM$a.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM$a.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$i(explode$4(l), function (id) {\n                var elm = DOM$a.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$i(domGlobals.document.forms, function (f) {\n                    each$i(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM$a.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$i(DOM$a.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM$a.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$i(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM$a.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$4({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$i(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM$a.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each$i(DOM$a.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', 0, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$i(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    function RangeUtils(dom) {\n      var walk = function (rng, callback) {\n        return walk$1(dom, rng, callback);\n      };\n      var split = split$1;\n      var normalize = function (rng) {\n        return normalize$2(dom, rng).fold(constant(false), function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split,\n        normalize: normalize\n      };\n    }\n    (function (RangeUtils) {\n      RangeUtils.compareRanges = isEq$4;\n      RangeUtils.getCaretRangeFromPoint = fromPoint$1;\n      RangeUtils.getSelectedNode = getSelectedNode;\n      RangeUtils.getNode = getNode;\n    }(RangeUtils || (RangeUtils = {})));\n    var RangeUtils$1 = RangeUtils;\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              domGlobals.clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$7 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$7();\n\n    var min = Math.min, max = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= h;\n      }\n      if (rel[4] === 'r') {\n        x -= w;\n      }\n      if (rel[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$8(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$8(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max(rect.x, cropRect.x);\n      var y1 = max(rect.y, cropRect.y);\n      var x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$8(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp$1 = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max(0, clampRect.x - x1);\n      var underflowY1 = max(0, clampRect.y - y1);\n      var overflowX2 = max(0, x2 - cx2);\n      var overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$8(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$8 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$8(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp$1,\n      create: create$8,\n      fromClientRect: fromClientRect\n    };\n\n    var each$j = Tools.each, extend$5 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (prop) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (prop.Mixins) {\n        each$j(prop.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              prop[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          prop.Mixins = _super.Mixins.concat(prop.Mixins);\n        }\n      }\n      if (prop.Methods) {\n        each$j(prop.Methods.split(','), function (name) {\n          prop[name] = dummy;\n        });\n      }\n      if (prop.Properties) {\n        each$j(prop.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          prop[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (prop.Statics) {\n        each$j(prop.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (prop.Defaults && _super.Defaults) {\n        prop.Defaults = extend$5({}, _super.Defaults, prop.Defaults);\n      }\n      each$1(prop, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min$1 = Math.min, max$1 = Math.max, round$2 = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min$1(r, min$1(g, b));\n        var maxRGB = max$1(r, max$1(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round$2(h),\n          s: round$2(s * 100),\n          v: round$2(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max$1(0, min$1(saturation, 1));\n        brightness = max$1(0, min$1(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round$2(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round$2(255 * (r + match));\n        g = round$2(255 * (g + match));\n        b = round$2(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils$1.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new domGlobals.XMLHttpRequest();\n        if (xhr) {\n          if (xhr.overrideMimeType) {\n            xhr.overrideMimeType(settings.content_type);\n          }\n          xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n          if (settings.crossDomain) {\n            xhr.withCredentials = true;\n          }\n          if (settings.content_type) {\n            xhr.setRequestHeader('Content-Type', settings.content_type);\n          }\n          if (settings.requestheaders) {\n            Tools.each(settings.requestheaders, function (header) {\n              xhr.setRequestHeader(header.key, header.value);\n            });\n          }\n          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n          xhr = XHR.fire('beforeSend', {\n            xhr: xhr,\n            settings: settings\n          }).xhr;\n          xhr.send(settings.data);\n          if (!settings.async) {\n            return ready();\n          }\n          Delay.setTimeout(ready, 10);\n        }\n      }\n    });\n\n    var extend$6 = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend$6({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend$6(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create$9 = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = domGlobals.window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create$9();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: TreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils$1,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils$1,\n        Serializer: Serializer$1,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager$1,\n        Selection: Selection$1,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: Node,\n        Schema: Schema,\n        SaxParser: SaxParser$1,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: Serializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager$1,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils$1.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: AddOnManager$1.PluginManager,\n      ThemeManager: AddOnManager$1.ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}(window));\n","import tinymce from \"tinymce/tinymce\";\n\n// Default icons are required for TinyMCE 5.3 or above\nimport \"tinymce/icons/default\";\n\n// A theme is also required\nimport \"tinymce/themes/silver\";\n\n// Any plugins you want to use has to be imported\nimport \"tinymce/plugins/paste\";\nimport \"tinymce/plugins/link\";\n\ntinymce.init({\n\tselector: \"#instructions\",\n\tplugins: [\"paste\", \"link\"]\n});\n\nconsole.log(\"editor module loaded\")\n","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><path d=\"M5 14.8h14a1 1 0 010 2H5a1 1 0 010-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 110-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 01-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-2c0-.6.4-1 1-1z\" fill-rule=\"evenodd\"/></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z\"/><path d=\"M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" fill-rule=\"nonzero\"/></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z\"/><path d=\"M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 010 2H5a1 1 0 010-2z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z\"/><path d=\"M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n  }\n});","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.4.1 (2020-07-08)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$1 = function (results) {\n      var values = [];\n      var errors = [];\n      each(results, function (obj) {\n        fold(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult = function (res) {\n      return fold(res, Result.error, Result.value);\n    };\n    var fromResult = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult,\n      toResult: toResult,\n      svalue: svalue,\n      partition: partition$1,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map$1,\n      mapError: mapError,\n      fold: fold\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$1 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var adt = Adt.generate([\n      { strict: [] },\n      { defaultedThunk: ['fallbackThunk'] },\n      { asOption: [] },\n      { asDefaultedOptionThunk: ['fallbackThunk'] },\n      { mergeWithThunk: ['baseThunk'] }\n    ]);\n    var defaulted = function (fallback) {\n      return adt.defaultedThunk(constant(fallback));\n    };\n    var mergeWith = function (base) {\n      return adt.mergeWithThunk(constant(base));\n    };\n    var strict = adt.strict;\n    var asOption = adt.asOption;\n    var defaultedThunk = adt.defaultedThunk;\n    var asDefaultedOptionThunk = adt.asDefaultedOptionThunk;\n    var mergeWithThunk = adt.mergeWithThunk;\n\n    var exclude = function (obj, fields) {\n      var r = {};\n      each$1(obj, function (v, k) {\n        if (!contains(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll = function (keyvalues) {\n      var r = {};\n      each(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$2 = function (results) {\n      var errors = [];\n      var values = [];\n      each(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      return exclude(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap(key, value);\n    };\n    var wrapAll$1 = function (keyvalues) {\n      return wrapAll(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$2(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: function () {\n            return '... (only showing first ten failures)';\n          }\n        }]) : errors;\n      return map(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingStrict = function (path, key, obj) {\n      return nu(path, function () {\n        return 'Could not find valid *strict* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu(path, function () {\n        return err;\n      });\n    };\n\n    var adt$1 = Adt.generate([\n      {\n        field: [\n          'key',\n          'okey',\n          'presence',\n          'prop'\n        ]\n      },\n      {\n        state: [\n          'okey',\n          'instantiator'\n        ]\n      }\n    ]);\n    var strictAccess = function (path, obj, key) {\n      return get(obj, key).fold(function () {\n        return missingStrict(path, key, obj);\n      }, SimpleResult.svalue);\n    };\n    var fallbackAccess = function (obj, key, fallbackThunk) {\n      var v = get(obj, key).fold(function () {\n        return fallbackThunk(obj);\n      }, identity);\n      return SimpleResult.svalue(v);\n    };\n    var optionAccess = function (obj, key) {\n      return SimpleResult.svalue(get(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback) {\n      var opt = get(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return SimpleResult.svalue(opt);\n    };\n    var cExtractOne = function (path, obj, field, strength) {\n      return field.fold(function (key, okey, presence, prop) {\n        var bundle = function (av) {\n          var result = prop.extract(path.concat([key]), strength, av);\n          return SimpleResult.map(result, function (res) {\n            return wrap(okey, strength(res));\n          });\n        };\n        var bundleAsOption = function (optValue) {\n          return optValue.fold(function () {\n            var outcome = wrap(okey, strength(Option.none()));\n            return SimpleResult.svalue(outcome);\n          }, function (ov) {\n            var result = prop.extract(path.concat([key]), strength, ov);\n            return SimpleResult.map(result, function (res) {\n              return wrap(okey, strength(Option.some(res)));\n            });\n          });\n        };\n        return function () {\n          return presence.fold(function () {\n            return SimpleResult.bind(strictAccess(path, obj, key), bundle);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(fallbackAccess(obj, key, fallbackThunk), bundle);\n          }, function () {\n            return SimpleResult.bind(optionAccess(obj, key), bundleAsOption);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(optionDefaultedAccess(obj, key, fallbackThunk), bundleAsOption);\n          }, function (baseThunk) {\n            var base = baseThunk(obj);\n            var result = SimpleResult.map(fallbackAccess(obj, key, constant({})), function (v) {\n              return deepMerge(base, v);\n            });\n            return SimpleResult.bind(result, bundle);\n          });\n        }();\n      }, function (okey, instantiator) {\n        var state = instantiator(obj);\n        return SimpleResult.svalue(wrap(okey, strength(state)));\n      });\n    };\n    var cExtract = function (path, obj, fields, strength) {\n      var results = map(fields, function (field) {\n        return cExtractOne(path, obj, field, strength);\n      });\n      return ResultCombine.consolidateObj(results, {});\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, strength, val) {\n        return getDelegate().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var value$1 = function (validator) {\n      var extract = function (path, strength, val) {\n        return SimpleResult.bindError(validator(val, strength), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = function () {\n        return 'val';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, function (value) {\n        return value !== undefined && value !== null;\n      }));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, f) {\n        return f.fold(function (key) {\n          return deepMerge(acc, wrap$1(key, true));\n        }, constant(acc));\n      }, {});\n      var extract = function (path, strength, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, strength, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (fields) {\n      var extract = function (path, strength, o) {\n        return cExtract(path, o, fields, strength);\n      };\n      var toString = function () {\n        var fieldStrings = map(fields, function (field) {\n          return field.fold(function (key, okey, presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (okey, _instantiator) {\n            return 'state(' + okey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, strength, array) {\n        var results = map(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), strength, a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, strength, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, strength, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$1(validator)).extract(path, identity, keys);\n      };\n      var extract = function (path, strength, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map(validKeys, function (vk) {\n            return adt$1.field(vk, vk, strict(), prop);\n          });\n          return objOf(schema).extract(path, strength, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue = constant(value$1(SimpleResult.svalue));\n    var arrOfObj = compose(arrOf, objOf);\n    var state = adt$1.state;\n    var field = adt$1.field;\n\n    var chooseFrom = function (path, strength, input, branches, ch) {\n      var fields = get(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), strength, input);\n      });\n    };\n    var choose = function (key, branches) {\n      var extract = function (path, strength, input) {\n        var choice = get(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, strength, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var _anyValue = value$1(SimpleResult.svalue);\n    var arrOfObj$1 = function (objFields) {\n      return arrOfObj(objFields);\n    };\n    var arrOfVal = function () {\n      return arrOf(_anyValue);\n    };\n    var valueThunkOf = valueThunk;\n    var valueOf = function (validator) {\n      return value$1(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf$1 = function (validator, prop) {\n      return setOf(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extract = function (label, prop, strength, obj) {\n      var res = prop.extract([label], strength, obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extract(label, prop, identity, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    var asRawOrDie = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var chooseProcessor = function (key, branches) {\n      return choose(key, branches);\n    };\n    var choose$1 = function (key, branches) {\n      return choose(key, map$2(branches, objOf));\n    };\n    var anyValue$1 = constant(_anyValue);\n    var typedValue = function (validator, expectedType) {\n      return value$1(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      var every = function (iter, callbackFn) {\n        var result = iter.next();\n        while (!result.done) {\n          if (!callbackFn(result.value)) {\n            return false;\n          }\n          result = iter.next();\n        }\n        return true;\n      };\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      case 'Map':\n        return every(val.keys(), isPostMessageable) && every(val.values(), isPostMessageable);\n      case 'Set':\n        return every(val.keys(), isPostMessageable);\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$1(function (a) {\n      return isPostMessageable(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n    });\n\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var strict$1 = function (key) {\n      return field(key, key, strict(), anyValue());\n    };\n    var strictOf = function (key, schema) {\n      return field(key, key, strict(), schema);\n    };\n    var strictNumber = function (key) {\n      return strictOf(key, number);\n    };\n    var strictString = function (key) {\n      return strictOf(key, string);\n    };\n    var strictStringEnum = function (key, values) {\n      return field(key, key, strict(), validateEnum(values));\n    };\n    var strictBoolean = function (key) {\n      return strictOf(key, boolean);\n    };\n    var strictFunction = function (key) {\n      return strictOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field(key, key, asOption(), value$1(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var strictObjOf = function (key, objSchema) {\n      return field(key, key, strict(), objOf(objSchema));\n    };\n    var strictArrayOfObj = function (key, objFields) {\n      return field(key, key, strict(), arrOfObj(objFields));\n    };\n    var strictArrayOf = function (key, schema) {\n      return field(key, key, strict(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted$1 = function (key, fallback) {\n      return field(key, key, defaulted(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field(key, key, defaulted(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n    var state$1 = function (okey, instantiator) {\n      return state(okey, instantiator);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$1(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu$1(0, 0);\n    };\n    var nu$1 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$1,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$3,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return domGlobals.window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : constant(false);\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom();\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Option.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq$1(component.element(), simulatedEvent.event().target());\n    };\n\n    var nu$4 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return asRawOrDie('Extracting event.handler', objOfOnly([\n        defaulted$1('can', constant(true)),\n        defaulted$1('abort', constant(false)),\n        defaulted$1('run', noop)\n      ]), parts);\n    };\n    var all$1 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read = function (handler) {\n      return isFunction(handler) ? {\n        can: constant(true),\n        abort: constant(false),\n        run: handler\n      } : handler;\n    };\n    var fuse = function (handlers) {\n      var can = all$1(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return nu$4({\n        can: can,\n        abort: abort,\n        run: run\n      });\n    };\n\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var touchcancel = constant('touchcancel');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitionend = constant('transitionend');\n    var selectstart = constant('selectstart');\n\n    var alloy = { tap: constant('alloy.tap') };\n    var focus = constant('alloy.focus');\n    var postBlur = constant('alloy.blur.post');\n    var postPaste = constant('alloy.paste.post');\n    var receive = constant('alloy.receive');\n    var execute = constant('alloy.execute');\n    var focusItem = constant('alloy.focus.item');\n    var tap = alloy.tap;\n    var longpress = constant('alloy.longpress');\n    var sandboxClose = constant('alloy.sandbox.close');\n    var typeaheadCancel = constant('alloy.typeahead.cancel');\n    var systemInit = constant('alloy.system.init');\n    var documentTouchmove = constant('alloy.system.touchmove');\n    var documentTouchend = constant('alloy.system.touchend');\n    var windowScroll = constant('alloy.system.scroll');\n    var windowResize = constant('alloy.system.resize');\n    var attachedToDom = constant('alloy.system.attached');\n    var detachedFromDom = constant('alloy.system.detached');\n    var dismissRequested = constant('alloy.system.dismissRequested');\n    var repositionRequested = constant('alloy.system.repositionRequested');\n    var focusShifted = constant('alloy.focusmanager.shifted');\n    var slotVisibility = constant('alloy.slotcontainer.visibility');\n    var changeTab = constant('alloy.change.tab');\n    var dismissTab = constant('alloy.dismiss.tab');\n    var highlight = constant('alloy.highlight');\n    var dehighlight = constant('alloy.dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element(), event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element(), event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, map$2(data, constant));\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event());\n    };\n\n    var derive = function (configs) {\n      return wrapAll$1(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event().prevent();\n          }\n        })\n      };\n    };\n    var run = function (name, handler) {\n      return {\n        key: name,\n        value: nu$4({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$4({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element(), name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event();\n        var target = component.getSystem().getByDom(ev.target()).fold(function () {\n          var closest$1 = closest(ev.target(), function (el) {\n            return component.getSystem().getByDom(el).toOption();\n          }, constant(false));\n          return closest$1.getOr(component);\n        }, function (c) {\n          return c;\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute = runOnName(execute());\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.documentElement);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var offsetParent = function (element) {\n      return Option.from(element.dom().offsetParent).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var appendAt = function (parent, element, index) {\n      child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var get$1 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = Element.fromTag('div');\n      var clone = Element.fromDom(element.dom().cloneNode(true));\n      append(container, clone);\n      return get$1(container);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Option.from(get$2(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var clone = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow$1 = function (original) {\n      return clone(original, false);\n    };\n\n    var getHtml = function (element) {\n      var clone = shallow$1(element);\n      return getOuter(clone);\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq$1(originator, component.element()) && !eq$1(originator, target);\n    };\n    var events = derive([can(focus(), function (component, simulatedEvent) {\n        var originator = simulatedEvent.event().originator();\n        var target = simulatedEvent.event().target();\n        if (isRecursive(component, originator, target)) {\n          domGlobals.console.warn(focus() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events\n    });\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix = constant('alloy-id-');\n    var idAttr = constant('data-alloy-id');\n\n    var prefix$1 = prefix();\n    var idAttr$1 = idAttr();\n    var write = function (label, elem) {\n      var id = generate$1(prefix$1 + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom(), idAttr$1, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement(elem) ? elem.dom()[idAttr$1] : null;\n      return Option.from(id);\n    };\n    var generate$2 = function (prefix) {\n      return generate$1(prefix);\n    };\n\n    var make = identity;\n\n    var NoContextApi = function (getComp) {\n      var fail = function (event) {\n        return function () {\n          throw new Error('The component must be in a context to send: ' + event + (getComp ? '\\n' + element(getComp().element()) + ' is not in context.' : ''));\n        };\n      };\n      return {\n        debugInfo: constant('fake'),\n        triggerEvent: fail('triggerEvent'),\n        triggerFocus: fail('triggerFocus'),\n        triggerEscape: fail('triggerEscape'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        broadcast: fail('broadcast'),\n        broadcastOn: fail('broadcastOn'),\n        broadcastEvent: fail('broadcastEvent'),\n        isConnected: constant(false)\n      };\n    };\n    var singleton = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$1('alloy-premade');\n    var premade = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArrays([\n          component.getApis(),\n          component\n        ], rest));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$5({\n          readState: function () {\n            return 'No State required';\n          }\n        });\n      }\n    };\n    var nu$5 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom = function (spec, all) {\n      var schema = map(all, function (a) {\n        return optionObjOf(a.name(), [\n          strict$1('config'),\n          defaulted$1('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, function (v) {\n        return v;\n      });\n      return {\n        list: all,\n        data: map$2(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return function () {\n            return output;\n          };\n        })\n      };\n    };\n    var getBehaviours = function (bData) {\n      return bData.list;\n    };\n    var getData = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each$1(data, function (detail, key) {\n        each$1(detail, function (value, indexKey) {\n          var chain = get(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$6 = function (s) {\n      return {\n        classes: s.classes !== undefined ? s.classes : [],\n        attributes: s.attributes !== undefined ? s.attributes : {},\n        styles: s.styles !== undefined ? s.styles : {}\n      };\n    };\n    var merge$1 = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$6({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName]();\n          var bKey = b[keyName]();\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: constant(purpose)\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: constant(purpose)\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose());\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: constant(name),\n        handler: constant(handler)\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map(tuples, function (c) {\n          return c.name();\n        }), null, 2)]);\n    };\n    var fuse$1 = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map(sortedTuples, function (tuple) {\n            return tuple.handler();\n          });\n          return fuse(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler()) : fuse$1(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name() === o;\n            });\n          }).join(' > ') : tuples[0].name();\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', objOf([\n        field('dom', 'dom', strict(), objOf([\n          strict$1('tag'),\n          defaulted$1('styles', {}),\n          defaulted$1('classes', []),\n          defaulted$1('attributes', {}),\n          option('value'),\n          option('innerHtml')\n        ])),\n        strict$1('components'),\n        strict$1('uid'),\n        defaulted$1('events', {}),\n        defaulted$1('apis', {}),\n        field('eventOrder', 'eventOrder', mergeWith({\n          'alloy.execute': [\n            'disabling',\n            'alloy.base.behaviour',\n            'toggling',\n            'typeaheadevents'\n          ],\n          'alloy.focus': [\n            'alloy.base.behaviour',\n            'focusing',\n            'keying'\n          ],\n          'alloy.system.init': [\n            'alloy.base.behaviour',\n            'disabling',\n            'toggling',\n            'representing'\n          ],\n          'input': [\n            'alloy.base.behaviour',\n            'representing',\n            'streaming',\n            'invalidating'\n          ],\n          'alloy.system.detached': [\n            'alloy.base.behaviour',\n            'representing',\n            'item-events',\n            'tooltipping'\n          ],\n          'mousedown': [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events'\n          ],\n          'touchstart': [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events'\n          ],\n          'mouseover': [\n            'item-type-events',\n            'tooltipping'\n          ],\n          'alloy.receive': [\n            'receiving',\n            'reflecting',\n            'tooltipping'\n          ]\n        }), anyValue$1()),\n        option('domModification')\n      ]), spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map(detail.components, function (comp) {\n          return comp.element();\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$6({});\n      }, nu$6);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read$2 = function (element, attr) {\n      var value = get$2(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read$2(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read$2(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$3 = function (element) {\n      return read$2(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$3(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$5 = function (element, classes) {\n      each(classes, function (x) {\n        remove$4(element, x);\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(domGlobals.Element.prototype.attachShadow) && isFunction(domGlobals.Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return Element.fromDom(e.dom().getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : Element.fromDom(documentOrOwner(dos).dom().body);\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Option.some(r) : Option.none();\n    };\n    var getShadowHost = function (e) {\n      return Element.fromDom(e.dom().host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = Element.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(Element.fromDom(event.target))) {\n          var eventAny = event;\n          if (eventAny.composed && eventAny.composedPath) {\n            var composedPath = eventAny.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Option.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom().shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      return getShadowRoot(Element.fromDom(dom)).fold(function () {\n        return dom.ownerDocument.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(Element.fromDom(domGlobals.document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom().body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$2 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$4 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom();\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = Element.fromTag(tag);\n      set$2(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove$1(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom().offsetWidth;\n    };\n\n    var get$5 = function (element) {\n      return element.dom().value;\n    };\n    var set$3 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom().value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = Element.fromTag(definition.tag);\n      setAll(subject, definition.attributes);\n      add$3(subject, definition.classes);\n      setAll$1(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$3(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$1 = function (spec) {\n      var behaviours = get(spec, 'behaviours').getOr({});\n      var keys$1 = filter(keys(behaviours), function (k) {\n        return behaviours[k] !== undefined;\n      });\n      return map(keys$1, function (k) {\n        return behaviours[k].me;\n      });\n    };\n    var generateFrom$1 = function (spec, all) {\n      return generateFrom(spec, all);\n    };\n    var generate$3 = function (spec) {\n      var all = getBehaviours$1(spec);\n      return generateFrom$1(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine(bData, baseModification, bList, definition) : infoModification;\n      return merge$1(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$3(spec);\n      var bList = getBehaviours(bBlob);\n      var bData = getData(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, function (c) {\n            return [c];\n          });\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: constant(spec),\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: constant(item),\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: constant(events)\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get(spec, 'components').getOr([]);\n      return map(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = Element.fromText(textContent);\n      return external({ element: element });\n    };\n    var external = function (spec) {\n      var extSpec = asRawOrDie('external.component', objOfOnly([\n        strict$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      extSpec.uid.each(function (uid) {\n        writeOnly(extSpec.element, uid);\n      });\n      var me = {\n        getSystem: systemApi.get,\n        config: Option.none,\n        hasConfigured: constant(false),\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: constant(extSpec.element),\n        spec: constant(spec),\n        readState: constant('No state'),\n        syncComponents: noop,\n        components: constant([]),\n        events: constant({})\n      };\n      return premade(me);\n    };\n    var uids = generate$2;\n    var build$1 = function (spec) {\n      return getPremade(spec).fold(function () {\n        var userSpecWithUid = spec.hasOwnProperty('uid') ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      }, function (prebuilt) {\n        return prebuilt;\n      });\n    };\n    var premade$1 = premade;\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$4(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$4(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$6 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api.max(element, value, inclusions);\n      set$2(element, 'max-height', absMax + 'px');\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom()) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n    var set$4 = function (element, h) {\n      return api$1.set(element, h);\n    };\n    var get$7 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$1.max(element, value, inclusions);\n      set$2(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: constant(target),\n        x: constant(x),\n        y: constant(y),\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: constant(raw)\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = Element.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var win = doc.defaultView;\n      win.scrollTo(x, y);\n    };\n\n    var get$9 = function (_win) {\n      var win = _win === undefined ? domGlobals.window : _win;\n      return Option.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? domGlobals.window : _win;\n      var doc = win.document;\n      var scroll = get$8(Element.fromDom(doc));\n      return get$9(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left(), scroll.top(), width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left()), Math.max(visualViewport.pageTop, scroll.top()), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Option.some(paths);\n    };\n\n    var view = function (doc) {\n      var element = doc.dom() === domGlobals.document ? Option.none() : Option.from(doc.dom().defaultView.frameElement);\n      return element.map(Element.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$3 = function (element) {\n      var doc = Element.fromDom(domGlobals.document);\n      var scroll = get$8(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute, element), function (frames) {\n        var offset = viewport(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport(a);\n          return {\n            left: b.left + loc.left(),\n            top: b.top + loc.top()\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return Position(r.left + offset.left() + scroll.left(), r.top + offset.top() + scroll.top());\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box = function (element) {\n      var xy = absolute(element);\n      var w = getOuter$2(element);\n      var h = getOuter$1(element);\n      return bounds$1(xy.left(), xy.top(), w, h);\n    };\n    var absolute$1 = function (element) {\n      var position = find$3(element);\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left(), position.top(), width, height);\n    };\n    var win = function () {\n      return getBounds(domGlobals.window);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest$1 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = Element.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Option.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope.dom());\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$1(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$3 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$2, scope, selector, isRoot);\n    };\n\n    var find$4 = function (queryElem) {\n      var dependent = closest$1(queryElem, function (elem) {\n        if (!isElement(elem)) {\n          return false;\n        }\n        var id = get$2(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$2(dep, 'id');\n        var doc = owner(dep);\n        return descendant$1(doc, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$1('aria-owns');\n      var link = function (elem) {\n        set$1(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$1(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$4(queryElem).exists(function (owner) {\n        return isPartOf(component, owner);\n      });\n    };\n    var isPartOf = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq$1(el, component.element());\n      }, constant(false)) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown$3 = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          domGlobals.console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom(),\n            sequence: map(sequence, function (s) {\n              if (!contains([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Option.some(eventConfig.get()[p]) : Option.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown$3);\n      } else {\n        return unknown$3;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant(ignoreEvent);\n\n    var menuFields = constant([\n      strict$1('menu'),\n      strict$1('selectedMenu')\n    ]);\n    var itemFields = constant([\n      strict$1('item'),\n      strict$1('selectedItem')\n    ]);\n    var schema = constant(objOf(itemFields().concat(menuFields())));\n    var itemSchema = constant(objOf(itemFields()));\n\n    var _initSize = strictObjOf('initSize', [\n      strict$1('numColumns'),\n      strict$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return strictOf('markers', itemSchema());\n    };\n    var tieredMenuMarkers = function () {\n      return strictObjOf('markers', [strict$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers = function (required) {\n      return strictObjOf('markers', map(required, strict$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      var trace = getTrace();\n      return field(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted(Option.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, strict());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, strict());\n    };\n    var output = function (name, value) {\n      return state$1(name, constant(value));\n    };\n    var snapshot = function (name) {\n      return state$1(name, identity);\n    };\n    var initSize = constant(_initSize);\n\n    var nu$7 = function (x, y, bubble, direction, boundsRestriction, label) {\n      return {\n        x: constant(x),\n        y: constant(y),\n        bubble: constant(bubble),\n        direction: constant(direction),\n        boundsRestriction: constant(boundsRestriction),\n        label: constant(label)\n      };\n    };\n\n    var adt$2 = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast = adt$2.southeast;\n    var southwest = adt$2.southwest;\n    var northeast = adt$2.northeast;\n    var northwest = adt$2.northwest;\n    var south = adt$2.south;\n    var north = adt$2.north;\n    var east = adt$2.east;\n    var west = adt$2.west;\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds, boundsRestrictions, bubbleOffsets) {\n      var applyRestriction = function (dir, current) {\n        var bubbleOffset = dir === 'top' || dir === 'bottom' ? bubbleOffsets.top() : bubbleOffsets.left();\n        return get(boundsRestrictions, dir).bind(identity).bind(function (restriction) {\n          if (dir === 'left' || dir === 'top') {\n            return restriction >= current ? Option.some(restriction) : Option.none();\n          } else {\n            return restriction <= current ? Option.some(restriction) : Option.none();\n          }\n        }).map(function (restriction) {\n          return restriction + bubbleOffset;\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds.x);\n      var adjustedTop = applyRestriction('top', bounds.y);\n      var adjustedRight = applyRestriction('right', bounds.right);\n      var adjustedBottom = applyRestriction('bottom', bounds.bottom);\n      return bounds$1(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var eastX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), southY(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), 'layout-se');\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), southY(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), 'layout-sw');\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), northY(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), 'layout-ne');\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), northY(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), 'layout-nw');\n    };\n    var north$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), northY(anchor, element), bubbles.north(), north(), boundsRestriction(anchor, { bottom: 2 }), 'layout-n');\n    };\n    var south$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), southY(anchor), bubbles.south(), south(), boundsRestriction(anchor, { top: 3 }), 'layout-s');\n    };\n    var east$1 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX(anchor), centreY(anchor, element), bubbles.east(), east(), boundsRestriction(anchor, { left: 0 }), 'layout-e');\n    };\n    var west$1 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX(anchor, element), centreY(anchor, element), bubbles.west(), west(), boundsRestriction(anchor, { right: 1 }), 'layout-w');\n    };\n    var all$2 = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$1,\n        northwest$1,\n        southeast$1,\n        southwest$1,\n        north$1,\n        south$1\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$1,\n        northeast$1,\n        southwest$1,\n        southeast$1,\n        north$1,\n        south$1\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1\n      ];\n    };\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Option.none();\n      };\n      var wrappedApis = map$2(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$2(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: function () {\n          return schemaSchema;\n        },\n        exhibit: function (info, base) {\n          return getConfig(info).bind(function (behaviourInfo) {\n            return get(active, 'exhibit').map(function (exhibitor) {\n              return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n            });\n          }).getOr(nu$6({}));\n        },\n        name: function () {\n          return name;\n        },\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll$1(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      strict$1('fields'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var create$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      strict$1('branchKey'),\n      strict$1('branches'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var createModes$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant(undefined);\n\n    var chooseChannels = function (channels, message) {\n      return message.universal() ? channels : filter(channels, function (ch) {\n        return contains(message.channels(), ch);\n      });\n    };\n    var events$1 = function (receiveConfig) {\n      return derive([run(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie('channel[' + ch + '] data\\nReceiver: ' + element(component.element()), channelSchema, receivingData.data());\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$1\n    });\n\n    var ReceivingSchema = [strictOf('channels', setOf$1(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted$1('schema', anyValue$1())\n      ])))];\n\n    var Receiving = create$1({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit = function (base, posConfig) {\n      return nu$6({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit\n    });\n\n    var getDocument = function () {\n      return Element.fromDom(domGlobals.document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom().focus();\n    };\n    var blur = function (element) {\n      return element.dom().blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom();\n      return element.dom() === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Option.from(root.dom().activeElement).map(Element.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var preserve = function (f, container) {\n      var ownerDoc = owner(container);\n      var refocus = active(ownerDoc).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq$1(focused, elem);\n        };\n        return hasFocus(container) ? Option.some(container) : descendant(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(ownerDoc).filter(function (newFocus) {\n          return eq$1(newFocus, oldFocus);\n        }).fold(function () {\n          focus$1(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      return {\n        position: constant(position),\n        left: constant(left),\n        top: constant(top),\n        right: constant(right),\n        bottom: constant(bottom)\n      };\n    };\n    var applyPositionCss = function (element, position) {\n      var addPx = function (num) {\n        return num + 'px';\n      };\n      setOptions(element, {\n        position: Option.some(position.position()),\n        left: position.left().map(addPx),\n        top: position.top().map(addPx),\n        right: position.right().map(addPx),\n        bottom: position.bottom().map(addPx)\n      });\n    };\n\n    var adt$3 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionX = decision.x - x;\n      var decisionY = decision.y - y;\n      var decisionWidth = decision.width;\n      var decisionHeight = decision.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Option.some(decisionX);\n      var top = Option.some(decisionY);\n      var right = Option.some(decisionRight);\n      var bottom = Option.some(decisionBottom);\n      var none = Option.none();\n      return cata(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        return NuPositionCss('absolute', Option.some(decision.x), Option.some(decision.y), Option.none(), Option.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$3, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$8();\n        return find$3(element).translate(-scroll.left(), -scroll.top());\n      });\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left(), position.top(), width, height);\n    };\n    var viewport$1 = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds$1);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds = b();\n          var pos = translate(origin, bounds.x, bounds.y);\n          return bounds$1(pos.left(), pos.top(), bounds.width, bounds.height);\n        });\n      });\n    };\n    var translate = function (origin, x, y) {\n      var pos = Position(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$8();\n        return pos.translate(-outerScroll.left(), -outerScroll.top());\n      };\n      return origin.fold(constant(pos), constant(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    var none$1 = adt$3.none;\n    var relative = adt$3.relative;\n    var fixed = adt$3.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: constant(anchorBox),\n        origin: constant(origin)\n      };\n    };\n    var box$1 = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      return r > max ? min : r < min ? max : r;\n    };\n    var clamp = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var adt$4 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'deltaW',\n          'deltaH'\n        ]\n      }\n    ]);\n    var calcReposition = function (newX, newY, width, height, bounds) {\n      var boundsX = bounds.x;\n      var boundsY = bounds.y;\n      var boundsWidth = bounds.width;\n      var boundsHeight = bounds.height;\n      var xInBounds = newX >= boundsX;\n      var yInBounds = newY >= boundsY;\n      var originInBounds = xInBounds && yInBounds;\n      var xFit = newX + width <= boundsX + boundsWidth;\n      var yFit = newY + height <= boundsY + boundsHeight;\n      var sizeInBounds = xFit && yFit;\n      var deltaW = Math.abs(Math.min(width, xInBounds ? boundsX + boundsWidth - newX : boundsX - (newX + width)));\n      var deltaH = Math.abs(Math.min(height, yInBounds ? boundsY + boundsHeight - newY : boundsY - (newY + height)));\n      var maxX = Math.max(bounds.x, bounds.right - width);\n      var maxY = Math.max(bounds.y, bounds.bottom - height);\n      var limitX = clamp(newX, bounds.x, maxX);\n      var limitY = clamp(newY, bounds.y, maxY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        limitX: limitX,\n        limitY: limitY,\n        deltaW: deltaW,\n        deltaH: deltaH\n      };\n    };\n    var attempt = function (candidate, width, height, bounds) {\n      var candidateX = candidate.x();\n      var candidateY = candidate.y();\n      var bubbleOffsets = candidate.bubble().offset();\n      var bubbleLeft = bubbleOffsets.left();\n      var bubbleTop = bubbleOffsets.top();\n      var adjustedBounds = adjustBounds(bounds, candidate.boundsRestriction(), bubbleOffsets);\n      var boundsY = adjustedBounds.y;\n      var boundsBottom = adjustedBounds.bottom;\n      var boundsX = adjustedBounds.x;\n      var boundsRight = adjustedBounds.right;\n      var newX = candidateX + bubbleLeft;\n      var newY = candidateY + bubbleTop;\n      var _a = calcReposition(newX, newY, width, height, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, limitX = _a.limitX, limitY = _a.limitY, deltaW = _a.deltaW, deltaH = _a.deltaH;\n      var upAvailable = constant(limitY + deltaH - boundsY);\n      var downAvailable = constant(boundsBottom - limitY);\n      var maxHeight = cataVertical(candidate.direction(), downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant(limitX + deltaW - boundsX);\n      var eastAvailable = constant(boundsRight - limitX);\n      var maxWidth = cataHorizontal(candidate.direction(), eastAvailable, eastAvailable, westAvailable);\n      var reposition = {\n        x: limitX,\n        y: limitY,\n        width: deltaW,\n        height: deltaH,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction(),\n        classes: {\n          on: candidate.bubble().classesOn(),\n          off: candidate.bubble().classesOff()\n        },\n        label: candidate.label(),\n        candidateYforTest: newY\n      };\n      return originInBounds && sizeInBounds ? adt$4.fit(reposition) : adt$4.nofit(reposition, deltaW, deltaH);\n    };\n    var attempts = function (candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, deltaW, deltaH) {\n        var next = layout(anchorBox, elementBox, bubbles);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(adt$4.fit, function (newReposition, newDeltaW, newDeltaH) {\n          var improved = newDeltaH > deltaH || newDeltaW > deltaW;\n          return improved ? adt$4.nofit(newReposition, newDeltaW, newDeltaH) : adt$4.nofit(reposition, deltaW, deltaH);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(adt$4.fit, bestNext);\n      }, adt$4.nofit({\n        x: anchorBox.x,\n        y: anchorBox.y,\n        width: elementBox.width,\n        height: elementBox.height,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast(),\n        classes: {\n          on: [],\n          off: []\n        },\n        label: 'none',\n        candidateYforTest: anchorBox.y\n      }, -1, -1));\n      return abc.fold(identity, identity);\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$2(p),\n        height: getOuter$1(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$5(element, classInfo.off);\n      add$3(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position = function (element, decision, options) {\n      applyPositionCss(element, reposition(options.origin, decision));\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax(element, Math.floor(maxHeight));\n    };\n    var anchored = constant(function (element, available) {\n      setMaxHeight(element, available);\n      setAll$1(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable = constant(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, getBounds, overrideOptions) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox();\n      var origin = anchor.origin();\n      var options = {\n        bounds: viewport$1(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction\n      };\n      go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position(element, decision, options);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right'\n    ];\n    var nu$8 = function (width, yoffset, classes) {\n      var getClasses = function (prop) {\n        return get(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: function () {\n            return Position(xDelta, yDelta);\n          },\n          classesOn: function () {\n            return bind(alignmentsOn, getClasses);\n          },\n          classesOff: function () {\n            return bind(alignmentsOff, getClasses);\n          }\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerNorthwest: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        innerNortheast: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        innerNorth: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        innerSouthwest: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        innerSoutheast: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        innerSouth: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        innerWest: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerEast: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$8(0, 0, {});\n    };\n\n    var nu$9 = function (x) {\n      return x;\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$4(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement(current) && get$2(current, Attribute) === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$1 = function () {\n      return optionObjOf('layouts', [\n        strict$1('onLtr'),\n        strict$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$a = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element());\n      var layouts = get$a(component.element(), anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Option.some(anchorInfo.hotspot.element()));\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var HotspotAnchor = [\n      strict$1('hotspot'),\n      option('bubble'),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement)\n    ];\n\n    var placement$1 = function (component, anchorInfo, origin) {\n      var pos = translate(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds$1(pos.left(), pos.top(), anchorInfo.width, anchorInfo.height);\n      var layouts = get$a(component.element(), anchorInfo, all$2(), allRtl(), all$2(), allRtl(), Option.none());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      strict$1('x'),\n      strict$1('y'),\n      defaulted$1('height', 0),\n      defaulted$1('width', 0),\n      defaulted$1('bubble', fallback()),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement$1)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: constant(start),\n        soffset: constant(soffset),\n        finish: constant(finish),\n        foffset: constant(foffset)\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$5 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$2 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$5.before;\n    var on = adt$5.on;\n    var after$1 = adt$5.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$1,\n      cata: cata$2,\n      getStart: getStart\n    };\n\n    var adt$6 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$6.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$6.domRange;\n    var relative$1 = adt$6.relative;\n    var exact = adt$6.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative$1,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var adt$7 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$7.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$7.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$7.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr = adt$7.ltr;\n    var rtl = adt$7.rtl;\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$b = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Option.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      var anchor = Element.fromDom(selection.anchorNode);\n      var focus = Element.fromDom(selection.focusNode);\n      return after$2(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n    };\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText(last) ? get$b(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    var adt$8 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity, identity);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left(), a.top());\n      }, Position(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$8.screen;\n    var absolute$2 = adt$8.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom();\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner(frame);\n        var compOwner = owner(component.element());\n        return eq$1(frameOwner, compOwner);\n      };\n      return Option.from(win.frameElement).map(Element.fromDom).filter(hasSameOwner).map(absolute);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner(component.element());\n      var outerScroll = get$8(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$2(offset, outerScroll.left(), outerScroll.top());\n    };\n\n    var capRect = function (left, top, width, height) {\n      var newLeft = left, newTop = top, newWidth = width, newHeight = height;\n      if (left < 0) {\n        newLeft = 0;\n        newWidth = width + left;\n      }\n      if (top < 0) {\n        newTop = 0;\n        newHeight = height + top;\n      }\n      var point = screen(Position(newLeft, newTop));\n      return Option.some(pointed(point, newWidth, newHeight));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left(), topLeft.top(), box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? belowOrAboveRtl() : belowOrAboveRtl();\n        var layouts = get$a(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Option.none());\n        return nu$9({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Option.none()\n        });\n      });\n    };\n\n    var point$1 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce$1 = function (element, offset) {\n      return isText(element) ? point$1(element, offset) : descendOnce(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce$1(sel.start(), sel.soffset());\n        var modFinish = descendOnce$1(sel.finish(), sel.foffset());\n        return Selection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$2 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom();\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getFirstRect$1(win, Selection.exactFromRange(sel)).orThunk(function () {\n          var x = Element.fromText(zeroWidth);\n          before(sel.start(), x);\n          return getFirstRect$1(win, Selection.exact(x, 0, x, 1)).map(function (rect) {\n            remove(x);\n            return rect;\n          });\n        });\n        return optRect.bind(function (rawRect) {\n          return capRect(rawRect.left(), rawRect.top(), rawRect.width(), rawRect.height());\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement(sel.start()) ? Option.some(sel.start()) : parent(sel.start());\n      });\n      var elem = targetElement.getOr(component.element());\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$2)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.bind(function (target) {\n        var rect = target.dom().getBoundingClientRect();\n        var nodeBox = capRect(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element());\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      strict$1('node'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$3)\n    ];\n\n    var eastX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), southY$1(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), 'link-layout-se');\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), southY$1(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), 'link-layout-sw');\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), northY$1(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), 'link-layout-ne');\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), 'link-layout-nw');\n    };\n    var all$3 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2\n      ];\n    };\n\n    var placement$4 = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element());\n      var layouts = get$a(component.element(), submenuInfo, all$3(), allRtl$1(), all$3(), allRtl$1(), Option.none());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      strict$1('item'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      output('placement', placement$4)\n    ];\n\n    var AnchorSchema = choose$1('anchor', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var getFixedOrigin = function () {\n      var html = domGlobals.document.documentElement;\n      return fixed(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute(component.element());\n      var bounds = component.element().dom().getBoundingClientRect();\n      return relative(position.left(), position.top(), bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee) {\n      var anchor = box$1(anchoring.anchorBox, origin);\n      simple(anchor, placee.element(), anchoring.bubble, anchoring.layouts, getBounds, anchoring.overrides);\n    };\n    var position$1 = function (component, posConfig, posState, anchor, placee) {\n      positionWithin(component, posConfig, posState, anchor, placee, Option.none());\n    };\n    var positionWithin = function (component, posConfig, posState, anchor, placee, boxElement) {\n      var boundsBox = boxElement.map(box);\n      return positionWithinBounds(component, posConfig, posState, anchor, placee, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, anchor, placee, bounds) {\n      var anchorage = asRawOrDie('positioning anchor.info', AnchorSchema, anchor);\n      preserve(function () {\n        set$2(placee.element(), 'position', 'fixed');\n        var oldVisibility = getRaw(placee.element(), 'visibility');\n        set$2(placee.element(), 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          doPlace(component, origin, anchoring, getBounds, placee);\n        });\n        oldVisibility.fold(function () {\n          remove$6(placee.element(), 'visibility');\n        }, function (vis) {\n          set$2(placee.element(), 'visibility', vis);\n        });\n        if (getRaw(placee.element(), 'left').isNone() && getRaw(placee.element(), 'top').isNone() && getRaw(placee.element(), 'right').isNone() && getRaw(placee.element(), 'bottom').isNone() && getRaw(placee.element(), 'position').is('fixed')) {\n          remove$6(placee.element(), 'position');\n        }\n      }, placee.element());\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode\n    });\n\n    var PositionSchema = [\n      defaulted$1('useFixed', never),\n      option('getBounds')\n    ];\n\n    var Positioning = create$1({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach = function (parent, child) {\n      append(parent.element(), child.element());\n    };\n    var detachChildren = function (component) {\n      each(component.components(), function (childComp) {\n        return remove(childComp.element());\n      });\n      empty(component.element());\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren(component);\n      var deleted = difference(subs, newChildren);\n      each(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach(component, childComp);\n          if (inBody(component.element())) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach$1 = function (parent, child) {\n      attachWith(parent, child, append);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element(), child.element());\n      if (inBody(parent.element())) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove(component.element());\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element()).bind(function (p) {\n        return component.getSystem().getByDom(p).toOption();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren$1 = function (component) {\n      var subs = component.components();\n      each(subs, doDetach);\n      empty(component.element());\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element());\n      var children$1 = children(guiSystem.element());\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element());\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove(guiSystem.element());\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren$1(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach$1(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach$1(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren$1(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf$1 = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element(), cssKey).fold(function () {\n        remove$1(sandbox.element(), attr);\n      }, function (v) {\n        set$1(sandbox.element(), attr, v);\n      });\n      set$2(sandbox.element(), cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element(), attr).fold(function () {\n        return remove$6(sandbox.element(), cssKey);\n      }, function (oldValue) {\n        return set$2(sandbox.element(), cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$2(sandbox.element(), 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element())) {\n        remove$6(sandbox.element(), 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open,\n        openWhileCloaked: openWhileCloaked,\n        close: close,\n        isOpen: isOpen,\n        isPartOf: isPartOf$1,\n        getState: getState,\n        setContent: setContent\n    });\n\n    var events$2 = function (sandboxConfig, sandboxState) {\n      return derive([run(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$2\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      strict$1('isPartOf'),\n      strict$1('getAttachPoint'),\n      defaulted$1('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init = function () {\n      var contents = Cell(Option.none());\n      var readState = constant('not-implemented');\n      var isOpen = function () {\n        return contents.get().isSome();\n      };\n      var set = function (comp) {\n        contents.set(Option.some(comp));\n      };\n      var get = function () {\n        return contents.get();\n      };\n      var clear = function () {\n        contents.set(Option.none());\n      };\n      return nu$5({\n        readState: readState,\n        isOpen: isOpen,\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Sandboxing = create$1({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant('dismiss.popups');\n    var repositionPopups = constant('reposition.popups');\n    var mouseReleased = constant('mouse.released');\n\n    var schema$2 = objOfOnly([\n      defaulted$1('isExtraPart', constant(false)),\n      optionObjOf('fireEventInstead', [defaulted$1('event', dismissRequested())])\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Dismissal', schema$2, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([strict$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$3 = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted$1('event', repositionRequested())]),\n      strictFunction('doReposition')\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Reposition', schema$3, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        onUnload: onUnload,\n        setValue: setValue,\n        getValue: getValue,\n        getState: getState$1\n    });\n\n    var events$3 = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad)];\n      return derive(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var memory = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$5({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = function () {\n      };\n      return nu$5({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get(dataByValue.get(), itemString).orThunk(function () {\n          return get(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each(items, function (item) {\n          newDataByValue[item.value] = item;\n          get(item, 'meta').each(function (meta) {\n            get(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$5({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$1 = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory,\n        dataset: dataset,\n        manual: manual,\n        init: init$1\n    });\n\n    var setValue$1 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).fold(function () {\n        return store.getFallbackEntry(key);\n      }, function (data) {\n        return data;\n      });\n    };\n    var onLoad$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$1(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      strict$1('getFallbackEntry'),\n      strict$1('getDataKey'),\n      strict$1('setValue'),\n      output('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$1,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$2 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$2 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$2 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      strict$1('getValue'),\n      defaulted$1('setValue', noop),\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$2,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$3 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$3,\n        getValue: getValue$3,\n        onLoad: onLoad$3,\n        onUnload: onUnload$2,\n        state: memory\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted$1('resetOnDom', false)\n    ];\n\n    var Representing = create$1({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field$1 = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([state$1('dump', identity)]));\n    };\n    var get$c = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, data.dump), derive$1(original));\n    };\n    var SketchBehaviours = {\n      field: field$1,\n      augment: augment,\n      get: get$c\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$9 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$9.single(true, constant(compSpec));\n      }\n      return get(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$9.single(false, constant(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get(value, 'components').getOr([]);\n        var substituted = bind(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$2(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each$1(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single = adt$9.single;\n    var multiple = adt$9.multiple;\n    var placeholder = constant(_placeholder);\n\n    var adt$a = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted$1('factory', { sketch: identity });\n    var fSchema = defaulted$1('schema', []);\n    var fName = strict$1('name');\n    var fPname = field('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$1(typeSpec.name) + '>';\n    }), anyValue$1());\n    var fGroupSchema = state$1('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted$1('defaults', constant({}));\n    var fOverrides = defaulted$1('overrides', constant({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      strict$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Option.some, Option.none, Option.some, Option.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity, identity, identity, identity);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$a.required, requiredSpec);\n    var external$1 = convert(adt$a.external, externalSpec);\n    var optional = convert(adt$a.optional, optionalSpec);\n    var group = convert(adt$a.group, groupSpec);\n    var original = constant('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine$2 = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant(data.factory.sketch(combine$2(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant(internals),\n        externals: constant(externals)\n      };\n    };\n\n    var generate$4 = function (owner, parts) {\n      var r = {};\n      each(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind(parts, function (part) {\n        return part.fold(Option.none, Option.some, Option.none, Option.none).map(function (data) {\n          return strictObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components = function (owner, detail, internals) {\n      return substitutePlaces(Option.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOption();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$2(detail.partUids, function (pUid, _k) {\n        return constant(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll$1(map(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue$1());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$4,\n        generateOne: generateOne,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [strictObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        strict$1('uid'),\n        defaulted$1('dom', {}),\n        defaulted$1('components', []),\n        snapshot('originalSpec'),\n        defaulted$1('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie$1 = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components$1 = components(owner, detail, subs.internals());\n      return factory(detail, components$1, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$2('uid') });\n    };\n\n    function isSketchSpec(spec) {\n      return spec.uid !== undefined;\n    }\n    var singleSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      strict$1('partFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var single$2 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: constant(config.name),\n        configFields: constant(config.configFields),\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite$1 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$4(config.name, config.partFields);\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: constant(config.name),\n        partFields: constant(config.partFields),\n        configFields: constant(config.configFields),\n        sketch: sketch,\n        parts: constant(parts)\n      }, apis), extraApis);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Option.none();\n        }\n      }\n      return Option.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Option.none();\n    };\n\n    var inside = function (target) {\n      return name(target) === 'input' && get$2(target, 'type') !== 'radio' || name(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [strict$1('find')];\n\n    var Composing = create$1({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element(), '.' + hConfig.highlightClass);\n      each(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element() === h;\n          })) {\n          remove$4(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight$1 = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$4(target.element(), hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight());\n      }\n    };\n    var highlight$1 = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element(), hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight$1(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw new Error(err);\n      }, function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight$1(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has$2(queryTarget.element(), hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant$1(component.element(), '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOption();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      return Option.from(items[index]).fold(function () {\n        return Result.error('No element found with index ' + index);\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant$1(component.element(), '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOption();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Option.some(items[items.length - 1]) : Option.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOption();\n      });\n    };\n    var getDelta = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      var current = findIndex(items, function (item) {\n        return has$2(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOption();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      return cat(map(items, function (i) {\n        return component.getSystem().getByDom(i).toOption();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight$1,\n        highlight: highlight$1,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      strict$1('highlightClass'),\n      strict$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$1({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = function () {\n      return [8];\n    };\n    var TAB = function () {\n      return [9];\n    };\n    var ENTER = function () {\n      return [13];\n    };\n    var ESCAPE = function () {\n      return [27];\n    };\n    var SPACE = function () {\n      return [32];\n    };\n    var LEFT = function () {\n      return [37];\n    };\n    var UP = function () {\n      return [38];\n    };\n    var RIGHT = function () {\n      return [39];\n    };\n    var DOWN = function () {\n      return [40];\n    };\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw();\n        return contains(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw();\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw();\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose$2 = function (transitions, event) {\n      var transition = find(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq$1(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom = function () {\n      var get = function (component) {\n        return search(component.element());\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element());\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element();\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted$1('focusManager', dom()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output('handler', me),\n          output('state', stateInit),\n          output('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose$2(rules, simulatedEvent.event()).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Option.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run(focus(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE().concat(ENTER()))(simulatedEvent.event());\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$3 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted$1('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted$1('firstTabstop', 0),\n        defaulted$1('useTabstopAt', constant(true)),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$3(element, sel);\n        }).getOr(element);\n        return get$6(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element(), tabbingConfig.selector);\n        var visibles = filter(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Option.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$3(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Option.some(true) : Option.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Option.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element(), tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex(tabstops, curry(eq$1, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant([\n        rule(and([\n          isShift,\n          inSet(TAB())\n        ]), goBackwards),\n        rule(inSet(TAB()), goForwards),\n        rule(inSet(ESCAPE()), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER())\n        ]), execute)\n      ]);\n      var getKeyupRules = constant([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Option.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$3(state$1('cyclic', constant(false)));\n\n    var CyclicType = create$3(state$1('cyclic', constant(true)));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute());\n      return Option.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE())(simulatedEvent.event());\n      return isComplex ? Option.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Option.some(true);\n    };\n\n    var schema$4 = [\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('useSpace', false),\n      defaulted$1('useEnter', true),\n      defaulted$1('useControlEnter', false),\n      defaulted$1('useDown', false)\n    ];\n    var execute$1 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element());\n    };\n    var getKeydownRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element()) ? SPACE() : [];\n      var enterExec = executeConfig.useEnter ? ENTER() : [];\n      var downExec = executeConfig.useDown ? DOWN() : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$1)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER())\n        ]), execute$1)] : []);\n    };\n    var getKeyupRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element()) ? [rule(inSet(SPACE()), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$4, NoState.init, getKeydownRules, getKeyupRules, function () {\n      return Option.none();\n    });\n\n    var flatgrid = function () {\n      var dimensions = Cell(Option.none());\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set(Option.some({\n          numRows: numRows,\n          numColumns: numColumns\n        }));\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$5({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$2 = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid,\n        init: init$2\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element());\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element(), focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$2 = useV;\n    var south$2 = useV;\n    var move = useV;\n\n    var isHidden = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden(element.dom());\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex(candidates, predicate).map(function (index) {\n        return {\n          index: constant(index),\n          candidates: constant(candidates)\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq$1(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex$1 = function (elements, target) {\n      return findIndex(elements, function (elem) {\n        return eq$1(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row() * numCols + address.column();\n        return newIndex >= 0 && newIndex < values.length ? Option.some(values[newIndex]) : Option.none();\n      });\n    };\n    var cycleHorizontal = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Option.some({\n          row: constant(oldRow),\n          column: constant(newColumn)\n        });\n      });\n    };\n    var cycleVertical = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp(oldColumn, 0, colsInRow - 1);\n        return Option.some({\n          row: constant(newRow),\n          column: constant(newCol)\n        });\n      });\n    };\n    var cycleRight = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, -1);\n    };\n    var cycleUp = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, -1);\n    };\n    var cycleDown = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, +1);\n    };\n\n    var schema$5 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('captureTab', false),\n      initSize()\n    ];\n    var focusIn = function (component, gridConfig, _gridState) {\n      descendant$1(component.element(), gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, gridConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates(), identified.index(), gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Option.some(true) : Option.none();\n    };\n    var doEscape = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft = doMove(cycleLeft);\n    var moveRight = doMove(cycleRight);\n    var moveNorth = doMove(cycleUp);\n    var moveSouth = doMove(cycleDown);\n    var getKeydownRules$1 = constant([\n      rule(inSet(LEFT()), west$2(moveLeft, moveRight)),\n      rule(inSet(RIGHT()), east$2(moveLeft, moveRight)),\n      rule(inSet(UP()), north$2(moveNorth)),\n      rule(inSet(DOWN()), south$2(moveSouth)),\n      rule(and([\n        isShift,\n        inSet(TAB())\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB())\n      ]), handleTab),\n      rule(inSet(ESCAPE()), doEscape),\n      rule(inSet(SPACE().concat(ENTER())), execute$2)\n    ]);\n    var getKeyupRules$1 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$5, flatgrid, getKeydownRules$1, getKeyupRules$1, function () {\n      return Option.some(focusIn);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name(candidate) === 'button' && get$2(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Option.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Option.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index();\n        var candidates = identified.candidates();\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$6 = [\n      strict$1('selector'),\n      defaulted$1('getInitial', Option.none),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('executeOnMove', false),\n      defaulted$1('allowVertical', true)\n    ];\n    var findCurrent$1 = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, flowConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent$1(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$1 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant$1(component.element(), flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$3(component, simulatedEvent, flowConfig) : Option.some(true);\n        });\n      };\n    };\n    var doEscape$1 = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$2 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT().concat(flowConfig.allowVertical ? UP() : []);\n      var eastMovers = RIGHT().concat(flowConfig.allowVertical ? DOWN() : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$2(moveLeft$1, moveRight$1))),\n        rule(inSet(eastMovers), doMove$1(east$2(moveLeft$1, moveRight$1))),\n        rule(inSet(ENTER()), execute$3),\n        rule(inSet(SPACE()), execute$3),\n        rule(inSet(ESCAPE()), doEscape$1)\n      ];\n    };\n    var getKeyupRules$2 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var FlowType = typical(schema$6, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Option.some(focusIn$1);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Option.from(matrix[rowIndex]).bind(function (row) {\n        return Option.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal$1 = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical$1 = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, -1);\n    };\n    var cycleUp$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, -1);\n    };\n    var cycleDown$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$7 = [\n      strictObjOf('selectors', [\n        strict$1('row'),\n        strict$1('cell')\n      ]),\n      defaulted$1('cycles', true),\n      defaulted$1('previousSelector', Option.none),\n      defaulted$1('execute', defaultExecute)\n    ];\n    var focusIn$2 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant$1(component.element(), selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$4 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element()).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove$2 = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$3(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex$1(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex$1(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1, moveLeft$2);\n    var moveRight$3 = doMove$2(cycleRight$1, moveRight$2);\n    var moveNorth$1 = doMove$2(cycleUp$1, moveUp);\n    var moveSouth$1 = doMove$2(cycleDown$1, moveDown);\n    var getKeydownRules$3 = constant([\n      rule(inSet(LEFT()), west$2(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT()), east$2(moveLeft$3, moveRight$3)),\n      rule(inSet(UP()), north$2(moveNorth$1)),\n      rule(inSet(DOWN()), south$2(moveSouth$1)),\n      rule(inSet(SPACE().concat(ENTER())), execute$4)\n    ]);\n    var getKeyupRules$3 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var MatrixType = typical(schema$7, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Option.some(focusIn$2);\n    });\n\n    var schema$8 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('moveOnTab', false)\n    ];\n    var execute$5 = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$3 = function (component, menuConfig, _state) {\n      descendant$1(component.element(), menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveUp$1)(component, simulatedEvent, menuConfig, menuState) : Option.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveDown$1)(component, simulatedEvent, menuConfig, menuState) : Option.none();\n    };\n    var getKeydownRules$4 = constant([\n      rule(inSet(UP()), move(moveUp$1)),\n      rule(inSet(DOWN()), move(moveDown$1)),\n      rule(and([\n        isShift,\n        inSet(TAB())\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB())\n      ]), fireTab),\n      rule(inSet(ENTER()), execute$5),\n      rule(inSet(SPACE()), execute$5)\n    ]);\n    var getKeyupRules$4 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var MenuType = typical(schema$8, NoState.init, getKeydownRules$4, getKeyupRules$4, function () {\n      return Option.some(focusIn$3);\n    });\n\n    var schema$9 = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules$5 = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE()), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER())\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER())\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB())\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB())\n        ]), specialInfo.onTab),\n        rule(inSet(UP()), specialInfo.onUp),\n        rule(inSet(DOWN()), specialInfo.onDown),\n        rule(inSet(LEFT()), specialInfo.onLeft),\n        rule(inSet(RIGHT()), specialInfo.onRight),\n        rule(inSet(SPACE()), specialInfo.onSpace),\n        rule(inSet(ESCAPE()), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules$5 = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE()), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$9, NoState.init, getKeydownRules$5, getKeyupRules$5, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid$1 = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid$1,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes$1({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element(), component.element());\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            domGlobals.console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$5 = function (component, replaceConfig, replaceState, data) {\n      preserve(function () {\n        var newChildren = map(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element());\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append$2 = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append, appendee);\n    };\n    var prepend$1 = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend, prependee);\n    };\n    var remove$7 = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find(children, function (child) {\n        return eq$1(removee.element(), child.element());\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Option.from(children[replaceeIndex]).map(function (replacee) {\n        remove$7(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append$2,\n        prepend: prepend$1,\n        remove: remove$7,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$5,\n        contents: contents\n    });\n\n    var Replacing = create$1({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$4 = function (name, eventHandlers) {\n      var events = derive(eventHandlers);\n      return create$1({\n        fields: [strict$1('enabled')],\n        name: name,\n        active: { events: constant(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$4(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$1(component.element());\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur$1 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur(component.element());\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element());\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur$1,\n        isFocused: isFocused\n    });\n\n    var exhibit$1 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$6(mod);\n    };\n    var events$5 = function (focusConfig) {\n      return derive([run(focus(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event().prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$1,\n        events: events$5\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted$1('stopMousedown', false),\n      defaulted$1('ignore', false)\n    ];\n\n    var Focusing = create$1({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element(), toggleClass);\n        } else {\n          remove$4(component.element(), toggleClass);\n        }\n      });\n    };\n    var toggle = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on$1 = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$6 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on$1 : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad$4 = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$4,\n        toggle: toggle,\n        isOn: isOn,\n        on: on$1,\n        off: off,\n        set: set$6\n    });\n\n    var exhibit$2 = function () {\n      return nu$6({});\n    };\n    var events$6 = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle);\n      var load = loadEvent(toggleConfig, toggleState, onLoad$4);\n      return derive(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2,\n        events: events$6\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted$1('selected', false),\n      option('toggleClass'),\n      defaulted$1('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted$1('syncWithExpanded', false),\n          output('update', updatePressed)\n        ],\n        checked: [output('update', updateChecked)],\n        expanded: [output('update', updateExpanded)],\n        selected: [output('update', updateSelected)],\n        none: [output('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$1({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run(click(), onClick),\n        run(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$7 = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element()).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant(hoverEvent);\n    var focus$3 = constant(focusEvent);\n\n    var builder = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArrays(pointerEvents(), [\n            run(mouseover(), onHover),\n            run(focusItem(), Focusing.focus)\n          ]))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$a = [\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted$1('ignoreFocus', false),\n      defaulted$1('domModification', {}),\n      output('builder', builder),\n      defaulted$1('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive([stopper(focusItem())])\n      };\n    };\n    var schema$b = [\n      strict$1('dom'),\n      strict$1('components'),\n      output('builder', builder$1)\n    ];\n\n    var owner$2 = function () {\n      return 'item-widget';\n    };\n    var parts = constant([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: function () {\n                  }\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder$2 = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts());\n      var components$1 = components(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event().target()) ? Option.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element());\n            return Option.none();\n          } else {\n            return Option.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components$1,\n        domModification: detail.domModification,\n        events: derive([\n          runOnExecute(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(mouseover(), onHover),\n          run(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Option.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element());\n                return Option.none();\n              } else {\n                return Option.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$c = [\n      strict$1('uid'),\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('autofocus', false),\n      defaulted$1('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted$1('domModification', {}),\n      defaultUidsSchema(parts()),\n      output('builder', builder$2)\n    ];\n\n    var itemSchema$1 = choose$1('type', {\n      widget: schema$c,\n      item: schema$a,\n      separator: schema$b\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$1 = constant([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie('menu.spec item', itemSchema$1, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return u.hasOwnProperty('uid') ? u : __assign(__assign({}, u), { uid: generate$2('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$d = constant([\n      strict$1('value'),\n      strict$1('items'),\n      strict$1('dom'),\n      strict$1('components'),\n      defaulted$1('eventOrder', {}),\n      field$1('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output('config', configureGrid)\n        ],\n        matrix: [\n          output('config', configureMatrix),\n          strict$1('rowSelector')\n        ],\n        menu: [\n          defaulted$1('moveOnTab', true),\n          output('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted$1('fakeFocus', false),\n      defaulted$1('focusManager', dom()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus$4 = constant('alloy.menu-focus');\n\n    var make$1 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Option.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive([\n          run(focus$3(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event();\n            menu.getSystem().getByDom(event.target()).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus$4(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event().item();\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite$1({\n      name: 'Menu',\n      configFields: schema$d(),\n      partFields: parts$1(),\n      factory: make$1\n    });\n\n    var transpose = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get(byMenu, finish).bind(function (triggerItem) {\n        return get(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Option.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$5 = function (menus, expansions) {\n      var items = {};\n      each$1(menus, function (menuItems, menu) {\n        each(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose(expansions);\n      var menuPaths = map$2(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$2(items, function (menu) {\n        return get(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$3 = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = Cell(Option.none());\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.set(Option.none());\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(Option.some(sPrimary));\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$5(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$1(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return primary.get().is(menuValue) ? [] : [Option.none()];\n            }, function (data) {\n              return [Option.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get(expansions.get(), itemValue).map(function (menu) {\n          var current = get(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Option.some(path.slice(1)) : Option.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Option.some(prep.menu) : Option.none();\n    };\n    var LayeredState = {\n      init: init$3,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$2 = function (detail, _rawUiSpec) {\n      var submenuParentItems = Cell(Option.none());\n      var buildMenus = function (container, primaryName, menus) {\n        return map$2(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Option.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$2(detail.data.menus, function (data, _menuName) {\n          return bind(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element(), focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Option.some(prep.menu) : Option.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each(others, function (o) {\n          remove$5(o.element(), [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element(), '.' + detail.markers.item);\n          var parentItems = filter(items, function (i) {\n            return get$2(i, 'aria-haspopup') === 'true';\n          });\n          each(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(Option.some(r));\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each$1(parentItems, function (v, k) {\n          var expanded = contains(path, k);\n          set$1(v.element(), 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Option.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Option.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each(rest, function (r) {\n                add$2(r.element(), detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element())) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              remove$5(activeMenu.element(), [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Option.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        var value = getItemValue(item);\n        return layeredState.expand(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return Option.from(path[0]).bind(function (menuName) {\n            return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n              var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element())) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Option.some(item);\n              }\n            });\n          });\n        });\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element()) ? Option.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element()) ? Option.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$3(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOption().bind(function (item) {\n              return f(container, item).map(function () {\n                return true;\n              });\n            });\n          });\n        };\n      };\n      var events = derive([\n        run(focus$4(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event().item();\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event().menu();\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event().item());\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute(function (component, simulatedEvent) {\n          var target = simulatedEvent.event().target();\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, function () {\n            });\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade$1(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event().item();\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Option.from(container.components()[0]).filter(function (comp) {\n          return get$2(comp.element(), 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element(), focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem = constant('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem$1 = function (text) {\n      return {\n        value: generate$1(collapseItem()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single$2({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted$1('highlightImmediately', true),\n        strictObjOf('data', [\n          strict$1('primary'),\n          strict$1('menus'),\n          strict$1('expansions')\n        ]),\n        defaulted$1('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        strict$1('dom'),\n        defaulted$1('navigateOnHover', true),\n        defaulted$1('stayInDom', false),\n        field$1('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted$1('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$2,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem$1\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, anchor, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Option.some(true);\n        },\n        onExecute: function () {\n          return Option.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), anchor, menu, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, __assign({\n            anchor: 'submenu',\n            item: item\n          }, getSubmenuLayouts(triggeringPaths)), submenu);\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, anchor, primaryMenu, getBounds());\n          each(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, __assign({\n              anchor: 'submenu',\n              item: st.triggeringItem\n            }, submenuLayouts), st.triggeredMenu);\n          });\n        }\n      });\n    };\n    var factory = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, anchor, thing) {\n        showWithin(sandbox, anchor, thing, Option.none());\n      };\n      var showWithin = function (sandbox, anchor, thing, boxElement) {\n        showWithinBounds(sandbox, anchor, thing, function () {\n          return boxElement.map(function (elem) {\n            return box(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, anchor, thing, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, anchor, sandbox, getBounds());\n        });\n        Representing.setValue(sandbox, Option.some({\n          mode: 'position',\n          anchor: anchor,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, anchor, menuSpec) {\n        showMenuWithinBounds(sandbox, anchor, menuSpec, function () {\n          return Option.none();\n        });\n      };\n      var showMenuWithinBounds = function (sandbox, anchor, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, anchor, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Option.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Option.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(function (tmenu) {\n                tieredMenu.repositionMenus(tmenu);\n              });\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, state.anchor, sandbox, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Option.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single$2({\n      name: 'InlineView',\n      configFields: [\n        strict$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field$1('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted$1('event', repositionRequested())]),\n        defaulted$1('getRelated', Option.none),\n        defaulted$1('isExtraPart', never),\n        defaulted$1('eventOrder', Option.none)\n      ],\n      factory: factory,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var westEdgeX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor) {\n      return anchor.y;\n    };\n    var southY$2 = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var southeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), southY$2(anchor, element), bubbles.innerSoutheast(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), 'layout-inner-se');\n    };\n    var southwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), southY$2(anchor, element), bubbles.innerSouthwest(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), 'layout-inner-sw');\n    };\n    var northeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), northY$2(anchor), bubbles.innerNortheast(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), 'layout-inner-ne');\n    };\n    var northwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), northY$2(anchor), bubbles.innerNorthwest(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), 'layout-inner-nw');\n    };\n    var north$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), northY$2(anchor), bubbles.innerNorth(), south(), boundsRestriction(anchor, { top: 2 }), 'layout-inner-n');\n    };\n    var south$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouth(), north(), boundsRestriction(anchor, { bottom: 3 }), 'layout-inner-s');\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$1 = function (detail) {\n      var events = events$7(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get(detail.dom, 'attributes').bind(function (attrs) {\n          return get(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single$2({\n      name: 'Button',\n      factory: factory$1,\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('dom'),\n        defaulted$1('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$2('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOption();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var defaultIcon = function (icons) {\n      return Option.from(icons()['temporary-placeholder']).getOr('!not found!');\n    };\n    var get$d = function (name, icons) {\n      return Option.from(icons()[name.toLowerCase()]).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getOr = function (name, icons, fallback) {\n      return Option.from(icons()[name.toLowerCase()]).or(fallback).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getFirst$1 = function (names, icons) {\n      return findMap(names, function (name) {\n        return Option.from(icons()[name.toLowerCase()]);\n      }).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$2 = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Option.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon'],\n              innerHtml: getFirst$1(iconChoices, detail.iconProvider)\n            }\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body']\n            },\n            components: [memBannerText.asSpec()],\n            behaviours: derive$1([Replacing.config({})])\n          }\n        ].concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [Button.sketch({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-notification__dismiss',\n                'tox-button',\n                'tox-button--naked',\n                'tox-button--icon'\n              ]\n            },\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-icon'],\n                  innerHtml: get$d('close', detail.iconProvider),\n                  attributes: { 'aria-label': detail.translationProvider('Close') }\n                }\n              }],\n            action: function (comp) {\n              detail.onAction(comp);\n            }\n          })]),\n        apis: apis\n      };\n    };\n    var Notification = single$2({\n      name: 'Notification',\n      factory: factory$2,\n      configFields: [\n        option('level'),\n        strict$1('progress'),\n        strict$1('icon'),\n        strict$1('onAction'),\n        strict$1('text'),\n        strict$1('iconProvider'),\n        strict$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var backstage = extras.backstage;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south$3;\n        case 'tc-tc':\n          return north$3;\n        case 'tc-bc':\n          return north$1;\n        case 'bc-tc':\n        default:\n          return south$1;\n        }\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          return notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          head(notifications).each(function (firstItem) {\n            return firstItem.moveRel(null, 'banner');\n          });\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Option.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: backstage.shared.providers.icons,\n          translationProvider: backstage.shared.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: extras.backstage.shared.getSink,\n          fireDismissalEventInstead: {}\n        }, backstage.shared.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$2.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, {\n              anchor: 'makeshift',\n              x: x,\n              y: y\n            }, premade$1(notification));\n          },\n          moveRel: function (element, rel) {\n            if (rel !== 'banner') {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                anchor: 'node',\n                root: body(),\n                node: Option.some(Element.fromDom(element)),\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showAt(notificationWrapper, nodeAnchor, premade$1(notification));\n            } else {\n              InlineView.showAt(notificationWrapper, extras.backstage.shared.anchors.banner(), premade$1(notification));\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element().dom();\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$3(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Option.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect$4(Element.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = Element.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append(wrapper, Element.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom());\n        parent(wrapper).each(function (elm) {\n          return elm.dom().normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom(), getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect$4 = function (elm) {\n      return closest$3(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Option.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Option.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Option.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Option.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Option.none();\n        } else {\n          return Option.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect$4(Element.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom());\n        var text = getText(range);\n        return Option.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect$4(Element.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point$2 = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText$1 = function (node) {\n      return node.nodeType === domGlobals.Node.TEXT_NODE;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === domGlobals.Node.ELEMENT_NODE;\n    };\n    var toLast = function (node) {\n      if (isText$1(node)) {\n        return point$2(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point$2(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point$2(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Option.none();\n      }\n      var lookupData = global$4.all(map(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction\n          };\n        });\n      }));\n      return Option.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      state$1('type', function () {\n        return 'autocompleteitem';\n      }),\n      state$1('active', function () {\n        return false;\n      }),\n      state$1('disabled', function () {\n        return false;\n      }),\n      defaulted$1('meta', {}),\n      strictString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      strictString('type'),\n      strictString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted$1('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      strictFunction('fetch'),\n      strictFunction('onAction')\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$2(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, function (x) {\n          return x;\n        });\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var iconClassRtl = 'tox-collection__item-icon-rtl';\n    var classForPreset = function (presets) {\n      return get(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers$1 = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components$1 = [Menu.parts().items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers$1(presets)\n      };\n    };\n\n    var chunk$1 = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk(items, numColumns);\n        return map(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts().items({\n                preprocess: columns !== 'auto' ? chunk$1({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts().items({\n            preprocess: chunk$1({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts().items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk$1({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts().items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      domGlobals.console.error(formatError(error));\n      domGlobals.console.log(error);\n      return Option.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components$1,\n        items: items\n      };\n    };\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field('value', 'value', defaultedThunk(function () {\n        return generate$1('menuitem-value');\n      }), anyValue$1()),\n      defaulted$1('meta', {})\n    ];\n\n    var choiceMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var fancyTypes = [\n      'inserttable',\n      'colorswatch'\n    ];\n    var fancyMenuItemSchema = objOf([\n      strictString('type'),\n      strictStringEnum('fancytype', fancyTypes),\n      defaultedFunction('onAction', noop)\n    ]);\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      strictString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      strictString('type'),\n      strictFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      strictFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element(), '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex(descendants$1, function (c) {\n          var thisTop = c.dom().getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom().getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Option.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Option.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$1('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var TooltippingSchema = [\n      strict$1('lazySink'),\n      strict$1('tooltipDom'),\n      defaulted$1('exclusive', true),\n      defaulted$1('tooltipComponents', []),\n      defaulted$1('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted$1('anchor', function (comp) {\n        return {\n          anchor: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ]),\n            onRtl: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$4 = function () {\n      var timer = Cell(Option.none());\n      var popup = Cell(Option.none());\n      var getTooltip = function () {\n        return popup.get();\n      };\n      var setTooltip = function (comp) {\n        popup.set(Option.some(comp));\n      };\n      var clearTooltip = function () {\n        popup.set(Option.none());\n      };\n      var clearTimer = function () {\n        timer.get().each(function (t) {\n          domGlobals.clearTimeout(t);\n        });\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(Option.some(domGlobals.setTimeout(function () {\n          f();\n        }, delay)));\n      };\n      var isShowing = function () {\n        return popup.get().isSome();\n      };\n      var readState = constant('not-implemented');\n      return nu$5({\n        getTooltip: getTooltip,\n        isShowing: isShowing,\n        setTooltip: setTooltip,\n        clearTooltip: clearTooltip,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var ExclusivityChannel = generate$1('tooltip.exclusive');\n    var ShowTooltipEvent = generate$1('tooltip.show');\n    var HideTooltipEvent = generate$1('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$8 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive(tooltipConfig.mode === 'normal' ? [\n              run(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach$1(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, tooltipConfig.anchor(comp), popup);\n        }\n      };\n      return derive(flatten([\n        [\n          run(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(receive(), function (comp, message) {\n            var receivingData = message;\n            if (contains(receivingData.channels(), ExclusivityChannel)) {\n              hide(comp);\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run(highlight(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(dehighlight(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var Tooltipping = create$1({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$5 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable : enable;\n      f(component, disableConfig, disableState);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains(nativeDisabled, name(component.element()));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element(), 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$1(component.element(), 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$1(component.element(), 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$2(component.element(), 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$1(component.element(), 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$1(component.element(), 'aria-disabled', 'false');\n    };\n    var disable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element(), disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$4(component.element(), disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$7 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable : enable;\n      f(component, disableConfig, disableState);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$5,\n        set: set$7\n    });\n\n    var exhibit$3 = function (base, disableConfig) {\n      return nu$6({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$9 = function (disableConfig, disableState) {\n      return derive([\n        abort(execute(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$5)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$9\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted$1('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$1({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$7.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$5.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Option.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Option.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Option.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Option.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Option.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Option.some(toolbarArray) : Option.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, function () {\n        return true;\n      });\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedContainerElement = function (editor) {\n      var selector = fixedContainerSelector(editor);\n      return selector.length > 0 && editor.inline ? descendant$1(body(), selector) : Option.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerElement(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerElement(editor);\n      return fixedContainer.getOr(body());\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var isDraggableModal = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$2(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top', 'string');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom', 'string');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([strictBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element();\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (onDestroy !== null && onDestroy !== undefined) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = {\n      'alloy.execute': [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'item-events'\n      ]\n    };\n\n    var componentRenderPipeline = function (xs) {\n      return bind(xs, function (o) {\n        return o.toArray();\n      });\n    };\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isReadOnly();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$8.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has(replace, search) ? replace[search] : segment;\n      });\n      return global$8.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon = function (iconHtml) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [iconClass],\n          innerHtml: iconHtml\n        }\n      };\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$6.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass],\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text(global$6.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [checkmarkClass],\n          innerHtml: get$d('checkmark', icons)\n        }\n      };\n    };\n    var renderSubmenuCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$d('chevron-right', icons)\n        }\n      };\n    };\n    var renderDownwardsCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$d('chevron-down', icons)\n        }\n      };\n    };\n\n    var renderColorStructure = function (itemText, itemValue, iconSvg, providerBackstage) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArrays(baseDom.classes, ['tox-swatches__picker-btn']),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArrays(baseDom.classes, ['tox-swatch--remove']),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderNormalItemStructure = function (info, icon, renderIcons, textRender, rtlClass) {\n      var leftIcon = renderIcons ? icon.or(Option.some('')).map(renderIcon) : Option.none();\n      var checkmark = info.checkMark;\n      var domTitle = info.ariaLabel.map(function (label) {\n        return { attributes: { title: global$6.translate(label) } };\n      }).getOr({});\n      var dom = __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ].concat(rtlClass ? [iconClassRtl] : [])\n      }, domTitle);\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Option.some(renderHtml(html));\n      });\n      var menuItem = {\n        dom: dom,\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var rtlIcon = [\n      'list-num-default',\n      'list-num-lower-alpha',\n      'list-num-lower-greek',\n      'list-num-lower-roman',\n      'list-num-upper-alpha',\n      'list-num-upper-roman'\n    ];\n    var rtlTransform = [\n      'list-bull-circle',\n      'list-bull-default',\n      'list-bull-square'\n    ];\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Option.none();\n      }\n      var getIconName = function (iconName) {\n        return iconName.map(function (name) {\n          return global$6.isRtl() && contains(rtlIcon, name) ? name + '-rtl' : name;\n        });\n      };\n      var needRtlClass = global$6.isRtl() && info.iconContent.exists(function (name) {\n        return contains(rtlTransform, name);\n      });\n      var icon = getIconName(info.iconContent).map(function (iconName) {\n        return getOr(iconName, providersBackstage.icons, fallbackIcon);\n      });\n      var textRender = Option.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      if (info.presets === 'color') {\n        return renderColorStructure(info.ariaLabel, info.value, icon, providersBackstage);\n      } else {\n        return renderNormalItemStructure(info, icon, renderIcons, textRender, needRtlClass);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                anchor: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external({ element: Element.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var escapeRegExp = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n    var encodeText = function (text) {\n      return global$5.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$6.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escapeRegExp(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Option.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Option.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Option.none(),\n        checkMark: Option.none(),\n        caret: Option.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: function () {\n          return {};\n        },\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: function () {\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Option.none(),\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Option.none(),\n        checkMark: useText ? Option.some(renderCheckmark(providersBackstage.icons)) : Option.none(),\n        caret: Option.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$2 = constant(generate$4(owner$2(), parts()));\n\n    var cellOverEvent = generate$1('cell-over');\n    var cellExecuteEvent = generate$1('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run(mouseover(), Focusing.focus),\n            run(execute(), emitExecute),\n            run(click(), onClick),\n            run(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind(cells, function (cellRow) {\n        return map(cellRow, premade$1);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 1 + 'x' + (row + 1));\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$1('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [text('0x0')],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2().widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var row = e.event().row();\n                  var col = e.event().col();\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row, col)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  spec.onAction({\n                    numRows: e.event().row() + 1,\n                    numColumns: e.event().col() + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round(255 * (r + match));\n      g = round(255 * (g + match));\n      b = round(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Option.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Option.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Option.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Option.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$9.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$9.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      var canvas = domGlobals.document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      var ctx = canvas.getContext('2d');\n      var byteAsHex = function (colorByte, alphaByte) {\n        var bg = 255;\n        var alpha = alphaByte / 255;\n        var colorByteWithWhiteBg = Math.round(colorByte * alpha + bg * (1 - alpha));\n        return ('0' + colorByteWithWhiteBg.toString(16)).slice(-2).toUpperCase();\n      };\n      var asHexColor = function (color) {\n        if (/^[0-9A-Fa-f]{6}$/.test(color)) {\n          return '#' + color.toUpperCase();\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        var rgba = ctx.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0], g = rgba[1], b = rgba[2], a = rgba[3];\n        return '#' + byteAsHex(r, a) + byteAsHex(g, a) + byteAsHex(b, a);\n      };\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: asHexColor(colorMap[i]),\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, '#000000');\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var setIconFillAndStroke = function (pathId, color) {\n        splitButtonApi.setIconFill(pathId, color);\n        splitButtonApi.setIconStroke(pathId, color);\n      };\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      setIconFillAndStroke(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = Option.from(getCurrentColor(editor, format));\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch(getColors(editor), hasCustomColors(editor)),\n        onAction: function (_splitButtonApi) {\n          if (lastColor.get() !== null) {\n            applyColor(editor, format, lastColor.get(), function () {\n            });\n          }\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            setIconColor(splitButtonApi, name, lastColor.get());\n          }\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var getOnSubmit = function (callback) {\n          return function (api) {\n            var data = api.getData();\n            callback(Option.from(data.colorpicker));\n            api.close();\n          };\n        };\n        var onAction = function (api, details) {\n          if (details.name === 'hex-valid') {\n            if (details.value) {\n              api.enable('ok');\n            } else {\n              api.disable('ok');\n            }\n          }\n        };\n        var initialData = { colorpicker: value };\n        var submit = getOnSubmit(callback);\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: submit,\n          onClose: function () {\n          },\n          onCancel: function () {\n            callback(Option.none());\n          }\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(null);\n      var lastBackColor = Cell(null);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Option.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Option.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers$1(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    function renderColorSwatchItem(spec, backstage) {\n      var items = getColors$1(backstage.colorinput.getColors(), backstage.colorinput.hasCustomColors());\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n        return false;\n      }, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers$1(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2().widget(Menu.sketch(widgetSpec))]\n      };\n    }\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var valueOpt = function (obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key) ? Option.some(obj[key]) : Option.none();\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return valueOpt(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        caret: Option.none(),\n        checkMark: Option.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        caret: Option.some(caret),\n        checkMark: Option.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        checkMark: Option.some(renderCheckmark(providersBackstage.icons)),\n        caret: Option.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Option.none(),\n          icon: menuitem.text.isSome() ? Option.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Option.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Option.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Option.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Option.some(separator(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          domGlobals.console.error('Unknown item in general menu', item);\n          return Option.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map(items, function (item) {\n        if (item.type === 'separator') {\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Option.some(separator(d));\n          });\n        } else {\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Option.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !i.hasOwnProperty('text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers$1(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$2 = function (editor, sharedBackstage) {\n      var activeAutocompleter = Cell(Option.none());\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect$4(lastElement.getOr(Element.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.set(Option.none());\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Option.from(m.columns);\n        }).getOr(1);\n        return bind(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return domGlobals.console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set(Option.some({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          }));\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Option.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, {\n          anchor: 'node',\n          root: Element.fromDom(editor.getBody()),\n          node: Option.from(ac.element)\n        }, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')));\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last$2(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n    };\n    var Autocompleter = { register: register$2 };\n\n    var filter$2 = constant(true);\n    var bind$3 = function (element, event, handler) {\n      return bind$2(element, event, filter$2, handler);\n    };\n    var capture$1 = function (element, event, handler) {\n      return capture(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var closest$4 = function (scope, selector, isRoot) {\n      return closest$3(scope, selector, isRoot).isSome();\n    };\n\n    function DelayedFunction (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = domGlobals.setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          domGlobals.clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    }\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw();\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Option.none();\n      }\n      return Option.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = Cell(Option.none());\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target()\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(Option.some(data));\n        });\n        return Option.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Option.none());\n            }\n          });\n        });\n        return Option.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq$1(data.target, event.target());\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll$1([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw();\n      return keyEv.which === BACKSPACE()[0] && !contains([\n        'input',\n        'textarea'\n      ], name(event.target())) && !closest$4(event.target(), '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$3().browser.isFirefox();\n    };\n    var settingsSchema = objOfOnly([\n      strictFunction('triggerEvent'),\n      defaulted$1('stopBackspace', true)\n    ]);\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'focus', handler);\n      } else {\n        return bind$3(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'blur', handler);\n      } else {\n        return bind$3(container, 'focusout', handler);\n      }\n    };\n    var setup$1 = function (container, rawSettings) {\n      var settings = asRawOrDie('Getting GUI events settings', settingsSchema, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind$3(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = Cell(Option.none());\n      var onPaste = bind$3(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(Option.some(domGlobals.setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0)));\n      });\n      var onKeydown = bind$3(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace === true && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = Cell(Option.none());\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(Option.some(domGlobals.setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0)));\n      });\n      var unbind = function () {\n        each(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.get().each(domGlobals.clearTimeout);\n        focusoutTimeout.get().each(domGlobals.clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive$2 = function (rawEvent, rawTarget) {\n      var source = get(rawEvent, 'target').map(function (getTarget) {\n        return getTarget();\n      }).getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: constant(event),\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: constant(false),\n        event: constant(event),\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$b = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$b.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose());\n          return adt$b.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose());\n          return adt$b.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose());\n            return adt$b.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose());\n            return adt$b.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(function () {\n        return true;\n      }, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, function () {\n        return false;\n      });\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive$2(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each(listeners, function (listener) {\n        var descHandler = listener.descHandler();\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      var rawTarget = rawEvent.target();\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive$2(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: constant(id),\n        descHandler: constant(handler)\n      };\n    };\n    function EventRegistry () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each$1(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).fold(function () {\n          return Option.none();\n        }, function (id) {\n          return handlers.bind(function (h) {\n            return get(h, id);\n          }).map(function (descHandler) {\n            return eventHandler(elem, descHandler);\n          });\n        });\n      };\n      var filterByType = function (type) {\n        return get(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        var handlers = get(registry, type);\n        return closest(target, function (elem) {\n          return findHandler(handlers, elem);\n        }, isAboveRoot);\n      };\n      var unregisterId = function (id) {\n        each$1(registry, function (handlersById, _eventName) {\n          if (handlersById.hasOwnProperty(id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    }\n\n    function Registry () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element();\n        return read$1(elem).fold(function () {\n          return write('uid-', component.element());\n        }, function (uid) {\n          return uid;\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element()) + '\\nCannot use it for: ' + element(component.element()) + '\\n' + 'The conflicting element is' + (inBody(conflict.element()) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events());\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element()).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    }\n\n    var factory$3 = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$c(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single$2({\n      name: 'Container',\n      factory: factory$3,\n      configFields: [\n        defaulted$1('components', []),\n        field$1('containerBehaviours', []),\n        defaulted$1('events', {}),\n        defaulted$1('domModification', {}),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element()).fold(function () {\n          return true;\n        }, function (parent) {\n          return eq$1(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$1(root.element(), {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target(), function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$1(target);\n          }, function (_alloyId) {\n            monitorEvent(focus(), target, function (logger) {\n              triggerHandler(lookup, focus(), {\n                originator: constant(originator),\n                kill: noop,\n                prevent: noop,\n                target: constant(target)\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element(), simulatedEvent.event());\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove$1(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: constant(true)\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText(component.element())) {\n          registry.register(component);\n          each(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element(), { target: constant(component.element()) });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText(component.element())) {\n          each(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach$1(root, component);\n      };\n      var remove$1 = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove(root.element());\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each(receivers, function (receiver) {\n          var descHandler = receiver.descHandler();\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: constant(true),\n          data: constant(message)\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: constant(false),\n          channels: constant(channels),\n          data: constant(message)\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: constant(root),\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove$1,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$e = constant([\n      defaulted$1('prefix', 'form-field'),\n      field$1('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$3 = constant([\n      optional({\n        schema: [strict$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude$1(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [strict$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$1(detail.prefix);\n            ps.label().each(function (label) {\n              set$1(label.element(), 'for', id);\n              set$1(field.element(), 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$1(detail.prefix);\n              set$1(descriptor.element(), 'id', descriptorId);\n              set$1(field.element(), 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite$1({\n      name: 'FormField',\n      configFields: schema$e(),\n      partFields: parts$3(),\n      factory: factory$4,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$4 = function (base, tabConfig) {\n      return nu$6({\n        attributes: wrapAll$1([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4\n    });\n\n    var TabstopSchema = [defaulted$1('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$1({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel = function (label, providersBackstage) {\n      return FormField.parts().label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$1('form-component-change');\n    var formCloseEvent = generate$1('form-close');\n    var formCancelEvent = generate$1('form-cancel');\n    var formActionEvent = generate$1('form-action');\n    var formSubmitEvent = generate$1('form-submit');\n    var formBlockEvent = generate$1('form-block');\n    var formUnblockEvent = generate$1('form-unblock');\n    var formTabChangeEvent = generate$1('form-tabchange');\n    var formResizeEvent = generate$1('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$3(se.event().target(), '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$2(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var escapeAttribute = function (ch) {\n        if (ch === '\"') {\n          return '&quot;';\n        }\n        return ch;\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map(items, function (item) {\n          var itemText = global$6.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var readonlyClass = providersBackstage.isReadOnly() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + readonlyClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + escapeAttribute(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns > 1 && spec.columns !== 'auto' ? chunk(htmlLines, spec.columns) : [htmlLines];\n        var html = map(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set(comp.element(), html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isReadOnly()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$1(tgt);\n        })),\n        run(click(), onClick),\n        run(tap(), onClick),\n        run(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant$1(comp.element(), '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run(focusout(), runOnItem(function (comp) {\n          descendant$1(comp.element(), '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n        })),\n        runOnExecute(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map(descendants(comp.element(), '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts().field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isReadOnly,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$1(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$4(childElm, 'tox-collection__item--state-disabled');\n                remove$1(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: {\n          'alloy.execute': [\n            'disabling',\n            'alloy.base.behaviour',\n            'collection-events'\n          ]\n        }\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$f = constant([\n      option('data'),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('tag', 'input'),\n      defaulted$1('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted$1('styles', {}),\n      defaulted$1('eventOrder', {}),\n      field$1('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted$1('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element();\n            var value = get$5(input);\n            input.dom().setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$5(input.element());\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element());\n              if (current !== data) {\n                set$3(input.element(), data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom$2 = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$5 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom$2(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single$2({\n      name: 'Input',\n      configFields: schema$f(),\n      factory: factory$5\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu$a = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$a(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Option.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$a(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$a,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$3 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$3(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$3(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$3(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$3(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$b = function (baseFn) {\n      return make$3(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make$3(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$b,\n      pure: pure$1\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name$1 = name(elem);\n      return contains(ariaElements, name$1);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      remove$4(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element())) {\n          set$1(component.element(), 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element())) {\n          set$1(component.element(), 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run$1 = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      return has$2(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run$1,\n        isInvalid: isInvalid\n    });\n\n    var events$a = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive([run(validatorInfo.onEvent, function (component) {\n            run$1(component, invalidConfig, invalidState).get(identity);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run$1(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$a\n    });\n\n    var InvalidateSchema = [\n      strict$1('invalidClass'),\n      defaulted$1('getRoot', Option.none),\n      optionObjOf('notify', [\n        defaulted$1('aria', 'alert'),\n        defaulted$1('getContainer', Option.none),\n        defaulted$1('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        strict$1('validate'),\n        defaulted$1('onEvent', 'input'),\n        defaulted$1('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$1({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [strictOf('others', setOf$1(Result.value, anyValue$1()))];\n\n    var init$5 = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get(coupled, name).getOrThunk(function () {\n            var builder = get(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Coupling = create$1({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant('sink');\n    var partType = constant(optional({\n      name: suffix(),\n      overrides: constant({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var anchor = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Option.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$2(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, menu);\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, {\n                anchor: 'submenu',\n                item: item\n              }, submenu);\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, primaryMenu);\n              each(submenuTriggers, function (st) {\n                Positioning.position(sink, {\n                  anchor: 'submenu',\n                  item: st.triggeringItem\n                }, st.triggeredMenu);\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Option.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open$1 = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close$1 = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close$1 : open$1;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$7(hotspot.element());\n      if (useMinWidth) {\n        set$2(menu.element(), 'min-width', buttonWidth + 'px');\n      } else {\n        set$4(menu.element(), buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element());\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element());\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel({ isExtraPart: never })), receivingChannel$1({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted$1('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$g = constant([\n      strict$1('dom'),\n      strict$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      field$1('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      strict$1('toggleClass'),\n      defaulted$1('eventOrder', {}),\n      option('lazySink'),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$4 = constant([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$6 = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get(detail.dom, 'attributes').bind(function (attrs) {\n          return get(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Option.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox(detail, hotspot, {\n                  onOpen: function () {\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Option.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Option.some(true);\n              } else {\n                return Option.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$7(Option.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite$1({\n      name: 'Dropdown',\n      configFields: schema$g(),\n      partFields: parts$4(),\n      factory: factory$6,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$5 = function () {\n      return nu$6({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$b = function () {\n      return derive([abort(selectstart(), constant(true))]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$b,\n        exhibit: exhibit$5\n    });\n\n    var Unselecting = create$1({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isReadOnly),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Option.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n              return false;\n            }, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$1('color-input-change');\n    var colorSwatchChangeEvent = generate$1('color-swatch-change');\n    var colorPickerCancelEvent = generate$1('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts().field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(function () {\n          });\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isReadOnly }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element());\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = Element.fromTag('span');\n                  set$2(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$1,\n              southeast$1,\n              south$1\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$1,\n              southwest$1,\n              south$1\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$2(colorButton.element(), 'background-color', se.event().color());\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event().value());\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var calcHex = function (value) {\n      var hue = (100 - value) / 100 * 360;\n      var hsv = hsvColour(hue, 100, 100);\n      var rgb = fromHsv(hsv);\n      return fromRgba(rgb);\n    };\n\n    var fieldsUpdate = generate$1('rgb-hex-update');\n    var sliderUpdate = generate$1('slider-update');\n    var paletteUpdate = generate$1('palette-update');\n\n    var labelPart = optional({\n      schema: [strict$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [state$1('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive([\n            run(touchstart(), setValueFrom),\n            run(touchmove(), setValueFrom),\n            run(mousedown(), setValueFrom),\n            run(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant(_sliderChangeEvent);\n    var isTouchEvent = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event().raw();\n      if (isTouchEvent(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Option.some(touchEvent.touches[0]).map(function (t) {\n          return Position(t.clientX, t.clientY);\n        }) : Option.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Option.some(mouseEvent).map(function (me) {\n          return Position(me.clientX, me.clientY);\n        }) : Option.none();\n      }\n    };\n\n    var t = 'top', r$1 = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range$2 = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range$2(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range$2(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r$1);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: constant(x) };\n    };\n    var yValue = function (y) {\n      return { y: constant(y) };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: constant(x),\n        y: constant(y)\n      };\n    };\n    var fireSliderChange = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds$1 = function (component) {\n      return component.element().dom().getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x) {\n      return { x: constant(x) };\n    };\n    var findValueOfOffset = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue(xValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$1(spectrum, sliderValue(min));\n    };\n    var setToMax = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$1(spectrum, sliderValue(max));\n    };\n    var moveBy = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x(), minX(detail), maxX(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue(xValue));\n      return Option.some(xValue);\n    };\n    var handleMovement = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left();\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Option.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Option.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x(), edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$7(thumb.element()) / 2;\n      set$2(thumb.element(), 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft = handleMovement(-1);\n    var onRight = handleMovement(1);\n    var onUp = Option.none;\n    var onDown = Option.none;\n    var edgeActions = {\n      'top-left': Option.none(),\n      'top': Option.none(),\n      'top-right': Option.none(),\n      'right': Option.some(setToREdge),\n      'bottom-right': Option.none(),\n      'bottom': Option.none(),\n      'bottom-left': Option.none(),\n      'left': Option.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: constant(y) };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y(), minY(detail), maxY(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$1(yValue));\n      return Option.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top();\n      });\n    };\n    var findOffsetOfValue$2 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Option.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Option.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$2(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y(), edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$6(thumb.element()) / 2;\n      set$2(thumb.element(), 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Option.none;\n    var onRight$1 = Option.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Option.none(),\n      'top': Option.some(setToTEdge),\n      'top-right': Option.none(),\n      'right': Option.none(),\n      'bottom-right': Option.none(),\n      'bottom': Option.some(setToBEdge),\n      'bottom-left': Option.none(),\n      'left': Option.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange$3 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x, y) {\n      return {\n        x: constant(x),\n        y: constant(y)\n      };\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value.left());\n      var yValue = findValueOfOffset$1(spectrum, detail, value.top());\n      var val = sliderValue$2(xValue, yValue);\n      fireSliderChange$3(spectrum, val);\n      return val;\n    };\n    var moveBy$2 = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x() : f(currentValue(detail).x(), minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y() : f(currentValue(detail).y(), minY(detail), maxY(detail), step(detail));\n      fireSliderChange$3(spectrum, sliderValue$2(xValue, yValue));\n      return Option.some(xValue);\n    };\n    var handleMovement$2 = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, isVerticalMovement, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x(), edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y(), edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$7(thumb.element()) / 2;\n      var thumbYRadius = get$6(thumb.element()) / 2;\n      set$2(thumb.element(), 'left', xPos - thumbXRadius + 'px');\n      set$2(thumb.element(), 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1, false);\n    var onRight$2 = handleMovement$2(1, false);\n    var onUp$2 = handleMovement$2(-1, true);\n    var onDown$2 = handleMovement$2(1, true);\n    var edgeActions$2 = {\n      'top-left': Option.some(setToTLEdgeXY),\n      'top': Option.some(setToTEdgeXY),\n      'top-right': Option.some(setToTREdgeXY),\n      'right': Option.some(setToREdgeXY),\n      'bottom-right': Option.some(setToBREdgeXY),\n      'bottom': Option.some(setToBEdgeXY),\n      'bottom-left': Option.some(setToBLEdgeXY),\n      'left': Option.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        getValueFromEvent: getValueFromEvent$2,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var SliderSchema = [\n      defaulted$1('stepSize', 1),\n      defaulted$1('onChange', noop),\n      defaulted$1('onChoose', noop),\n      defaulted$1('onInit', noop),\n      defaulted$1('onDragStart', noop),\n      defaulted$1('onDragEnd', noop),\n      defaulted$1('snapToGrid', false),\n      defaulted$1('rounded', true),\n      option('snapStart'),\n      strictOf('model', choose$1('mode', {\n        x: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell({\n              x: constant(spec.mode.minX),\n              y: constant(spec.mode.minY)\n            });\n          }),\n          strict$1('getInitialValue'),\n          output('manager', TwoDModel)\n        ]\n      })),\n      field$1('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      state$1('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var changeValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n        detail.onChange(slider, thumb, newValue);\n        return Option.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(constant(true));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive([\n          run(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event().value());\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run(touchstart(), onDragStart),\n          run(touchend(), onDragEnd),\n          run(mousedown(), onDragStart),\n          run(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          changeValue: changeValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite$1({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch,\n      apis: {\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts().spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts().thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant({ y: constant(0) })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$3 = 'form';\n    var schema$h = [field$1('formBehaviours', [Representing])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne(owner$3, getPartName(name), config);\n        };\n        return {\n          field: field,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite(owner$3, schema$h, fieldParts, make$4, spec);\n    };\n    var toResult$1 = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$2(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult$1(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element())));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each$1(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$1('valid-input');\n    var invalidInput = generate$1('invalid-input');\n    var validatingInput = generate$1('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts().label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts().field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts()['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$2(preview.element(), 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Option.some(255)),\n          green: Cell(Option.some(255)),\n          blue: Cell(Option.some(255)),\n          hex: Cell(Option.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Option.some(red));\n          set('green', Option.some(green));\n          set('blue', Option.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event();\n          if (data.type() !== 'hex') {\n            set(data.type(), Option.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Option.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Option.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type() === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event();\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value());\n          } else {\n            onValidRgb(form, data.type(), data.value());\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run(validInput, onValidInput),\n                run(invalidInput, onInvalidInput),\n                run(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single$2({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts().spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts().thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setSliderColour = function (slider, rgba) {\n        var canvas = slider.components()[0].element().dom();\n        setColour(canvas, toString(rgba));\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant({\n          x: constant(0),\n          y: constant(0)\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element().dom(), toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Option.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single$2({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setRgba: function (_apis, slider, rgba) {\n            setSliderColour(slider, rgba);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var state = { paletteRgba: Cell(red) };\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            var rgba = fromHex(hex);\n            state.paletteRgba.set(rgba);\n            sbPalette.setRgba(palette, rgba);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var runUpdates = function (anyInSystem, hex, updates) {\n          each(updates, function (update) {\n            update(anyInSystem, hex);\n          });\n        };\n        var paletteUpdates = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event().value();\n            var oldRgb = state.paletteRgba.get();\n            var hsvColour$1 = fromRgb(oldRgb);\n            var newHsvColour = hsvColour(hsvColour$1.hue, value.x(), 100 - value.y());\n            var rgb = fromHsv(newHsvColour);\n            var nuHex = fromRgba(rgb);\n            runUpdates(form, nuHex, updates);\n          };\n        };\n        var sliderUpdates = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event().value();\n            var hex = calcHex(value.y());\n            runUpdates(form, hex, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            sliderFactory(translate, getClass),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run(paletteUpdate, paletteUpdates()),\n              run(sliderUpdate, sliderUpdates())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single$2({\n        name: 'ColourPicker',\n        configFields: [\n          strict$1('dom'),\n          defaulted$1('onValidHex', noop),\n          defaulted$1('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Option.some });\n    };\n    var memento = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child(comp.element(), index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOption();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  domGlobals.console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Option.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return Object.prototype.hasOwnProperty.call(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = Cell(Option.none());\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = Cell(Option.none());\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('editor-foo-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element().dom()) : global$a.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element().dom(), spec.settings);\n                })).then(function (ea) {\n                  initialValue.get().each(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.set(Option.none());\n                  editorApi.set(Option.some(ea));\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(Option.some(value));\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var processors = objOf([\n      defaulted$1('preprocess', identity),\n      defaulted$1('postprocess', identity)\n    ]);\n    var memento$1 = function (mem, rawProcessors) {\n      var ps = asRawOrDie('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element());\n      }, function (c, v) {\n        return setter(c.element(), v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$3);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$1, set);\n    };\n    var memory$1 = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento$1,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory$1\n    };\n\n    var extensionsAccepted = '.jpg,.jpeg,.png,.gif';\n    var filterByExtension = function (files) {\n      var re = new RegExp('(' + extensionsAccepted.split(/\\s*,\\s*/).join('|') + ')$', 'i');\n      return filter(from$1(files), function (file) {\n        return re.test(file.name);\n      });\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event().raw();\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var files = simulatedEvent.event().raw().target.files;\n        handleFiles(component, files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragover', stopper),\n              run('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element().dom().click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isReadOnly),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts().field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$1('alloy-fake-before-tabstop');\n    var afterObject = generate$1('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus$1 = function (container, targetComp) {\n      var target = targetComp.element();\n      if (has$2(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has$2(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest$4(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), constant(false));\n    };\n\n    var platformNeedsSandboxing = !(detect$3().browser.isIE() || detect$3().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$1(frameComponent.element(), 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element().dom().contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$1(frameComponent.element(), 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Option.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts().field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    function create$5(width, height) {\n      return resize(domGlobals.document.createElement('canvas'), width, height);\n    }\n    function clone$1(canvas) {\n      var tCanvas = create$5(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    }\n    function get2dContext(canvas) {\n      return canvas.getContext('2d');\n    }\n    function resize(canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n\n    function getWidth(image) {\n      return image.naturalWidth || image.width;\n    }\n    function getHeight(image) {\n      return image.naturalHeight || image.height;\n    }\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof window.setImmediate === 'function' && window.setImmediate || function (fn) {\n        domGlobals.setTimeout(fn, 1);\n      };\n      function bind(fn, thisArg) {\n        return function () {\n          return fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise$1 = window.Promise ? window.Promise : promise();\n\n    function blobToImage(blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = domGlobals.URL.createObjectURL(blob);\n        var image = new domGlobals.Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        function loaded() {\n          removeListeners();\n          resolve(image);\n        }\n        function error() {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        }\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          loaded();\n        }\n      });\n    }\n    function dataUriToBlobSync(uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Option.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = domGlobals.atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Option.some(new domGlobals.Blob(byteArrays, { type: mimetype }));\n    }\n    function dataUriToBlob(uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    }\n    function canvasToBlob(canvas, type, quality) {\n      type = type || 'image/png';\n      if (domGlobals.HTMLCanvasElement.prototype.toBlob) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    }\n    function canvasToDataURL(canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    }\n    function blobToCanvas(blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$5(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    }\n    function blobToDataUri(blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    function revokeImageUrl(image) {\n      domGlobals.URL.revokeObjectURL(image.src);\n    }\n\n    function create$6(getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      function toBlob() {\n        return Promise$1.resolve(blob);\n      }\n      var toDataURL = constant(uri);\n      function toBase64() {\n        return uri.split(',')[1];\n      }\n      function toAdjustedBlob(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      }\n      function toAdjustedDataURL(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      }\n      function toAdjustedBase64(type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      }\n      function toCanvas() {\n        return getCanvas.then(clone$1);\n      }\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    }\n    function fromBlob(blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$6(blobToCanvas(blob), blob, uri);\n      });\n    }\n    function fromCanvas(canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$6(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    }\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    function clamp$1(value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    }\n    function identity$1() {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    }\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    function multiply(matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    }\n    function adjustContrast(matrix, value) {\n      var x;\n      value = clamp$1(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustBrightness(matrix, value) {\n      value = clamp$1(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustColors(matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp$1(adjustR, 0, 2);\n      adjustG = clamp$1(adjustG, 0, 2);\n      adjustB = clamp$1(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n\n    function colorFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyColorFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      }\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function convoluteFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyConvoluteFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pIn, pOut, aMatrix) {\n        function clamp(value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        }\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      }\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function functionColorFilter(colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        function applyLookup(pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        }\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    }\n    function complexAdjustableColorFilter(matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity$1(), adjust));\n      };\n    }\n    function basicColorFilter(matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    }\n    function basicConvolutionFilter(kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    }\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity$1(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    function scale(image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    }\n    function _scale(image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$5(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    }\n\n    function rotate(ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    }\n    function applyRotate(image, type, angle) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function flip(ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    }\n    function applyFlip(image, type, axis) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    }\n    function crop(ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    }\n    function applyCrop(image, type, x, y, w, h) {\n      var canvas = create$5(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    }\n    function resize$1(ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    }\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var renderIcon$1 = function (iconHtml, behaviours) {\n      return __assign({\n        dom: {\n          tag: 'span',\n          innerHtml: iconHtml,\n          classes: [\n            'tox-icon',\n            'tox-tbtn__icon-wrap'\n          ]\n        }\n      }, behaviours);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$d(iconName, iconsProvider), {});\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$d(iconName, iconsProvider), { behaviours: derive$1([Replacing.config({})]) });\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var internalToolbarButtonExecute = generate$1('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = {\n      'alloy.execute': [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'toolbar-button-events'\n      ]\n    };\n\n    var updateMenuText = generate$1('update-menu-text');\n    var updateMenuIcon = generate$1('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event().raw() });\n        Dropdown.close(dropdown);\n        return Option.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var memDropdown = record(Dropdown.sketch(__assign(__assign({}, role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Option.some({\n            dom: {\n              tag: 'div',\n              classes: [prefix + '__select-chevron'],\n              innerHtml: get$d('chevron-down', sharedBackstage.providers.icons)\n            }\n          })\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArrays(spec.dropdownBehaviours, [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isReadOnly();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event().text()))]);\n              });\n            }),\n            run(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event().icon(), sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ])),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function () {\n          return Future.nu(spec.fetch);\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has(item, 'getSubmenuItems');\n    };\n    var separator$1 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator(acc[acc.length - 1]) ? acc.concat([separator$1]) : acc;\n          } else if (has(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator(item)) {\n        return item;\n      } else {\n        var itemValue = get(item, 'value').getOrThunk(function () {\n          return generate$1('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build$2 = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$1('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Option.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$2(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Option.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element();\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$1(elm, 'aria-pressed', true);\n          } else {\n            remove$4(elm, 'tox-tbtn--enabled');\n            remove$1(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has$2(component.element(), 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (callback) {\n          spec.fetch(function (items) {\n            callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch$1 = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$1(orig.element());\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isReadOnly();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Option.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Option.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArrays(!spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], icon.isSome() ? ['tox-button--icon'] : [], spec.borderless ? ['tox-button--naked'] : [], extraClasses);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Option.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          domGlobals.console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch$1(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Option.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        domGlobals.console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Option.none(), FormField.parts().field(__assign({ factory: Button }, renderButtonSpec(spec, Option.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$i = constant([\n      defaulted$1('field1Name', 'field1'),\n      defaulted$1('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers(['lockClass']),\n      defaulted$1('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$5 = constant([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [strict$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Option.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite$1({\n      name: 'FormCoupledInputs',\n      configFields: schema$i(),\n      partFields: parts$5(),\n      factory: factory$7,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return Object.prototype.hasOwnProperty.call(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Option.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Option.some(size.value);\n        } else {\n          return Option.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Option.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOption();\n      var oValue = parseSize(otherFieldText).toOption();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$1('ratio-event');\n      var pLock = FormCoupledInputs.parts().lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__lock'\n              ],\n              innerHtml: get$d('lock', providersBackstage.icons)\n            }\n          },\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__unlock'\n              ],\n              innerHtml: get$d('unlock', providersBackstage.icons)\n            }\n          }\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isReadOnly();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts().field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isReadOnly();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts().field1(formGroup([\n        FormField.parts().label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts().field2(formGroup([\n        FormField.parts().label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isReadOnly();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event().isField1();\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant(generate$1('undo'));\n    var redo = constant(generate$1('redo'));\n    var zoom = constant(generate$1('zoom'));\n    var back = constant(generate$1('back'));\n    var apply = constant(generate$1('apply'));\n    var swap = constant(generate$1('swap'));\n    var transform = constant(generate$1('transform'));\n    var tempTransform = constant(generate$1('temp-transform'));\n    var transformApply = constant(generate$1('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant('save-state');\n    var disable$1 = constant('disable');\n    var enable$1 = constant('enable');\n    var external$2 = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable$1,\n      enable: enable$1\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Option.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Option.some(icon),\n          tooltip: Option.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external$2.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external$2.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop$1(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Option.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$2(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip$1, 'h');\n      var verticalFlip = makeValueTransform(flip$1, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate$1, -90);\n      var clockwiseRotate = makeValueTransform(rotate$1, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts().label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts().spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts().thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant({ x: constant(value) })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x() / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run(external$2.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run(external$2.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness$1, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast$1, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma$1, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize$1(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x() / 100;\n                var g = Representing.getValue(green).x() / 100;\n                var b = Representing.getValue(blue).x() / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Option.some(sharpen$1);\n      var invertTransform = Option.some(invert$1);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Option.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Option.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Option.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Option.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Option.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Option.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Option.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    function getDocumentSize(doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || domGlobals.document;\n      var downButton;\n      var startX, startY;\n      settings = settings || {};\n      var handleElement = doc.getElementById(settings.handle || id);\n      var start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        var handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (domGlobals.window.getComputedStyle) {\n          cursor = domGlobals.window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$b('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$b(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      var drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e);\n        global$b(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$b(handleElement).off();\n      };\n      global$b(handleElement).on('mousedown touchstart', start);\n    }\n\n    var count = 0;\n    var create$7 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      function moveRect(handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$c.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      }\n      function render() {\n        function createDragHelper(handle) {\n          var startRect;\n          return new DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        }\n        global$b('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$e.each(blockers, function (blocker) {\n          global$b('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$e.each(handles, function (handle) {\n          global$b('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\" title=\"' + handle.label + '\">');\n        });\n        dragHelpers = global$e.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$b(containerElm).on('focusin focusout', function (e) {\n          global$b(e.target).attr('aria-grabbed', e.type === 'focus' ? 'true' : 'false');\n        });\n        global$b(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$e.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          function moveAndBlock(evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          }\n          switch (e.keyCode) {\n          case global$f.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$f.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$f.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$f.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$f.ENTER:\n          case global$f.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      }\n      function toggleVisibility(state) {\n        var selectors = global$e.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$e.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$b(selectors, containerElm).show();\n        } else {\n          global$b(selectors, containerElm).hide();\n        }\n      }\n      function repaint(rect) {\n        function updateElementRect(name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$b('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        }\n        global$e.each(handles, function (handle) {\n          global$b('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      }\n      function setRect(rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      }\n      function setViewPortRect(rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      }\n      function setInnerRect(rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      }\n      function setClampRect(rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      }\n      function destroy() {\n        global$e.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      }\n      render();\n      var instance = global$e.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$d);\n      return instance;\n    };\n    var CropRect = { create: create$7 };\n\n    var loadImage = function (image) {\n      return new global$4(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = Cell(Option.none());\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$7(panel.element());\n          var panelH = get$6(panel.element());\n          var width = img.dom().naturalWidth * zoom;\n          var height = img.dom().naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll$1(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll$1(bg.element(), css);\n          });\n          cropRect.get().each(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$7(panel.element());\n          var panelH = get$6(panel.element());\n          var width = img.dom().naturalWidth;\n          var height = img.dom().naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = Element.fromTag('img');\n        set$1(img, 'src', url);\n        return loadImage(img.dom()).then(function () {\n          return memContainer.getOpt(anyInSystem).map(function (panel) {\n            var aImg = external({ element: img });\n            Replacing.replaceAt(panel, 1, Option.some(aImg));\n            var lastViewRect = viewRectState.get();\n            var viewRect = {\n              x: 0,\n              y: 0,\n              w: img.dom().naturalWidth,\n              h: img.dom().naturalHeight\n            };\n            viewRectState.set(viewRect);\n            var rect = global$c.inflate(viewRect, -20, -20);\n            rectState.set(rect);\n            if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n              zoomFit(panel, img);\n            }\n            repaintImg(panel, img);\n            return img;\n          });\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element();\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element().dom();\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, function () {\n                    });\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(Option.some(cRect));\n                  });\n                })])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Option.some(icon),\n        disabled: disabled,\n        tooltip: Option.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      function add(state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      }\n      function undo() {\n        if (canUndo()) {\n          return data[--index];\n        }\n      }\n      function redo() {\n        if (canRedo()) {\n          return data[++index];\n        }\n      }\n      function canUndo() {\n        return index > 0;\n      }\n      function canRedo() {\n        return index !== -1 && index < data.length - 1;\n      }\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = Cell(Option.none());\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().fold(function () {\n          return blobState.get();\n        }, function (temp) {\n          return temp;\n        });\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(Option.some(newTempState));\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: domGlobals.URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        domGlobals.URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$e.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.get().each(destroyState);\n        tempState.set(Option.none());\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(Option.some(newState));\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(function () {\n        }, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event().direction();\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        return blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url).then(function (oImg) {\n            updateButtonUndoStates(anyInSystem);\n            swap();\n            unblock(anyInSystem);\n            return oImg;\n          });\n        }).catch(function (err) {\n          domGlobals.console.log(err);\n          unblock(anyInSystem);\n          return err;\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event().swap();\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event().swap();\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event().transform(), noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event().transform());\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event().transform(), simulatedEvent.event().swap());\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event().transform();\n        var swap = simulatedEvent.event().swap();\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run(internal.undo(), undo),\n            run(internal.redo(), redo),\n            run(internal.zoom(), zoom),\n            run(internal.back(), back),\n            run(internal.apply(), apply),\n            run(internal.transform(), transform),\n            run(internal.tempTransform(), tempTransform),\n            run(internal.transformApply(), transformApply),\n            run(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel$2 = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Option.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$8 = function (detail, _spec) {\n      var options = map(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element());\n              },\n              setValue: function (select, newValue) {\n                var found = find(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$3(select.element(), newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single$2({\n      name: 'HtmlSelect',\n      configFields: [\n        strict$1('options'),\n        field$1('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted$1('selectClasses', []),\n        defaulted$1('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$8\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts().field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isReadOnly();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Option.none() : Option.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield__icon-js'],\n          innerHtml: get$d('chevron-down', providersBackstage.icons)\n        }\n      });\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isReadOnly();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isReadOnly();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Option.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element());\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts().field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isReadOnly();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Option.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Option.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Option.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$c = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive([\n        run(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$c\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$5({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$6 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$6\n    });\n\n    var setup$2 = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last$2(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      strictOf('stream', choose$1('mode', {\n        throttle: [\n          strict$1('delay'),\n          defaulted$1('stopEvent', true),\n          output('streams', {\n            setup: setup$2,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted$1('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$1({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element();\n      var value = get$5(el);\n      var node = el.dom();\n      if (get$2(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Option.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Option.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Option.none();\n      }\n    };\n\n    var itemExecute = constant('alloy.typeahead.itemexecute');\n\n    var make$5 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element(), 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open$1(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind(menus, function (menu) {\n              return filter(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element());\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$3(comp.element(), detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element()).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Option.none();\n                      });\n                    });\n                  });\n                };\n                open$1(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Option.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Option.some(true);\n            }\n            return Option.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Option.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Option.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event().item());\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event().item(), Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element()).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom$2(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$j = constant([\n      option('lazySink'),\n      strict$1('fetch'),\n      defaulted$1('minChars', 5),\n      defaulted$1('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Option.none()),\n      defaulted$1('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted$1('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted$1('selectsOver', true),\n        defaulted$1('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted$1('inputClasses', []),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('matchWidth', true),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('dismissOnBlur', true),\n      markers(['openClass']),\n      option('initialData'),\n      field$1('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      state$1('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$f()).concat(sandboxFields()));\n    var parts$6 = constant([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOption().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite$1({\n      name: 'Typeahead',\n      configFields: schema$j(),\n      partFields: parts$6(),\n      factory: make$5\n    });\n\n    var wrap$2 = function (delegate) {\n      var toCached = function () {\n        return wrap$2(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap$2(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap$2(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = domGlobals.setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              domGlobals.clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$c = function (worker) {\n      return wrap$2(Future.nu(worker));\n    };\n    var value$2 = function (value) {\n      return wrap$2(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap$2(Future.pure(Result.error(error)));\n    };\n    var fromResult$1 = function (result) {\n      return wrap$2(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap$2(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$c(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$c,\n      wrap: wrap$2,\n      pure: value$2,\n      value: value$2,\n      error: error$1,\n      fromResult: fromResult$1,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$2 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: function () {\n        }\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: function () {\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Option.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Option.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$2, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$1('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts().field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element());\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$1(invalidComp.element(), 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isReadOnly();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox-icon',\n              'tox-control-wrap__status-icon-' + name\n            ],\n            innerHtml: get$d(icon, providersBackstage.icons),\n            attributes: __assign({\n              'title': providersBackstage.translate(label),\n              'aria-live': 'polite'\n            }, errId.fold(function () {\n              return {};\n            }, function (id) {\n              return { id: id };\n            }))\n          }\n        };\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Option.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$1('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isReadOnly();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Option.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isReadOnly();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$d(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                }\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element().dom();\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element().dom();\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element().dom().click();\n        return Option.some(true);\n      };\n      var pField = FormField.parts().field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isReadOnly();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts().label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return {\n          dom: {\n            tag: 'span',\n            classes: [\n              'tox-icon',\n              'tox-checkbox-icon__' + className\n            ],\n            innerHtml: get$d(iconName, providerBackstage.icons)\n          }\n        };\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isReadOnly();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$6 = function (render) {\n      return function (parts, spec, backstage) {\n        return get(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$6(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$6(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$6(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$6(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$6(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$6(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$6(function (spec, backstage) {\n        return renderLabel$2(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$6(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$6(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$6(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$6(renderColorPicker),\n      dropzone: make$6(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$6(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      selectbox: make$6(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$6(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$6(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$6(renderCustomEditor),\n      htmlpanel: make$6(renderHtmlPanel),\n      imagetools: make$6(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$6(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$6(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get(factories, spec.type).fold(function () {\n        domGlobals.console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubble = nu$8(-12, 12, bubbleAlignments);\n      var overrides = { maxHeightFunction: expandable() };\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getBody(owner(contentAreaElement())),\n          node: Option.from(contentAreaElement()),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [northwest$3];\n            },\n            onLtr: function () {\n              return [northeast$3];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getBody(owner(contentAreaElement())),\n          node: Option.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north$3];\n            },\n            onLtr: function () {\n              return [north$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$1];\n            },\n            onLtr: function () {\n              return [south$1];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          anchor: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Option.some(Selection.range(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor = function (bodyElement) {\n      return function (element) {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return Element.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return Element.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors$1 = function (editor) {\n      return function () {\n        return hasCustomColors(editor);\n      };\n    };\n    var getColors$2 = function (editor) {\n      return function () {\n        return getColors(editor);\n      };\n    };\n    var getColorCols$2 = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors$1(editor),\n        getColors: getColors$2(editor),\n        getColorCols: getColorCols$2(editor)\n      };\n    };\n\n    var isDraggableModal$1 = function (editor) {\n      return function () {\n        return isDraggableModal(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal$1(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = 'custom-' + fmt.title.toLowerCase();\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatName,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatName,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$3 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = generate$1(item.title);\n        var customSpec = {\n          type: 'formatter',\n          format: formatName,\n          isSelected: isSelectedFor(formatName),\n          getStylePreview: getPreviewFor(formatName)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems_1 = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), {\n              getStyleItems: function () {\n                return newItems_1;\n              }\n            });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$7 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Option.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$3(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$3(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var trim$1 = global$e.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$8 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(Element.fromDom(root), selector), function (element) {\n        return element.dom();\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$1('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$8('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$8('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim$1(target.title).length > 0;\n    };\n    var find$5 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$5 };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$1(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$9.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          domGlobals.console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        domGlobals.console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$9.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n      var itemsWithoutUrl = filter(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$2(global$e.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Option.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Option.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Option.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(function () {\n        return false;\n      }, function (_picker) {\n        return optTypes.fold(function () {\n          return true;\n        }, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Option.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Option.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Option.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Option.none();\n      }\n      return Option.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getAnchorTop(editor),\n        anchorBottom: getAnchorBottom(editor)\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Option.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$8 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$6.translate,\n            isReadOnly: function () {\n              return editor.mode.isReadOnly();\n            }\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$7(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var expandable$1 = constant(function (element, available) {\n      setMax$1(element, Math.floor(available));\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var schema$k = constant([\n      strict$1('items'),\n      markers(['itemSelector']),\n      field$1('tgroupBehaviours', [Keying])\n    ]);\n    var parts$7 = constant([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite$1({\n      name: 'ToolbarGroup',\n      configFields: schema$k(),\n      partFields: parts$7(),\n      factory: factory$9\n    });\n\n    var schema$l = constant([\n      strict$1('dom'),\n      defaulted$1('shell', true),\n      field$1('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$8 = constant([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$a = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          domGlobals.console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Option.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite$1({\n      name: 'Toolbar',\n      configFields: schema$l(),\n      partFields: parts$8(),\n      factory: factory$a,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var generate$6 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant(b), function (v) {\n          return {\n            len: v.finish(),\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output$1 = function (within, extra, withinWidth) {\n      return {\n        within: constant(within),\n        extra: constant(extra),\n        withinWidth: constant(withinWidth)\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$6(units, function (unit, current) {\n        var width = len(unit);\n        return Option.some({\n          element: constant(unit),\n          start: constant(current),\n          finish: constant(current + width),\n          width: constant(width)\n        });\n      });\n      var within = filter(parray, function (unit) {\n        return unit.finish() <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width();\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: constant(within),\n        extra: constant(extra),\n        withinWidth: constant(withinWidth)\n      };\n    };\n    var toUnit = function (parray) {\n      return map(parray, function (unit) {\n        return unit.element();\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output$1(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output$1(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output$1(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra().length === 0 ? Option.some(divide) : Option.none();\n    };\n    var partition$3 = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within();\n      var extra = divide.extra();\n      var withinWidth = divide.withinWidth();\n      if (extra.length === 1 && extra[0].width() <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups = function (toolbar, storedGroups) {\n      var bGroups = map(storedGroups, function (g) {\n        return premade$1(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element()).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOption();\n        });\n      });\n    };\n    var refresh = function (toolbar, detail, setOverflow) {\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$2(primary.element(), 'visibility', 'hidden');\n      var groups = detail.builtGroups.get().concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups(primary, groups);\n      var availableWidth = get$7(primary.element());\n      var overflows = partition$3(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$7(comp.element());\n      }, overflowGroup);\n      if (overflows.extra().length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups(primary, overflows.within());\n        setOverflow(overflows.extra());\n      }\n      remove$6(primary.element(), 'visibility');\n      reflow(primary.element());\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$m = constant([\n      field$1('splitToolbarBehaviours', [Coupling]),\n      state$1('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$n = constant([\n      markers(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      strict$1('lazySink'),\n      state$1('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$m()));\n    var parts$9 = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$l(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$l(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var schema$o = constant([\n      markers(['toggledClass']),\n      strict$1('lazySink'),\n      strictFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n      schema$1()\n    ]);\n    var parts$a = constant([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$l(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Option.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle$2 = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position$2 = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, {\n        anchor: 'hotspot',\n        hotspot: button,\n        layouts: layouts,\n        overrides: { maxWidthFunction: expandable$1() }\n      }, toolbar, bounds);\n    };\n    var setGroups$1 = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position$2(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox$1 = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups$1(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element());\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Option.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position$2(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$b = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle$2(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox$1(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups$1(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position$2(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle$2(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite$1({\n      name: 'FloatingToolbarButton',\n      factory: factory$b,\n      configFields: schema$o(),\n      partFields: parts$a(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        }\n      }\n    });\n\n    var buildGroups = function (comps) {\n      return map(comps, function (g) {\n        return premade$1(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$c = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$1,\n              southeast$1\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$1,\n              southwest$1\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$1,\n              northeast$1\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$1,\n              northwest$1\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(function (floatingToolbarButton) {\n              return FloatingToolbarButton.getToolbar(floatingToolbarButton);\n            });\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite$1({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$n(),\n      partFields: parts$9(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element();\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$5(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$4(component.element(), slideConfig.openClass);\n      add$2(component.element(), slideConfig.closedClass);\n      set$2(component.element(), getDimensionProperty(slideConfig), '0px');\n      reflow(component.element());\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$4(component.element(), slideConfig.closedClass);\n      add$2(component.element(), slideConfig.openClass);\n      remove$6(component.element(), getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$2(component.element(), getDimensionProperty(slideConfig), getDimension(slideConfig, component.element()));\n      reflow(component.element());\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element());\n      });\n      slideState.setCollapsed();\n      set$2(component.element(), getDimensionProperty(slideConfig), size);\n      reflow(component.element());\n      var root = getAnimationRoot(component, slideConfig);\n      remove$4(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element());\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Option.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has$2(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element());\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element());\n      var startPartialGrow = function () {\n        set$2(component.element(), getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element());\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$4(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$2(component.element(), getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$2 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element(), getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element());\n        set$2(component.element(), getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState, Option.none());\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) === true || isShrinking(component, slideConfig) === true;\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$2,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit$6 = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$6({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$6({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$d = function (slideConfig, slideState) {\n      return derive([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event().raw();\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element(), slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6,\n        events: events$d\n    });\n\n    var SlidingSchema = [\n      strict$1('closedClass'),\n      strict$1('openClass'),\n      strict$1('shrinkingClass'),\n      strict$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted$1('expanded', false),\n      strictOf('dimension', choose$1('property', {\n        width: [\n          output('property', 'width'),\n          output('getDimension', function (elem) {\n            return get$7(elem) + 'px';\n          })\n        ],\n        height: [\n          output('property', 'height'),\n          output('getDimension', function (elem) {\n            return get$6(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$9 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$5({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$9\n    });\n\n    var Sliding = create$1({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var schema$p = constant([\n      markers([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$m()));\n    var parts$b = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$l(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$l(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Option.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overf) {\n        refresh$3(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh$3 = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh(toolbar, detail, function (groups) {\n          var builtGroups = map(groups, function (g) {\n            return premade$1(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$d = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run(toolbarToggleEvent, function (toolbar) {\n              getPart(toolbar, detail, 'overflow').each(function (overf) {\n                refresh$3(toolbar, detail);\n                Sliding.toggleGrow(overf);\n              });\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh$3(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$3(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite$1({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$p(),\n      partFields: parts$b(),\n      factory: factory$d,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        }\n      }\n    });\n\n    var toolbarHeightChange = constant(generate$1('toolbar-height-change'));\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts().items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isReadOnly),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Option.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Option.some('more-drawer'),\n            disabled: false,\n            tooltip: Option.some('More...'),\n            primary: false,\n            borderless: false\n          }, Option.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts().primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element();\n          var headerBounds = absolute$1(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$1(docElem);\n          var height = Math.max(docElem.dom().scrollHeight, docBounds.height);\n          return bounds$1(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts().primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts().overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts().groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      strictString('type'),\n      strictFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArrays([strictString('type')], baseMenuButtonFields));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      strictString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted$1('columns', 1),\n      strictFunction('onAction'),\n      strictFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      strictString('type'),\n      strictFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      strictString('type'),\n      strictOf('items', oneOf([\n        arrOfObj$1([\n          strictString('name'),\n          strictArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', function () {\n        return false;\n      }),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted$1('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted$1('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted$1('type', 'contextform'),\n      defaultedFunction('initValue', function () {\n        return '';\n      }),\n      optionString('label'),\n      strictArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var contextToolbarSchema = objOf([\n      defaulted$1('type', 'contexttoolbar'),\n      strictString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var getState$2 = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState$2\n    });\n\n    var events$e = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive([\n        run(receive(), function (component, message) {\n          var receivingData = message;\n          var channel = reflectingConfig.channel;\n          if (contains(receivingData.channels(), channel)) {\n            update(component, receivingData.data());\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$e\n    });\n\n    var init$a = function () {\n      var cell = Cell(Option.none());\n      var set = function (optS) {\n        return cell.set(optS);\n      };\n      var clear = function () {\n        return cell.set(Option.none());\n      };\n      var get = function () {\n        return cell.get();\n      };\n      var readState = function () {\n        return cell.get().fold(function () {\n          return 'none';\n        }, function (x) {\n          return x;\n        });\n      };\n      return {\n        readState: readState,\n        get: get,\n        set: set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var ReflectingSchema = [\n      strict$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var Reflecting = create$1({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$q = constant([\n      strict$1('toggleClass'),\n      strict$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      strict$1('dom'),\n      onHandler('onOpen'),\n      field$1('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$c = constant([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$e = function (detail, components, spec, externals) {\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Option.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Option.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$1('aria');\n            set$1(descriptor.element(), 'id', descriptorId);\n            set$1(component.element(), 'aria-describedby', descriptorId);\n          });\n        })])), events$7(Option.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), {\n          'alloy.execute': [\n            'disabling',\n            'toggling',\n            'alloy.base.behaviour'\n          ]\n        }),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite$1({\n      name: 'SplitDropdown',\n      configFields: schema$q(),\n      partFields: parts$c(),\n      factory: factory$e,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$1('focus-button');\n    var rtlIcon$1 = [\n      'checklist',\n      'ordered-list'\n    ];\n    var rtlTransform$1 = [\n      'indent',\n      'outdent',\n      'table-insert-column-after',\n      'table-insert-column-before',\n      'unordered-list'\n    ];\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      var getIconName = function (iconName) {\n        return global$6.isRtl() && contains(rtlIcon$1, iconName) ? iconName + '-rtl' : iconName;\n      };\n      var needsRtlClass = global$6.isRtl() && icon.exists(function (name) {\n        return contains(rtlTransform$1, name);\n      });\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []).concat(needsRtlClass ? ['tox-tbtn__icon-rtl'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isReadOnly),\n          receivingConfig(),\n          config('common-button-display-events', [run(mousedown(), function (button, se) {\n              se.event().prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Option.none(), Option.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Option.none(), Option.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isReadOnly();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Option.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(function () {\n            return false;\n          }), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$1('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant$1(comp.element(), 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant$1(comp.element(), 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$1(comp.element(), 'aria-pressed', state);\n            descendant$1(comp.element(), 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant$1(comp.element(), 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isReadOnly),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts().button(renderCommonStructure(spec.icon, spec.text, Option.none(), Option.some(displayChannel), Option.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts().arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$d('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isReadOnly),\n              receivingConfig()\n            ])\n          }),\n          SplitDropdown.parts()['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute$1 = function (memInput, original) {\n      return run(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event().buttonApi());\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var generateOne$1 = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate$7 = function (memInput, buttons, providersBackstage) {\n      var mementos = map(buttons, function (button) {\n        return record(generateOne$1(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Option.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Option.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Option.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Option.none();\n            }\n          })])\n      }));\n      var commands = generate$7(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Option.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Option.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$1('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Option.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds) {\n      var x = Math.max(viewportBounds.x, contentAreaBox.x);\n      var contentBoxWidth = contentAreaBox.right - x;\n      var maxViewportWidth = viewportBounds.width - (x - viewportBounds.x);\n      var width = Math.min(contentBoxWidth, maxViewportWidth);\n      return {\n        x: x,\n        width: width\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop) {\n      var container = Element.fromDom(editor.getContainer());\n      var header = descendant$1(container, '.tox-editor-header').getOr(container);\n      var headerBox = box(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = box(container);\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y, viewportBounds.y),\n        bottom: Math.min(headerBox.y, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage) {\n      var viewportBounds = getBounds(domGlobals.window);\n      var contentAreaBox = box(Element.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds$1(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop), y = _b.y, bottom = _b.bottom;\n        return bounds$1(x, y, width, bottom - y);\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom());\n      });\n      var _a = partition(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Option.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Option.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Option.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Option.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Option.none();\n      } else {\n        return ancestor(startNode, function (ancestorElem) {\n          var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n          var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n          return toolbars.length > 0 ? Option.some({\n            elem: ancestorElem,\n            toolbars: toolbars\n          }) : Option.none();\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = Element.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq$1(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains$2(rootElem, startNode);\n      };\n      var startNode = Element.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Option.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarApi) {\n        var contextForm = getOrDie(createContextForm(toolbarApi));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarApi.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarApi) {\n        createContextToolbar(toolbarApi).each(function (contextToolbar) {\n          if (toolbarApi.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$1('forward-slide');\n    var backSlideEvent = generate$1('backward-slide');\n    var changeSlideEvent = generate$1('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element(), 'visibility');\n          });\n          remove$4(comp.element(), resizingClass);\n          remove$6(comp.element(), 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, _se) {\n              remove$4(comp.element(), resizingClass);\n              remove$6(comp.element(), 'width');\n            }),\n            run(changeSlideEvent, function (comp, se) {\n              remove$6(comp.element(), 'width');\n              var currentWidth = get$7(comp.element());\n              InlineView.setContent(comp, se.event().contents());\n              add$2(comp.element(), resizingClass);\n              var newWidth = get$7(comp.element());\n              set$2(comp.element(), 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event().focus().bind(function (f) {\n                  focus$1(f);\n                  return search(comp.element());\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active();\n                });\n              });\n              global$2.setTimeout(function () {\n                set$2(comp.element(), 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active()\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event().forwardContents(),\n                focus: Option.none()\n              });\n            }),\n            run(backSlideEvent, function (comp, _se) {\n              last(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade$1(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Option.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Option.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Option.none();\n          } else {\n            return Option.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Option.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return {\n          getComponent: function () {\n            return comp;\n          }\n        };\n      };\n      var onSetup = function (api) {\n        spec.setInitialValue.each(function (f) {\n          return f(api.getComponent());\n        });\n        return spec.nodeChangeHandler.map(function (f) {\n          var handler = f(api.getComponent());\n          editor.on('NodeChange', handler);\n          return function () {\n            editor.off('NodeChange', handler);\n          };\n        }).getOr(noop);\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Option.none() : Option.some(''),\n        icon: spec.icon,\n        tooltip: Option.from(spec.tooltip),\n        role: Option.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec = function (editor) {\n      var getMatchingValue = function () {\n        return find(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return function () {\n          return Option.none();\n        };\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(function () {\n          return 'left';\n        }, function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuIcon(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuIcon(comp);\n      });\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        icon: Option.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$1 = function (editor) {\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          if (isSystemFontStack(font)) {\n            return Option.from({\n              title: 'System Font',\n              format: font\n            });\n          } else {\n            return Option.none();\n          }\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Option.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(function () {\n          return font;\n        }, function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var toLegacy = function (fontSize) {\n      return get(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Option.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant(constant(Option.none()));\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(function () {\n          return size;\n        }, function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles, parents) {\n      var styles = getStyles();\n      return findMap(parents, function (parent) {\n        return find(styles, function (fmt) {\n          return editor.formatter.matchNode(parent, fmt.format);\n        });\n      }).orThunk(function () {\n        if (editor.formatter.match('p')) {\n          return Option.some({\n            title: 'Paragraph',\n            format: 'p'\n          });\n        }\n        return Option.none();\n      });\n    };\n    var getCurrentSelectionParents = function (editor) {\n      var currentNode = editor.selection.getStart(true) || editor.getBody();\n      return editor.dom.getParents(currentNode, function () {\n        return true;\n      }, editor.getBody());\n    };\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var unbindCell = Cell(Option.none());\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var unbind = editor.formatter.formatChanged(name, api.setActive).unbind;\n          unbindCell.set(Option.some(unbind));\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return function () {\n          return unbindCell.get().each(function (unbind) {\n            return unbind();\n          });\n        };\n      };\n    };\n    var onActionToggleFormat = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$3 = function (editor) {\n      var getMatchingValue = function (nodeChangeEvent) {\n        return findNearest(editor, function () {\n          return dataset.data;\n        }, nodeChangeEvent);\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (parents, comp) {\n        var detectedFormat = getMatchingValue(parents);\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function (e) {\n          return updateSelectMenuText(e.parents, comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        var parents = getCurrentSelectionParents(editor);\n        updateSelectMenuText(parents, comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec$4 = function (editor, dataset) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Option.none();\n        };\n      };\n      var updateSelectMenuText = function (parents, comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, function () {\n          return flattenedItems;\n        }, parents);\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function (e) {\n          return updateSelectMenuText(e.parents, comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        var parents = getCurrentSelectionParents(editor);\n        updateSelectMenuText(parents, comp);\n      });\n      return {\n        tooltip: 'Formats',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec$4(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Option.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Option.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get(types, spec.type).fold(function () {\n        domGlobals.console.error('skipping button defined by', spec);\n        return Option.none();\n      }, function (render) {\n        return Option.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map(defaultToolbar, function (group) {\n        var items = filter(group.items, function (subItem) {\n          return has(buttons, subItem) || has(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has(t, 'name') && has(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        domGlobals.console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Option.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          domGlobals.console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Option.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map(toolbarGroups, function (group) {\n        var items = bind(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Option.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var bubbleSize = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable(),\n      maxWidthFunction: expandable$1()\n    };\n    var desktopAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          north$1,\n          south$1,\n          northeast$1,\n          southeast$1,\n          northwest$1,\n          southwest$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          north$1,\n          south$1,\n          northwest$1,\n          southwest$1,\n          northeast$1,\n          southeast$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var mobileAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var getAnchorLayout = function (position, isTouch) {\n      if (position === 'line') {\n        return {\n          bubble: nu$8(bubbleSize, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$1];\n            },\n            onRtl: function () {\n              return [west$1];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$8(0, bubbleSize, bubbleAlignments$1),\n          layouts: isTouch ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts,\n          overrides: anchorOverrides\n        };\n      }\n    };\n    var register$4 = function (editor, registryContextToolbars, sink, extras) {\n      var isTouch = detect$3().deviceType.isTouch;\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Option.some(true);\n        }\n      }));\n      var getBounds = function () {\n        return getContextToolbarBounds(editor, extras.backstage.shared);\n      };\n      var isRangeOverlapping = function (aTop, aBottom, bTop, bBottom) {\n        return Math.max(aTop, bTop) <= Math.min(aBottom, bBottom);\n      };\n      var getLastElementVerticalBound = function () {\n        var nodeBounds = lastElement.get().map(function (ele) {\n          return ele.getBoundingClientRect();\n        }).getOrThunk(function () {\n          return editor.selection.getRng().getBoundingClientRect();\n        });\n        var diffTop = editor.inline ? get$8().top() : absolute$1(Element.fromDom(editor.getBody())).y;\n        return {\n          y: nodeBounds.top + diffTop,\n          bottom: nodeBounds.bottom + diffTop\n        };\n      };\n      var shouldContextToolbarHide = function () {\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return true;\n        }\n        var lastElementBounds = getLastElementVerticalBound();\n        var contextToolbarBounds = getBounds();\n        return !isRangeOverlapping(lastElementBounds.y, lastElementBounds.bottom, contextToolbarBounds.y, contextToolbarBounds.bottom);\n      };\n      var forceHide = function () {\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        lastAnchor.get().each(function (anchor) {\n          var contextBarEle = contextbar.element();\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$2(contextBarEle, 'display', 'none');\n          } else {\n            Positioning.positionWithinBounds(sink, anchor, contextbar, Option.some(getBounds()));\n          }\n        });\n      };\n      var lastAnchor = Cell(Option.none());\n      var lastElement = Cell(Option.none());\n      var timer = Cell(null);\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Option.some(['form:']));\n      };\n      var buildContextMenuGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextMenuGroups(ctx, extras.backstage.shared.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$1('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Option.none,\n          cyclicKeying: true,\n          providers: extras.backstage.shared.providers\n        });\n      };\n      editor.on(showContextToolbarEvent, function (e) {\n        var scopes = getScopes();\n        get(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n          launchContext([ctx], e.target === editor ? Option.none() : Option.some(e));\n          InlineView.getContent(contextbar).each(Keying.focusIn);\n        });\n      });\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? extras.backstage.shared.anchors.node(element) : extras.backstage.shared.anchors.cursor();\n        return deepMerge(anchorage, getAnchorLayout(position, isTouch()));\n      };\n      var launchContext = function (toolbarApi, elem) {\n        clearTimer();\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var sElem = elem.map(Element.fromDom);\n        var anchor = getAnchor(toolbarApi[0].position, sElem);\n        lastAnchor.set(Option.some(anchor));\n        lastElement.set(elem);\n        var contextBarEle = contextbar.element();\n        remove$6(contextBarEle, 'display');\n        InlineView.showWithinBounds(contextbar, anchor, wrapInPopDialog(toolbarSpec), function () {\n          return Option.some(getBounds());\n        });\n        if (shouldContextToolbarHide()) {\n          set$2(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = function () {\n        if (!editor.hasFocus()) {\n          return;\n        }\n        var scopes = getScopes();\n        lookup$1(scopes, editor).fold(function () {\n          lastAnchor.set(Option.none());\n          InlineView.hide(contextbar);\n        }, function (info) {\n          launchContext(info.toolbars, Option.some(info.elem.dom()));\n        });\n      };\n      var clearTimer = function () {\n        var current = timer.get();\n        if (current !== null) {\n          global$2.clearTimeout(current);\n          timer.set(null);\n        }\n      };\n      var resetTimer = function (t) {\n        clearTimer();\n        timer.set(t);\n      };\n      editor.on('init', function () {\n        editor.on(hideContextToolbarEvent, forceHide);\n        editor.on('ScrollContent ScrollWindow longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent ObjectResized ResizeEditor', function () {\n          resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n        });\n        editor.on('focusout', function (_e) {\n          global$2.setEditorTimeout(editor, function () {\n            if (search(sink.element()).isNone() && search(contextbar.element()).isNone()) {\n              lastAnchor.set(Option.none());\n              InlineView.hide(contextbar);\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            lastAnchor.set(Option.none());\n            InlineView.hide(contextbar);\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element()).fold(function () {\n            resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n          }, function (_) {\n          });\n        });\n      });\n    };\n\n    var setup$3 = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target() });\n      };\n      var onTouchstart = bind$3(Element.fromDom(domGlobals.document), 'touchstart', fireDismissPopups);\n      var onTouchmove = bind$3(Element.fromDom(domGlobals.document), 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind$3(Element.fromDom(domGlobals.document), 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind$3(Element.fromDom(domGlobals.document), 'mousedown', fireDismissPopups);\n      var onMouseup = bind$3(Element.fromDom(domGlobals.document), 'mouseup', function (evt) {\n        if (evt.raw().button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target() });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: Element.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: Element.fromDom(raw.target) });\n        }\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent$1(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent$1(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$d = AlloyParts;\n    var partType$1 = PartType;\n\n    var schema$r = constant([\n      defaulted$1('shell', false),\n      strict$1('makeItem'),\n      defaulted$1('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$e = constant([itemsPart]);\n    var name$2 = constant('CustomList');\n\n    var factory$f = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          domGlobals.console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Option.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite$1({\n      name: name$2(),\n      configFields: schema$r(),\n      partFields: parts$e(),\n      factory: factory$f,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = getRaw(element, 'position').is('fixed');\n      var offsetParent$1 = isFixed ? Option.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = Element.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute).getOrThunk(function () {\n        return Position(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element();\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element();\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPosition().map(function (pos) {\n        return bounds$1(pos.bounds.x, pos.bounds.y, get$7(elem), get$6(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPosition(Option.some({\n        style: getAllRaw(elem),\n        position: get$4(elem, 'position') || 'static',\n        bounds: box\n      }));\n    };\n    var revertToOriginal = function (elem, box$1, state) {\n      return state.getInitialPosition().bind(function (position) {\n        state.setInitialPosition(Option.none());\n        switch (position.position) {\n        case 'static':\n          return Option.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box).getOrThunk(function () {\n            return box(body());\n          });\n          return Option.some(morphAdt.absolute(NuPositionCss('absolute', get(position.style, 'left').map(function (_left) {\n            return box$1.x - offsetBox_1.x;\n          }), get(position.style, 'top').map(function (_top) {\n            return box$1.y - offsetBox_1.y;\n          }), get(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box$1.right;\n          }), get(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box$1.bottom;\n          }))));\n        default:\n          return Option.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box$1 = box(elem);\n      if (!isVisibleForModes(state.getModes(), box$1, viewport)) {\n        storePrior(elem, box$1, state);\n        var winBox = win();\n        var left = box$1.x - winBox.x;\n        var top = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box$1.y <= viewport.y;\n        return Option.some(morphAdt.fixed(NuPositionCss('fixed', Option.some(left), isTop ? Option.some(top) : Option.none(), Option.none(), !isTop ? Option.some(bottom) : Option.none())));\n      } else {\n        return Option.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element();\n      var isDocked = getRaw(elem, 'position').is('fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element();\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config) {\n      each([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element(), prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, position) {\n      applyPositionCss(component.element(), position);\n      var method = position.position() === 'fixed' ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$3(component.element(), [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        state.setDocked(!isDocked);\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element();\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$5(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$f = function (dockInfo, dockState) {\n      return derive([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has$2(component.element(), contextInfo.transitionClass)) {\n              remove$5(component.element(), [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        strictString('fadeInClass'),\n        strictString('fadeOutClass'),\n        strictString('transitionClass'),\n        strictFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$b = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = Cell(Option.none());\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$5({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPosition: initialBounds.get,\n        setInitialPosition: initialBounds.set,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Docking = create$1({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner(containerHeader);\n      var viewHeight = doc.dom().defaultView.innerHeight;\n      var scrollPos = get$8(doc);\n      var markerElement = Element.fromDom(e.elm);\n      var markerPos = absolute$1(markerElement);\n      var markerHeight = get$6(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute(containerHeader);\n      var editorHeaderHeight = get$6(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top();\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top()) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top() + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left(), markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left(), y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$1(elm) + (parseInt(get$4(elm, 'margin-top'), 10) || 0) + (parseInt(get$4(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element();\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$7(parentElem);\n          set$2(elm, 'width', parentWidth + 'px');\n          set$2(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$4(sinkElem, visibility.fadeOutClass);\n        add$3(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$4(sinkElem, visibility.fadeInClass);\n        add$3(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = Element.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$4(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$4(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq$1(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq$1(activeElm, Element.fromDom(ownerDoc.dom().body)) || contains$2(headerElem, activeElm);\n      }).each(function () {\n        return focus$1(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOption().bind(function (sink) {\n          return search(sink.element());\n        });\n      });\n    };\n    var setup$4 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element();\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked$1 = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours$2 = function (editor, sharedBackstage) {\n      var focusedElm = Cell(Option.none());\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element());\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArrays([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$1(comp.element());\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box$1 = box(Element.fromDom(container));\n              var boxHeight = box$1.height - headerHeight;\n              var topBound = box$1.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Option.some(bounds$1(box$1.x, topBound, box$1.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element(), elem);\n                focusedElm.set(Option.none());\n              });\n            },\n            onHide: function (comp) {\n              focusedElm.set(findFocusedElem(comp.element(), lazySink));\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$4,\n        isDocked: isDocked$1,\n        getBehaviours: getBehaviours$2\n    });\n\n    var setup$5 = noop;\n    var isDocked$2 = never;\n    var getBehaviours$3 = constant([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$5,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$3\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours = spec.sticky ? getBehaviours$2 : getBehaviours$3;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours(editor, spec.sharedBackstage))\n      };\n    };\n\n    var factory$g = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Option.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run(mouseover(), function (comp, se) {\n              descendant$1(comp.element(), '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$3(se.event().target(), '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq$1(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run(focusShifted(), function (comp, se) {\n              se.event().prevFocus().bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOption();\n              }).each(function (prev) {\n                se.event().newFocus().bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOption();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Option.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single$2({\n      factory: factory$g,\n      name: 'silver.Menubar',\n      configFields: [\n        strict$1('dom'),\n        strict$1('uid'),\n        strict$1('onEscape'),\n        strict$1('backstage'),\n        defaulted$1('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var owner$4 = 'container';\n    var schema$s = [field$1('slotBehaviours', [])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$2 = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne(owner$4, getPartName$1(name), config);\n        };\n        return {\n          slot: slot,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite(owner$4, schema$s, fieldParts, make$7, spec);\n    };\n    var make$7 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$2(comp.element(), 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element();\n          remove$6(element, 'display');\n          remove$1(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element();\n          set$2(element, 'display', 'none');\n          set$1(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$c(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$2({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch$2 });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$6 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return Option.from(editor.queryCommandValue('ToggleSidebar')).is(name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element().dom();\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run(slotVisibility(), function (sidepanel, se) {\n              var data = se.event();\n              var optSidePanelSpec = find(specs, function (config) {\n                return config.name === data.name();\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible() ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var fixSize = generate$1('FixSizeEvent');\n    var autoSize = generate$1('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element(), 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$7(slider.element()) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run(fixSize, function (comp, se) {\n              set$2(comp.element(), 'width', se.event().width());\n            }),\n            run(autoSize, function (comp, _se) {\n              remove$6(comp.element(), 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom().attributes !== undefined ? elem.dom().attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom().classList, 0);\n    };\n    var fromHtml$2 = function (html) {\n      var elem = Element.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$1(elem) };\n      return __assign({\n        tag: name(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var renderSpinner = function (providerBackstage) {\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-label': providerBackstage.translate('Loading...') },\n          classes: ['tox-throbber__busy-spinner']\n        },\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onTab: function () {\n              return Option.some(true);\n            },\n            onShiftTab: function () {\n              return Option.some(true);\n            }\n          }),\n          Focusing.config({})\n        ])\n      };\n    };\n    var toggleThrobber = function (comp, state, providerBackstage) {\n      var element = comp.element();\n      if (state === true) {\n        Replacing.set(comp, [renderSpinner(providerBackstage)]);\n        remove$6(element, 'display');\n        remove$1(element, 'aria-hidden');\n      } else {\n        Replacing.set(comp, []);\n        set$2(element, 'display', 'none');\n        set$1(element, 'aria-hidden', 'true');\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([Replacing.config({})]),\n        components: []\n      };\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = Cell(Option.none());\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          toggleThrobber(lazyThrobber(), state, sharedBackstage.providers);\n          throbberState.set(state);\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.get().each(global$2.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$2.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(Option.some(timerId));\n        } else {\n          toggle(e.state);\n          timer.set(Option.none());\n        }\n      });\n    };\n\n    var factory$h = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$d.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$d.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$d.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$d.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$d.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        getThrobber: function (comp) {\n          return parts$d.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$d.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$d.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType$1.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [strict$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$1('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  return Option.none();\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape')\n      ]\n    });\n    var partToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Option.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape'),\n        strict$1('getSink')\n      ]\n    });\n    var partHeader = partType$1.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [strict$1('dom')]\n    });\n    var partSocket = partType$1.optional({\n      name: 'socket',\n      schema: [strict$1('dom')]\n    });\n    var partSidebar = partType$1.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [strict$1('dom')]\n    });\n    var partThrobber = partType$1.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [strict$1('dom')]\n    });\n    var OuterContainer = composite$1({\n      name: 'OuterContainer',\n      factory: factory$h,\n      configFields: [\n        strict$1('dom'),\n        strict$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map(ts, function (g) {\n            return map(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make$8 = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter(menubar, function (menuName) {\n        return userDefinedMenus ? registry.menus.hasOwnProperty(menuName) && registry.menus[menuName].hasOwnProperty('items') || defaultMenus.hasOwnProperty(menuName) : defaultMenus.hasOwnProperty(menuName);\n      });\n      var menus = map(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make$8({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError$1 = function (editor, err) {\n      return function () {\n        return fireSkinLoadError(editor, { message: err });\n      };\n    };\n\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      var skinUiCss;\n      if (skinUrl) {\n        skinUiCss = skinUrl + '/skin.min.css';\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && skinUiCss) {\n        editor.ui.styleSheetLoader.load(skinUiCss, fireSkinLoaded$1(editor), fireSkinLoadError$1(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded$1(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Option.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Option.none()));\n      }\n    };\n\n    var DOM = global$5.DOM;\n    var detection = detect$3();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents = function (editor) {\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(Position(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(Position(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function (e) {\n        var outer = lastWindowDimensions.get();\n        if (outer.left() !== contentWindow.innerWidth || outer.top() !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(Position(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor, e);\n        }\n      };\n      var resizeDocument = function (e) {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left() !== docEle.offsetWidth || inner.top() !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(Position(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor, e);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      DOM.bind(contentWindow, 'resize', resizeWindow);\n      DOM.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture$1(Element.fromDom(editor.getBody()), 'load', resizeDocument);\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        DOM.unbind(contentWindow, 'resize', resizeWindow);\n        DOM.unbind(contentWindow, 'scroll', scroll);\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      iframe(editor);\n      var eTargetNode = Element.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(uiComponents.outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(uiComponents.outerContainer, rawUiConfig.sidebar);\n        setupEvents(editor);\n      });\n      var socket = OuterContainer.getSocket(uiComponents.outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12 === true) {\n        setAll$1(socket.element(), {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        bind$3(socket.element(), 'scroll', limit.throttle);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (ui, value) {\n        OuterContainer.toggleSidebar(uiComponents.outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(uiComponents.outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      return {\n        iframeContainer: socket.element().dom(),\n        editorContainer: uiComponents.outerContainer.element().dom()\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    var revocable = function (doRevoke) {\n      var subject = Cell(Option.none());\n      var revoke = function () {\n        subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Option.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        set: set\n      };\n    };\n    var unbindable = function () {\n      return revocable(function (s) {\n        s.unbind();\n      });\n    };\n    var value$3 = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Option.some(parseInt('' + val, 10));\n      }\n      return Option.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight$1 = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight$1(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth$1 = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth$1(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$5.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth$1(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(function () {\n          return 0;\n        }, function (tbar) {\n          return tbar.components().length > 1 ? get$6(tbar.components()[1].element()) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$6(container.element()) - offset;\n          var targetBounds = box(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom().scrollHeight, get$6(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$1(container.element(), Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$4(body(), 'margin-left')).getOr(0);\n          return get$7(body()) - absolute(targetElm).left() + bodyMargin;\n        });\n        set$2(floatContainer.get().element(), 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$6(floatContainer.get().element()) + offset, 0) : targetBounds.bottom;\n        setAll$1(outerContainer.element(), {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$2(outerContainer.element(), 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element(), 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$2(outerContainer.element(), 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$2(uiMothership.element(), 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents$1 = function (editor, targetElm, ui) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      editor.on('activate', ui.show);\n      editor.on('deactivate', ui.hide);\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$2.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture$1(Element.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = Element.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents$1(editor, targetElm, ui);\n        editor.nodeChanged();\n      };\n      editor.on('focus', render);\n      editor.on('blur hide', ui.hide);\n      editor.on('init', function () {\n        if (editor.hasFocus()) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      return { editorContainer: outerContainer.element().dom() };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var register$5 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      global$e.each(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          onAction: function () {\n            return editor.execCommand(item.cmd);\n          },\n          icon: item.icon,\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      var alignNoneToolbarButton = {\n        name: 'alignnone',\n        text: 'No alignment',\n        cmd: 'JustifyNone',\n        icon: 'align-none'\n      };\n      editor.ui.registry.addButton(alignNoneToolbarButton.name, {\n        tooltip: alignNoneToolbarButton.text,\n        onAction: function () {\n          return editor.execCommand(alignNoneToolbarButton.cmd);\n        },\n        icon: alignNoneToolbarButton.icon\n      });\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$e.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: toggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: toggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$e.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$e.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          },\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems = function (editor) {\n      global$e.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: toggleFormat(editor, 'code')\n      });\n    };\n    var register$6 = function (editor) {\n      registerButtons(editor);\n      registerMenuItems(editor);\n    };\n\n    var toggleUndoRedoState = function (api, editor, type) {\n      var checkState = function () {\n        return editor.undoManager ? editor.undoManager[type]() : false;\n      };\n      var onUndoStateChange = function () {\n        api.setDisabled(editor.mode.isReadOnly() || !checkState());\n      };\n      api.setDisabled(!checkState());\n      editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      return function () {\n        return editor.off('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      };\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var register$7 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons$1(editor);\n    };\n\n    var toggleVisualAidState = function (api, editor) {\n      api.setActive(editor.hasVisual);\n      var onVisualAid = function (e) {\n        api.setActive(e.hasVisual);\n      };\n      editor.on('VisualAid', onVisualAid);\n      return function () {\n        return editor.off('VisualAid', onVisualAid);\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: function (api) {\n          return toggleVisualAidState(api, editor);\n        },\n        onAction: function () {\n          editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: function () {\n          return editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var register$8 = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var toggleOutdentState = function (api, editor) {\n      api.setDisabled(!editor.queryCommandState('outdent'));\n      var onNodeChange = function () {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      };\n      editor.on('NodeChange', onNodeChange);\n      return function () {\n        return editor.off('NodeChange', onNodeChange);\n      };\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: function (api) {\n          return toggleOutdentState(api, editor);\n        },\n        onAction: function () {\n          return editor.execCommand('outdent');\n        }\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: function () {\n          return editor.execCommand('indent');\n        }\n      });\n    };\n    var register$9 = function (editor) {\n      registerButtons$2(editor);\n    };\n\n    var register$a = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var setup$8 = function (editor, backstage) {\n      register$5(editor);\n      register$6(editor);\n      register$a(editor, backstage);\n      register$7(editor);\n      register$1(editor);\n      register$8(editor);\n      register$9(editor);\n    };\n\n    var nu$d = function (x, y) {\n      return {\n        anchor: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose$1 = function (pos, dx, dy) {\n      return nu$d(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent$1 = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.pageX, touch.pageY);\n      } else {\n        return nu$d(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.clientX, touch.clientY);\n      } else {\n        return nu$d(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$5.DOM.getPos(element);\n      return transpose$1(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        anchor: 'selection',\n        root: Element.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor$1 = function (editor) {\n      return {\n        anchor: 'node',\n        node: Option.some(Element.fromDom(editor.selection.getNode())),\n        root: Element.fromDom(editor.getBody())\n      };\n    };\n\n    var getAnchorSpec = function (editor, e, isTriggeredByKeyboardEvent) {\n      return isTriggeredByKeyboardEvent ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n    };\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, isTriggeredByKeyboardEvent) {\n      var items = buildMenu();\n      var anchorSpec = getAnchorSpec(editor, e, isTriggeredByKeyboardEvent);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, anchorSpec, {\n          menu: { markers: markers$1('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect$1(editor.getWin(), Selection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left() <= touch_1.clientX && rngRect.right() >= touch_1.clientX && rngRect.top() <= touch_1.clientY && rngRect.bottom() >= touch_1.clientY;\n        });\n      }\n    };\n    var getAnchorSpec$1 = function (editor, isTriggeredByKeyboardEvent, e) {\n      var anchorSpec = isTriggeredByKeyboardEvent ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n      return __assign({\n        bubble: nu$8(0, bubbleSize$1, bubbleAlignments$2),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable$1(),\n          maxHeightFunction: expandable()\n        }\n      }, anchorSpec);\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$2.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var show = function (editor, e, items, backstage, contextmenu, isTriggeredByKeyboardEvent, highlightImmediately) {\n      var anchorSpec = getAnchorSpec$1(editor, isTriggeredByKeyboardEvent, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, anchorSpec, {\n          menu: {\n            markers: markers$1('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Option.some(getContextToolbarBounds(editor, backstage.shared));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, isTriggeredByKeyboardEvent) {\n      var detection = detect$3();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, isTriggeredByKeyboardEvent, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && !isTriggeredByKeyboardEvent) {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        if (isAndroid && !isTriggeredByKeyboardEvent) {\n          editor.selection.setCursorLocation(e.target, 0);\n        }\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Option.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter(patchPipeConfig(defaultItems), function (item) {\n          return has(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n\n    var isSeparator$1 = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator$3 = { type: 'separator' };\n    var makeContextItem = function (item) {\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator$3;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            icon: item.icon,\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          return {\n            type: 'menuitem',\n            text: item.text,\n            icon: item.icon,\n            onAction: noarg(item.onAction)\n          };\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last(xs).filter(function (item) {\n        return !isSeparator$1(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator$3];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator$3]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        if (has(contextMenus, name)) {\n          var items = contextMenus[name].update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([name]);\n        }\n      }, []);\n      if (sections.length > 0 && isSeparator$1(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var setup$9 = function (editor, lazySink, backstage) {\n      var detection = detect$3();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var isTriggeredByKeyboardEvent = isTriggeredByKeyboard(editor, e);\n        var buildMenu = function () {\n          var selectedElement = isTriggeredByKeyboardEvent ? editor.selection.getStart(true) : e.target;\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow$1 : initAndShow;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, isTriggeredByKeyboardEvent);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt$c = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left(), -change.top());\n      };\n    };\n    var add$4 = function (change) {\n      return function (point) {\n        return point.translate(change.left(), change.top());\n      };\n    };\n    var transform$1 = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, Position(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform$1([\n        add$4(origin),\n        subtract(scroll)\n      ]), transform$1([subtract(scroll)]), transform$1([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform$1([add$4(origin)]), transform$1([]), transform$1([add$4(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform$1([]), transform$1([subtract(origin)]), transform$1([\n        add$4(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left() - a2.left()) <= xRange && Math.abs(a1.top() - a2.top()) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left() - a2.left());\n      var top = Math.abs(a1.top() - a2.top());\n      return Position(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Option.some('absolute'),\n          left: Option.some(x + 'px'),\n          top: Option.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Option.some('absolute'),\n          left: Option.some(x - origin.left() + 'px'),\n          top: Option.some(y - origin.top() + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Option.some('fixed'),\n          left: Option.some(x + 'px'),\n          top: Option.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Option.none(),\n        bottom: Option.none()\n      }, stylesOpt);\n    };\n    var translate$2 = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute$3(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed$1(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left()), optY.getOr(original.top()));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute$3), absorbOne(asFixed, fixed$1));\n    };\n    var offset = adt$c.offset;\n    var absolute$3 = adt$c.absolute;\n    var fixed$1 = adt$c.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$2(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get$e = function (component, snapsInfo) {\n      var element = component.element();\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Option.none() : Option.some(Position(x, y));\n    };\n    var set$8 = function (component, snapsInfo, pt) {\n      var element = component.element();\n      set$1(element, snapsInfo.leftAttr, pt.left() + 'px');\n      set$1(element, snapsInfo.topAttr, pt.top() + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element();\n      remove$1(element, snapsInfo.leftAttr);\n      remove$1(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get$e(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed) {\n        return fixed$1(fixed.left() + delta.left(), fixed.top() + delta.top());\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set$8(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed$1(fixedCoord.left(), fixedCoord.top()),\n          extra: Option.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left(), snap.range.top(), scroll, origin);\n        return inRange ? Option.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Option.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left(), snap.range.top(), scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Option.some(deltas),\n              snap: Option.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left() + deltas.top()) / 2;\n            var bestAvg = (bestDeltas.left() + bestDeltas.top()) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Option.some(deltas),\n                snap: Option.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Option.none(),\n          snap: Option.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo$1 = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element());\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element());\n        var scroll = get$8(doc);\n        var origin = getOrigin(target);\n        var snapPin = snapTo(snap, scroll, origin);\n        var styles = toStyles(snapPin.coord, scroll, origin);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo$1\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element()).filter(isElement).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$2(root, 'z-index', zIndex);\n        });\n        remove$1(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element()).filter(isElement).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$1(root, initialAttribute, zindex);\n        });\n        set$2(root, 'z-index', get$4(blocker.element(), 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      strict$1('getSnapPoints'),\n      onHandler('onSensor'),\n      strict$1('leftAttr'),\n      strict$1('topAttr'),\n      defaulted$1('lazyViewport', win),\n      defaulted$1('mustSnap', false)\n    ]);\n\n    var schema$t = [\n      defaulted$1('useFixed', never),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      defaulted$1('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed$1 : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute(target);\n        return absolute$3(location.left(), location.top());\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp(absoluteCoord.left(), bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp(absoluteCoord.top(), bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute$3(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left(), offset$1.top());\n      }, function () {\n        return newCoords;\n      }, function () {\n        var fixed = asFixed(newCoords, scroll, origin);\n        return fixed$1(fixed.left(), fixed.top());\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate$2(currentCoord, delta.left(), delta.top());\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed$1(fixedCoord.left(), fixedCoord.top());\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element());\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element());\n        var scroll = get$8(doc);\n        var origin = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll, origin, delta, startData);\n        var styles = toStyles(newCoord, scroll, origin);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$1(comp.element()),\n        width: getOuter$2(comp.element())\n      };\n    };\n    var move$1 = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element());\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive(__spreadArrays([run(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState)));\n      };\n    };\n\n    var init$c = function (dragApi) {\n      return derive([\n        run(mousedown(), dragApi.forceDrop),\n        run(mouseup(), dragApi.drop),\n        run(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event());\n        }),\n        run(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Option.from(Position(event.x(), event.y()));\n    };\n    var getDelta$1 = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$g = function (dragConfig, dragState, updateStartState) {\n      return [run(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event().raw();\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Option.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move$1(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$c(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$u = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$g) })]);\n\n    var init$d = function (dragApi) {\n      return derive([\n        run(touchstart(), dragApi.forceDrop),\n        run(touchend(), dragApi.drop),\n        run(touchcancel(), dragApi.drop),\n        run(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event());\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Option.some(Position(touch.clientX, touch.clientY));\n    };\n    var getData$2 = function (event) {\n      var raw = event.raw();\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Option.none();\n    };\n    var getDelta$2 = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$2,\n        getDelta: getDelta$2\n    });\n\n    var events$h = function (dragConfig, dragState, updateStartState) {\n      var blockerCell = Cell(Option.none());\n      return [\n        run(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            stop(component, blockerCell.get(), dragConfig, dragState);\n            blockerCell.set(Option.none());\n          };\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: function () {\n            },\n            forceDrop: stop$1,\n            move: function (event) {\n              move$1(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$d(dragApi));\n          blockerCell.set(Option.some(blocker));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move$1(component, dragConfig, dragState, TouchData, simulatedEvent.event());\n        }),\n        run(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Option.none());\n        }),\n        run(touchcancel(), function (component) {\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Option.none());\n        })\n      ];\n    };\n    var schema$v = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$h) })]);\n\n    var events$i = function (dragConfig, dragState, updateStartState) {\n      return __spreadArrays(events$g(dragConfig, dragState, updateStartState), events$h(dragConfig, dragState, updateStartState));\n    };\n    var schema$w = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$i) })]);\n\n    var mouse = schema$u;\n    var touch = schema$v;\n    var mouseOrTouch = schema$w;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init$e = function () {\n      var previous = Option.none();\n      var startData = Option.none();\n      var reset = function () {\n        previous = Option.none();\n        startData = Option.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Option.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$e\n    });\n\n    var Dragging = createModes$1({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Option.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute$3(x - snapOffset, y - snapOffset),\n          range: Position(width, height),\n          output: absolute$3(Option.some(x), Option.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element().dom().getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute$3(sensorLeft, sensorTop),\n          range: Position(sensorWidth, sensorHeight),\n          output: absolute$3(Option.some(x - rect.width / 2), Option.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq$1(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(Option.some(td));\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$a = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = Cell(Option.none());\n      var finishCell = Cell(Option.none());\n      var getTopLeftSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom().getBoundingClientRect();\n        remove$6(selector.element(), 'display');\n        var viewportHeight = defaultView(Element.fromDom(editor.getBody())).dom().innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$2(selector.element(), 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$3().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach$1(sink, topLeft);\n            attach$1(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(Option.some(e.start));\n          finishCell.set(Option.some(e.finish));\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.set(Option.none());\n          finishCell.set(Option.none());\n        });\n      }\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top(), getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left(), getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize$3 = function (editor, deltas, resizeType) {\n      var container = Element.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$6(container), get$7(container));\n      each$1(dimensions, function (val, dim) {\n        return set$2(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var isHidden$1 = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isReadOnly),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden$1(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isReadOnly }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isReadOnly),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: {\n          'alloy.execute': [\n            'disabling',\n            'alloy.base.behaviour',\n            'wordcount-events'\n          ]\n        }\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderResizeHandlerIcon = function (resizeType) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__resize-handle'],\n            attributes: {\n              'title': providersBackstage.translate('Resize'),\n              'aria-hidden': 'true'\n            },\n            innerHtml: get$d('resize-handle', providersBackstage.icons)\n          },\n          behaviours: derive$1([Dragging.config({\n              mode: 'mouse',\n              repositionTarget: false,\n              onDrag: function (comp, target, delta) {\n                resize$3(editor, delta, resizeType);\n              },\n              blockerClass: 'tox-blocker'\n            })])\n        };\n      };\n      var renderBranding = function () {\n        var label = global$6.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getResizeType = function (editor) {\n        var fallback = !contains$1(editor.getParam('plugins', '', 'string'), 'autoresize');\n        var resize = editor.getParam('resize', fallback);\n        if (resize === false) {\n          return ResizeTypes.None;\n        } else if (resize === 'both') {\n          return ResizeTypes.Both;\n        } else {\n          return ResizeTypes.Vertical;\n        }\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (contains$1(editor.getParam('plugins', '', 'string'), 'wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeType = getResizeType(editor);\n        if (resizeType !== ResizeTypes.None) {\n          components.push(renderResizeHandlerIcon(resizeType));\n        }\n        return components;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$b = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Option.none();\n      var platform = detect$3();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var dirAttributes = global$6.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var sink = build$1({\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-silver-sink',\n            'tox-tinymce-aux'\n          ].concat(platformClasses).concat(deviceClasses)\n        }, dirAttributes),\n        behaviours: derive$1([Positioning.config({\n            useFixed: function () {\n              return isHeaderDocked();\n            }\n          })])\n      });\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$8(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts().menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts().toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts()['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts().socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts().sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts().throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Option.some(renderStatusbar(editor, backstage.shared.providers)) : Option.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts().header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$6.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a'\n          })])\n      }));\n      lazyOuterContainer = Option.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$3(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: function () {\n          }\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$2(outerContainer.element(), 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$2(outerContainer.element(), 'height', parsedHeight);\n          } else {\n            set$2(outerContainer.element(), 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$8(editor, backstage);\n        setup$9(editor, lazySink, backstage);\n        setup$6(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$2(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$4(editor, contextToolbars, sink, { backstage: backstage });\n        setup$a(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Option.from(get$2(describedElement, 'id')).fold(function () {\n        var id = generate$1('dialog-describe');\n        set$1(describeElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = Option.from(get$2(labelledElement, 'id')).fold(function () {\n        var id = generate$1('dialog-label');\n        set$1(labelElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$x = constant([\n      strict$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted$1('useTabstopAt', constant(true)),\n      defaulted$1('eventOrder', {}),\n      field$1('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity };\n    var parts$f = constant([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor$2(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [strict$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted$1('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted$1('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$i = function (detail, components, spec, externals) {\n      var dialogBusyEvent = generate$1('alloy.dialog.busy');\n      var dialogIdleEvent = generate$1('alloy.dialog.idle');\n      var busyBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Option.some(true);\n          },\n          onShiftTab: function () {\n            return Option.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var showDialog = function (dialog) {\n        var sink = detail.lazySink(dialog).getOrDie();\n        var busyComp = Cell(Option.none());\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade$1(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [\n              runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              }),\n              run(dialogIdleEvent, function (_blocker, _se) {\n                if (has$1(dialog.element(), 'aria-busy')) {\n                  remove$1(dialog.element(), 'aria-busy');\n                  busyComp.get().each(function (bc) {\n                    return Replacing.remove(dialog, bc);\n                  });\n                }\n              }),\n              run(dialogBusyEvent, function (blocker, se) {\n                set$1(dialog.element(), 'aria-busy', 'true');\n                var getBusySpec = se.event().getBusySpec();\n                busyComp.get().each(function (bc) {\n                  Replacing.remove(dialog, bc);\n                });\n                var busySpec = getBusySpec(dialog, busyBehaviours);\n                var busy = blocker.getSystem().build(busySpec);\n                busyComp.set(Option.some(busy));\n                Replacing.append(dialog, premade$1(busy));\n                if (busy.hasConfigured(Keying)) {\n                  Keying.focusIn(busy);\n                }\n              })\n            ])\n          ])\n        }));\n        attach$1(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        parent(dialog.element()).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        emitWith(dialog, dialogBusyEvent, { getBusySpec: getBusySpec });\n      };\n      var setIdle = function (dialog) {\n        emit(dialog, dialogIdleEvent);\n      };\n      var modalEventsId = generate$1('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), { 'alloy.system.attached': [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []) });\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element(), getPartOrDie(c, detail, 'title').element());\n              describedBy(c.element(), getPartOrDie(c, detail, 'body').element());\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite$1({\n      name: 'ModalDialog',\n      configFields: schema$x(),\n      partFields: parts$f(),\n      factory: factory$i,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      strictString('type'),\n      strictString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseButtonFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogButtonFields = __spreadArrays(baseButtonFields, [strictString('text')]);\n    var normalButtonFields = __spreadArrays([strictStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogButtonFields);\n    var menuButtonFields = __spreadArrays([\n      strictStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseButtonFields);\n    var dialogButtonSchema = choose$1('type', {\n      submit: normalButtonFields,\n      cancel: normalButtonFields,\n      custom: normalButtonFields,\n      menu: menuButtonFields\n    });\n\n    var alertBannerFields = [\n      strictString('type'),\n      strictString('text'),\n      strictStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      strictString('icon'),\n      defaulted$1('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        strictString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      strictString('type'),\n      strictString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      strictString('type'),\n      strictString('name'),\n      strictString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      strictString('type'),\n      strictString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOfObj('items', [\n        strictString('text'),\n        strictString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      strictString('width'),\n      strictString('height')\n    ]);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted$1('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      strictString('value'),\n      defaulted$1('meta', {})\n    ]);\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictString('scriptId'),\n      strictString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var htmlPanelFields = [\n      strictString('type'),\n      strictString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var imageToolsFields = formComponentWithLabelFields.concat([strictOf('currentState', objOf([\n        strict$1('blob'),\n        strictString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted$1('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj$1([\n      strictString('value'),\n      strictString('text'),\n      strictString('icon')\n    ]);\n\n    var createLabelFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictString('label'),\n        itemsField\n      ];\n    };\n\n    var tableFields = [\n      strictString('type'),\n      strictArrayOf('header', string),\n      strictArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var createItemsField = function (name) {\n      return field('items', 'items', strict(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema$2, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema$2 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      strictString('type'),\n      defaulted$1('classes', []),\n      strictArrayOf('items', itemSchema$2)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('tab-name');\n      }), string),\n      strictString('title'),\n      strictArrayOf('items', itemSchema$2)\n    ];\n    var tabPanelFields = [\n      strictString('type'),\n      strictArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields$1 = dialogButtonFields;\n    var dialogButtonSchema$1 = dialogButtonSchema;\n    var dialogSchema = objOf([\n      strictString('title'),\n      strictOf('body', chooseProcessor('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      strictArrayOf('buttons', dialogButtonSchema$1),\n      defaulted$1('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted$1('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Option.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [strictOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArrays([strictStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields$1));\n    var urlDialogSchema = objOf([\n      strictString('title'),\n      strictString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var extract$1 = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract$1(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract$1(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each$1(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                domGlobals.console.error(err);\n                return {};\n              }, function (vals) {\n                return vals;\n              });\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$j = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$7(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single$2({\n      name: 'TabButton',\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('value'),\n        field('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$1('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue$1()),\n        option('action'),\n        defaulted$1('domModification', {}),\n        field$1('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        strict$1('view')\n      ],\n      factory: factory$j\n    });\n\n    var schema$y = constant([\n      strict$1('tabs'),\n      strict$1('dom'),\n      defaulted$1('clickToDismiss', false),\n      field$1('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$g = constant([tabsPart]);\n\n    var factory$k = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$1(tab.element(), 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$1(tab.element(), 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element();\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite$1({\n      name: 'Tabbar',\n      configFields: schema$y(),\n      partFields: parts$g(),\n      factory: factory$k\n    });\n\n    var factory$l = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single$2({\n      name: 'Tabview',\n      configFields: [field$1('tabviewBehaviours', [Replacing])],\n      factory: factory$l\n    });\n\n    var schema$z = constant([\n      defaulted$1('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted$1('tabs', []),\n      field$1('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        strict$1('dom'),\n        strictObjOf('markers', [\n          strict$1('tabClass'),\n          strict$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts$h = constant([\n      barPart,\n      viewPart\n    ]);\n\n    var factory$m = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element(), 'id').each(function (id) {\n              set$1(tabview.element(), 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$c(detail.tabSectionBehaviours),\n        events: derive(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event().button();\n              changeTab$1(button);\n            }),\n            run(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event().button();\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite$1({\n      name: 'TabSection',\n      configFields: schema$z(),\n      partFields: parts$h(),\n      factory: factory$m,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom().getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom();\n      var rootElm = ancestor$2(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$4(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, domGlobals.window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$6(tabview);\n      var isTabListBeside = tabview.dom().offsetLeft >= tablist.dom().offsetLeft + get$7(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$6(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$4(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$4(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$6(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$2(tabview, 'height', height + 'px');\n      if (!detect$3().browser.isIE()) {\n        set$2(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor$2(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant$1(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$2(tabview, 'height', '0');\n            set$2(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant$1(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = Cell(Option.none());\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element();\n            getTabview(dialog).each(function (tabview) {\n              set$2(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOption().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeight.set(maxTabHeightOpt);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$2.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run(windowResize(), function (comp) {\n            var dialog = comp.element();\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element();\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active();\n              set$2(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom().getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(Option.from(newHeight));\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$1);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll$1([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts().tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts().tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts().tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$1('update-dialog');\n    var titleChannel = generate$1('update-title');\n    var bodyChannel = generate$1('update-body');\n    var footerChannel = generate$1('update-footer');\n    var bodySendMessageChannel = generate$1('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Option.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Option.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Option.none(), backstage, false);\n      return ModalDialog.parts().body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts().body(bodySpec);\n    };\n\n    var isTouch = global$8.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts().close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts().title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts().body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml$2('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts().footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Option.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArrays([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray()),\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArrays([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$4(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours)),\n        eventOrder: __assign((_a = {}, _a[execute()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: '<svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\">' + '<path d=\"M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 ' + '13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 ' + '7.453l1.406-1.406L12 10.578l4.547-4.531z\" ' + 'fill-rule=\"evenodd\"></path></svg>'\n            }\n          }],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml$2('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Option.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$3(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts().title(renderTitle(spec, Option.none(), providersBackstage));\n      var pHandle = ModalDialog.parts().draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts().close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getEventExtras = function (lazyDialog, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (d, bs) {\n            return {\n              dom: {\n                tag: 'div',\n                classes: ['tox-dialog__busy-spinner'],\n                attributes: { 'aria-label': blockEvent.message() },\n                styles: {\n                  left: '0px',\n                  right: '0px',\n                  bottom: '0px',\n                  top: '0px',\n                  position: 'absolute'\n                }\n              },\n              behaviours: bs,\n              components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n            };\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Option.some(incoming);\n      };\n      return build$1(renderDialog(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArrays([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          'reflecting',\n          'receiving'\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          'reflecting',\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          'reflecting',\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus$1),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event());\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event(), c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name() });\n        })]);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event(), c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name() });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var current = active();\n          spec.onAction(api, {\n            name: event.name(),\n            value: event.value()\n          });\n          active().fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains$2(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOption().filter(function (sink) {\n                return !contains$2(sink.element(), focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name(),\n            oldTabName: event.oldName()\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ]);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup$2 = function (compInSystem, footerButtons, buttonName) {\n      return find(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup$2(compInSystem, footerButtons, buttonName);\n        };\n        return Option.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml$2('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts().footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Option.some(comp);\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var validateData = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$2(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each$1(menuItemStates, function (v, k) {\n            if (has(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var renderDialog$1 = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra), backstage.shared.getSink);\n      var dialogSize = dialogInit.internalDialog.size !== 'normal' ? dialogInit.internalDialog.size === 'large' ? ['tox-dialog--width-lg'] : ['tox-dialog--width-md'] : [];\n      var spec = {\n        header: header,\n        body: body,\n        footer: Option.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: function () {\n            return dialog;\n          },\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$1('dialog-label');\n      var dialogContentId = generate$1('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Option.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function () {\n        },\n        onUnblock: function () {\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = '' + dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Option.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name(elem) !== 'button' || get$2(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: function () {\n          return dialog;\n        },\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Option.none();\n        } else {\n          return Option.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$g(internalDialog.url, { base_uri: new global$g(domGlobals.window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = Cell(Option.none());\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind$3(Element.fromDom(domGlobals.window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$g(e.raw().origin))) {\n                var data = e.raw().data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(Option.some(unbind));\n          }),\n          runOnDetached(function () {\n            messageHandlerUnbinder.get().each(function (unbinder) {\n              return unbinder.unbind();\n            });\n          })\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant$1(comp.element(), 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom().contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$c = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Option.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$d = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Option.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData$1 = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest$4(target, '.tox-alert-dialog') || closest$4(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Option.some(box(Element.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup$e = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$c(extras);\n      var confirmDialog = setup$d(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog$1(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData$1(internalInitialData, dataValidator);\n          var inlineDialog = value$3();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArrays([config('window-manager-inline-events', [run(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop))),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, anchor, premade$1(dialogUi.dialog), Option.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$1.add('silver', function (editor) {\n        var _a = setup$b(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup$e({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}(window));\n","// Exports the \"paste\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/paste')\n//   ES2015:\n//     import 'tinymce/plugins/paste'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.4.1 (2020-07-08)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])powerpaste([, ]|$)/.test(editor.getParam('plugins')) && global.get('powerpaste')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n\n    var togglePlainTextPaste = function (editor, clipboard) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n\n    var register = function (editor, clipboard) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        togglePlainTextPaste(editor, clipboard);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isFunction = isSimpleType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var internalHtmlMime = function () {\n      return internalMimeType;\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$4.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$4.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var nbsp = '\\xA0';\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var getValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var getAllowHtmlDataUrls = function (editor) {\n      return editor.getParam('allow_html_data_urls', false, 'boolean');\n    };\n    var getPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false, 'boolean');\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter');\n    };\n    var getImagesReuseFilename = function (editor) {\n      return editor.getParam('images_reuse_filename');\n    };\n    var getForcedRootBlock = function (editor) {\n      return editor.getParam('forced_root_block');\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs');\n    };\n\n    function filter$1(content, items) {\n      global$4.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$a();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$4.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return nbsp;\n      }\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var isMsEdge = function () {\n      return domGlobals.navigator.userAgent.indexOf(' Edge/') !== -1;\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found;\n      var patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$4.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$9(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$4.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$9('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$9('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var validStyles;\n      var retainStyleProperties = getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$4.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = filter$1(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          nbsp\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join(nbsp) : '';\n          }\n        ]\n      ]);\n      var validElements = getWordValidElements(editor);\n      var schema = global$a({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$4.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$8({ validate: getValidate(editor) }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n\n    var preProcess$1 = function (editor, html) {\n      var parser = global$7({}, editor.schema);\n      parser.addNodeFilter('meta', function (nodes) {\n        global$4.each(nodes, function (node) {\n          return node.remove();\n        });\n      });\n      var fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return global$8({ validate: getValidate(editor) }, editor.schema).serialize(fragment);\n    };\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = firePastePreProcess(editor, content, internal, isWordHtml);\n      var filteredContent = preProcess$1(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = isWordContent(html);\n      var content = isWordHtml ? preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(html, {\n        merge: shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$4.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html, pasteAsText) {\n      if (pasteAsText || isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var isNewLineChar = function (c) {\n      return c === '\\n' || c === '\\r';\n    };\n    var isNewline = function (text, idx) {\n      return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    };\n    var normalizeWhitespace = function (text) {\n      var result = foldl(text, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === nbsp) {\n          if (acc.pcIsSpace || acc.str === '' || acc.str.length === text.length - 1 || isNewline(text, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    var doPaste = function (editor, content, internal, pasteAsText) {\n      var args = process(editor, content, internal);\n      if (args.cancelled === false) {\n        insertContent(editor, args.content, pasteAsText);\n      }\n    };\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : isMarked(html);\n      doPaste(editor, unmark(html), internal, false);\n    };\n    var pasteText = function (editor, text) {\n      var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      var normalizedText = normalizeWhitespace(encodedText);\n      var html = convert(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n      doPaste(editor, html, false, true);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      var content = getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n      return isMsEdge() ? global$4.extend(content, { 'text/html': '' }) : content;\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n      if (matches) {\n        return {\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        };\n      } else {\n        return {\n          type: null,\n          data: null\n        };\n      }\n    };\n    var isValidDataUriImage = function (editor, imgElm) {\n      var filter = getImagesDataImgFilter(editor);\n      return filter ? filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var _a = parseDataUri(imageItem.uri), base64 = _a.data, type = _a.type;\n      var id = uniqueId();\n      var name = getImagesReuseFilename(editor) && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new domGlobals.Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0;\n        var existingBlobInfo = blobCache.getByData(base64, type);\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return global$3.all(map(items, function (item) {\n        return new global$3(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      }));\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (getPasteDataImages(editor) && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).then(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return domGlobals.navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$5.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$1.webkit && domGlobals.navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$1.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = trimHtml(content);\n        pasteBin.remove();\n        var isPlainTextHtml = internal === false && isPlainText(content);\n        var isImage = isImageUrl(content);\n        if (!content.length || isPlainTextHtml && !isImage) {\n          plainTextMode = true;\n        }\n        if (plainTextMode || isImage) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$1.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$2.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$1.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!getPasteDataImages(editor) && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attr('src');\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!getAllowHtmlDataUrls(editor) && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$1.ie && editor.inline ? domGlobals.document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (_e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      lastRngCell.set(editor.selection.getRng());\n      var pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$1.ie || global$1.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      var pasteBinClones = global$4.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      var pasteBinElm = pasteBinClones.shift();\n      global$4.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      var dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (var i = dirtyWrappers.length - 1; i >= 0; i--) {\n        var cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('PreInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$1.iOS === false && clipboardData !== undefined && typeof clipboardData.setData === 'function' && isMsEdge() !== true;\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        global$2.setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            if (global$1.browser.isChrome()) {\n              var rng_1 = editor.selection.getRng();\n              global$2.setEditorTimeout(editor, function () {\n                editor.selection.setRng(rng_1);\n                editor.execCommand('Delete');\n              }, 0);\n            } else {\n              editor.execCommand('Delete');\n            }\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n          });\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        var dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$2.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (_e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$4.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = filter$1(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = filter$1(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = getWebkitStyles(editor);\n      var webKitStyles;\n      if (shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$1.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$1.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n\n    var makeSetupHandler = function (editor, clipboard) {\n      return function (api) {\n        api.setActive(clipboard.pasteFormat.get() === 'text');\n        var pastePlainTextToggleHandler = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n        return function () {\n          return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n        };\n      };\n    };\n    var register$2 = function (editor, clipboard) {\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        icon: 'paste-text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n    };\n\n    function Plugin () {\n      global.add('paste', function (editor) {\n        if (hasProPlugin(editor) === false) {\n          var draggingInternallyState = Cell(false);\n          var pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n          var clipboard = Clipboard(editor, pasteFormat);\n          var quirks = setup$2(editor);\n          register$2(editor, clipboard);\n          register(editor, clipboard);\n          setup$1(editor);\n          register$1(editor);\n          setup(editor, clipboard, draggingInternallyState);\n          return get(clipboard, quirks);\n        }\n      });\n    }\n\n    Plugin();\n\n}(window));\n","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.4.1 (2020-07-08)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$2.each(list, function (item) {\n        var text = isString(item.text) ? item.text : isString(item.title) ? item.title : '';\n        if (item.menu !== undefined) ; else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Option.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'selectbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n\n    var hasRtcPlugin = function (editor) {\n      if (/(^|[ ,])rtc([, ]|$)/.test(editor.getParam('plugins', '', 'string')) && global.get('rtc')) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$2.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$2.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var isLink = function (elm) {\n      return elm && elm.nodeName === 'A' && !!getHref(elm);\n    };\n    var hasLinks = function (elements) {\n      return global$2.grep(elements, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (html) {\n      if (/</.test(html) && (!/^<a [^>]+>[^<]+<\\/a>$/.test(html) || html.indexOf('href=') === -1)) {\n        return false;\n      }\n      return true;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      return foldl([\n        'title',\n        'rel',\n        'class',\n        'target'\n      ], function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Option.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (anchorElm.hasOwnProperty('innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          var anchorElm = editor.dom.getParent(node, 'a[href]', editor.getBody());\n          if (anchorElm) {\n            editor.dom.remove(anchorElm, true);\n          }\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var link = function (editor, attachState, data) {\n      hasRtcPlugin(editor) ? editor.execCommand('createlink', false, unwrapOptions(data)) : linkDomMutation(editor, attachState, data);\n    };\n    var unlink = function (editor) {\n      hasRtcPlugin(editor) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        return Option.some(item).filter(function (i) {\n          return i.value === value;\n        });\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Option.none();\n    };\n    var findCatalog = function (settings, fieldName) {\n      if (fieldName === 'link') {\n        return settings.catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return settings.catalogs.anchor;\n      } else {\n        return Option.none();\n      }\n    };\n    var init = function (initialData, linkSettings) {\n      var persistentText = Cell(initialData.text);\n      var onUrlChange = function (data) {\n        if (persistentText.get().length <= 0) {\n          var urlText = data.url.meta.text !== undefined ? data.url.meta.text : data.url.value;\n          var urlTitle = data.url.meta.title !== undefined ? data.url.meta.title : '';\n          return Option.some({\n            text: urlText,\n            title: urlTitle\n          });\n        } else {\n          return Option.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkSettings, change.name).getOr([]);\n        return getDelta(persistentText.get(), change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        if (change.name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], change.name)) {\n          return onCatalogChange(getData(), change);\n        } else if (change.name === 'text') {\n          persistentText.set(getData().text);\n          return Option.none();\n        } else {\n          return Option.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$3.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Option.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Option.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www[\\.|\\d\\.]/i.test(url);\n        return suggestProtocol ? Option.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Option.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$4.resolve(data);\n      }, function (transform) {\n        return new global$4(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Option.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Option.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Option.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Option.some(JSON.parse(text));\n      } catch (err) {\n        return Option.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$4(function (callback) {\n        if (isString(linkList)) {\n          global$5.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Option.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Option.some(output));\n          });\n        } else {\n          callback(Option.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            return [{\n                text: 'None',\n                value: ''\n              }].concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = initialTarget.is('_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Option.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Option.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Option.none();\n      }\n      return Option.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Option.some(val) : Option.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor.selection.getContent());\n      var text = onlyText ? Option.some(getAnchorText(editor.selection, anchor)) : Option.none();\n      var url = anchor ? Option.some(dom.getAttrib(anchor, 'href')) : Option.none();\n      var target = anchor ? Option.from(dom.getAttrib(anchor, 'target')) : Option.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Option.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Option.from(data[key]).filter(function (value) {\n            return !info.anchor[key].is(value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : function () {\n          }\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      return {\n        url: {\n          value: info.anchor.url.getOr(''),\n          meta: {\n            attach: function () {\n            },\n            text: info.anchor.url.fold(function () {\n              return '';\n            }, function () {\n              return info.anchor.text.getOr('');\n            }),\n            original: { value: info.anchor.url.getOr('') }\n          }\n        },\n        text: info.anchor.text.getOr(''),\n        title: info.anchor.title.getOr(''),\n        anchor: info.anchor.url.getOr(''),\n        link: info.anchor.url.getOr(''),\n        rel: info.anchor.rel.getOr(''),\n        target: info.anchor.target.or(defaultTarget).getOr(''),\n        linkClass: info.anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Option.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var dialogDelta = DialogChanges.init(initialData, settings);\n      var catalogs = settings.catalogs;\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      domGlobals.document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      domGlobals.document.body.removeChild(link);\n    };\n    var open$1 = function (url) {\n      var link = domGlobals.document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = domGlobals.document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, domGlobals.window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open$1(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$1.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var nodeChangeHandler = function (e) {\n          return api.setActive(!editor.mode.isReadOnly() && !!getAnchorElement(editor, e.element));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks(parents));\n        var nodeChangeHandler = function (e) {\n          return api.setDisabled(!hasLinks(e.parents));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleEnabledState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleEnabledState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return function () {\n        };\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var anchor = getAnchorElement(editor);\n              var value = formApi.getValue();\n              if (!anchor) {\n                var attachState = {\n                  href: value,\n                  attach: function () {\n                  }\n                };\n                var onlyText = isOnlyTextSelected(editor.selection.getContent());\n                var text = onlyText ? Option.some(getAnchorText(editor.selection, anchor)).filter(function (t) {\n                  return t.length > 0;\n                }).or(Option.from(value)) : Option.none();\n                link(editor, attachState, {\n                  href: value,\n                  text: text,\n                  title: Option.none(),\n                  rel: Option.none(),\n                  target: Option.none(),\n                  class: Option.none()\n                });\n                formApi.hide();\n              } else {\n                editor.undoManager.transact(function () {\n                  editor.dom.setAttrib(anchor, 'href', value);\n                  collapseSelectionToEnd(editor);\n                  formApi.hide();\n                });\n              }\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}(window));\n"],"sourceRoot":""}